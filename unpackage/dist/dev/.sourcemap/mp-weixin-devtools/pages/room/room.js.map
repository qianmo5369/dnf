{"version":3,"names":["TnModal","TnIcon","fuiUpload","Recharge","fuiBottomPopup","TnAvatar","fuiSafeArea","fuiNavBar","fuiDialog","TnPopup","Parse","uploadRef","common_vendor","ref","uploadUrl","util_env","baseUrl","uploadStatus","settlementImage","dialogShow","completeShow","title","content","confirmText","roomData","onConfirm","selectedHeroId","msgTime","inputMsg","room_id","msgList","phrasShow","isGoldCar","teraCost","hasCard","cardPrice","gameLinkInput","rechargeShow","orderInfo","teraRatio","computed","parseFloat","_a","value","room","tera_ratio","scrollTop","contentId","contentShow","handleContent","id","sellerTera","cost","toFixed","realTera","self","cardcost","result","cashProfit","tera","ratio","cardProfit","sumProfit","leilongStages","label","leilongStage","gameLinkShow","onShow","getRoomData","onLoad","params","share_uid","index","setStorageSync","__f__","showToast","icon","waitingTimeText","progressTimeText","timer","startTime","status","Date","now","formatTime","seconds","h","String","Math","floor","padStart","m","s","concat","updateTimer","current","start","Number","max","initCounter","waiting_start_at","progress_start_at","clearInterval","setInterval","onUnmounted","handlePhras","faceShow","complaintLink","linkTo","onClick","e","onClose","refresh","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","wrap","_callee$","_context","prev","next","getChatList","stop","apply","arguments","onStartGame","positions","joinedMembers","filter","pos","user","length","is_terache","doStartGame","path","type","undefined","switchTab","url","navigateTo","isRoomOperator","joined_role_code","map_code","hasDps","some","code","onKickMember","currentUserId","user_id","is_owner","nickname","doKickMember","_ref2","_callee2","memberId","res","_callee2$","_context2","$http","post","member_id","sent","msg","_x2","sendChat","_ref3","_callee3","_callee3$","_context3","trim","abrupt","util_ws","ws","send","phrasSend","_ref4","_callee4","_callee4$","_context4","_x3","_ref5","_callee5","_callee5$","_context5","last_id","data","list","nextTick$1","scrollToBottom","commonPhrases","getCommonPhrases","_ref6","_callee6","_callee6$","_context6","updateGameUrl","_ref7","_callee7","_callee7$","_context7","game_url","_ref8","_callee8","_callee8$","_context8","onCheckRoom","game_link","onSelectPosition","_ref9","_callee9","_callee9$","_context9","copy","is_member","payload","user_hero_id","room_code","_x4","previewImage","urls","success","fail","complete","onLeaveRoom","confirmLeaveRoom","_ref10","_callee10","_callee10$","_context10","doResetToWait","_ref11","_callee11","_callee11$","_context11","onResetToWait","_ref12","_callee12","_callee12$","_context12","doCompleteRoom","_ref13","_callee13","SettlementUrl","imagesList","_callee13$","_context13","join","image_url","stage","tera_cost","is_gold_car","has_card","card_price","_ref14","_callee14","_callee14$","_context14","toHome","checkMemberAccess","callback","getRoleColor","_ref15","_callee15","_callee15$","_context15","val","js_sdk_xbCopy_uniCopy","uniCopy","error","duration","uploadSuccess","JSON","parse","replace","push","uploadError","showModal","stringify","pasteText","getClipboardData","focus","focusChange","blurChange","faceChange","hideKeyboard","faceClick","item","delMsg","number","substr","search","createSelectorQuery","select","boundingClientRect","rect","height","exec","scrollTo","watch","len","innerAudioContext","destroyAudio","destroy","createAudio","audioSrc","createInnerAudioContext","src","onPlay","onEnded","onError","errCode","errMsg","play","onMounted","_callee16","_b","_c","_callee16$","_context16","channel","includes","game_link_status","on","num","joined_number","show_completed_modal","reLaunch","catch","err","wx","createPage","MiniProgramPage"],"sources":["room.vue","room.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"room-container\">\r\n\t\t<fui-dialog :show=\"dialogShow\" :content=\"content\" :title=\"title\" :confirmText=\"confirmText\" maskClosable @click=\"onClick\"\r\n\t\t\t@close=\"onClose\"></fui-dialog>\r\n\t\t<TnModal ref=\"modalRef\" />\r\n\r\n\t\t<view v-if=\"rechargeShow\" style=\"z-index: 1000001;\">\r\n\t\t\t<Recharge v-model=\"rechargeShow\" :orderInfo=\"orderInfo\"></Recharge>\r\n\t\t</view>\n\t\t\n\t\t<TnPopup z-index=\"20076\" :model-value=\"contentShow\" width=\"90%\" height=\"70vh\" borderRadius=\"16rpx\">\n\t\t\t<Parse v-if=\"contentShow\" v-model=\"contentShow\" :contentId=\"contentId\"></Parse>\n\t\t</TnPopup>\n\t\t\n\t\t\n\t\t<TnPopup :model-value=\"gameLinkShow\" width=\"80%\" height=\"450rpx\" borderRadius=\"16rpx\">\n\t\t\t<view class=\"game-link-card-box\">\n\t\t\t\t<view class=\"game-link-popup-header\">创建游戏房间链接</view>\n\t\t\t\t<view class=\"fui-icon__close\" @tap=\"gameLinkShow = false;\">\n\t\t\t\t\t<TnIcon name=\"close\" size=\"35\" color=\"#999\" />\n\t\t\t\t</view>\n\t\t\t\t<view class=\"game-link-content\">\n\t\t\t\t\t<view class=\"link-input-box\">\n\t\t\t\t\t\t<input class=\"game-link-input\"  v-model=\"gameLinkInput\" placeholder=\"请输入游戏房间链接\" type=\"text\" />\n\t\t\t\t\t\t<view class=\"paste-btm\" @tap=\"pasteText\">\n\t\t\t\t\t\t\t粘贴链接\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"link-desc\">\n\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t只需要三步，15秒告别繁琐邀请流程\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view>\n\t\t\t\t\t\t\t(匹配成功后，可再次填写)\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"link-btn-layout\">\n\t\t\t\t\t<view class=\"link-btn-close\" @tap=\"handleContent(6)\">\n\t\t\t\t\t\t如何填写?\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"line\"></view>\n\t\t\t\t\t<view class=\"link-btn\" @tap=\"updateGameUrl\">\n\t\t\t\t\t\t确认填写\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t</view>\n\t\t</TnPopup>\r\n\r\n\t\t<fui-bottom-popup :show=\"phrasShow\" :zIndex=\"4000\">\r\n\t\t\t<view class=\"phras-popup\">\r\n\t\t\t\t<view class=\"phras-header\">常用语</view>\r\n\t\t\t\t<view class=\"fui-icon__close\" @tap=\"phrasShow  = false\">\r\n\t\t\t\t\t<TnIcon name=\"close\" color=\"#000\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"phras-list\">\r\n\t\t\t\t\t<view class=\"phras-item\" v-for=\"(item,index) in commonPhrases\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"phras-desc\">\r\n\t\t\t\t\t\t\t{{item.text}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"phras-send\" @tap=\"phrasSend(item.text)\">\r\n\t\t\t\t\t\t\t发送\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</fui-bottom-popup>\r\n\t\t<fui-bottom-popup :show=\"completeShow\" :zIndex=\"8000\">\r\n\t\t\t<view class=\"complete-popup\">\r\n\r\n\t\t\t\t<!-- 标题 -->\r\n\t\t\t\t<view class=\"popup-header\">完成结算</view>\r\n\t\t\t\t<view class=\"fui-icon__close\" @tap=\"completeShow = false\">\r\n\t\t\t\t\t<TnIcon name=\"close\" color=\"#000\" />\r\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\t<view class=\"popup-alert\"><TnIcon name=\"tip-fill\" color=\"#f53f3f\" />\n\t\t\t\t\t<text v-if=\"roomData.room?.map_code != 'leilong'\" class=\"tn-ml\">上传截图，可作为纠纷评判依据</text>\n\t\t\t\t\t<text class=\"tn-ml\" v-else>没有达到13阶段直接解散</text>\n\t\t\t\t\t</view>\n\t\t\t\r\n\r\n\t\t\t\t<!--  泰拉车结算表单 -->\r\n\t\t\t\t<template v-if=\"roomData.room?.map_code == 'terache'\">\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"label required\">是否金币车</text>\r\n\t\t\t\t\t\t<view class=\"circle-radio-group\">\r\n\t\t\t\t\t\t\t<view class=\"circle-radio-item\" :class=\"{ selected: isGoldCar === '0' }\"\r\n\t\t\t\t\t\t\t\t@tap=\"isGoldCar = '0'\">\r\n\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"isGoldCar === '0'\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text>否</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"circle-radio-item\" :class=\"{ selected: isGoldCar === '1' }\"\r\n\t\t\t\t\t\t\t\t@tap=\"isGoldCar = '1'\">\r\n\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"isGoldCar === '1'\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text>是</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t<!-- 非金币车才填写泰拉和卡片 -->\r\n\t\t\t\t\t<view v-if=\"isGoldCar === '0'\">\r\n\r\n\t\t\t\t\t\t<!-- 花费泰拉 -->\r\n\t\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t\t<text class=\"label required\">花费泰拉</text>\r\n\t\t\t\t\t\t\t<view class=\"input-box input-with-unit\">\r\n\t\t\t\t\t\t\t\t<input v-model=\"teraCost\" type=\"number\" placeholder=\"请输入\" class=\"input\" />\r\n\t\t\t\t\t\t\t\t<text class=\"unit\">万</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 是否有卡片 -->\r\n\t\t\t\t\t\t<!-- 卡片/宝珠选择 -->\r\n\t\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t\t<text class=\"label required\">卡片/宝珠</text>\r\n\t\t\t\t\t\t\t<view class=\"circle-radio-group\">\r\n\t\t\t\t\t\t\t\t<view class=\"circle-radio-item\" :class=\"{ selected: hasCard === '0' }\"\r\n\t\t\t\t\t\t\t\t\t@tap=\"hasCard = '0'\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"hasCard === '0'\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text>无</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"circle-radio-item\" :class=\"{ selected: hasCard === '1' }\"\r\n\t\t\t\t\t\t\t\t\t@tap=\"hasCard = '1'\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"hasCard === '1'\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text>有</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 卡片拍卖价（仅当选择“有”时） -->\r\n\t\t\t\t\t\t<view v-if=\"hasCard === '1'\" class=\"form-group\">\r\n\t\t\t\t\t\t\t<text class=\"label required\">拍卖价</text>\r\n\t\t\t\t\t\t\t<view class=\"input-box input-with-unit\">\r\n\t\t\t\t\t\t\t\t<input v-model=\"cardPrice\" type=\"number\" placeholder=\"请输入\" class=\"input\" />\r\n\t\t\t\t\t\t\t\t<text class=\"unit\">万</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\r\n\r\n\t\t\t\t\t\t<!-- 动态计算展示 -->\r\n\t\t\t\t\t\t<view class=\"form-group\" style=\"flex-direction: column; align-items: flex-start;\">\r\n\t\t\t\t\t\t\t<text class=\"label\">结算参考</text>\r\n\t\t\t\t\t\t\t<view class=\"Profit\">\r\n\t\t\t\t\t\t\t\t<text>支出泰拉:{{ realTera }} 万 | </text>\r\n\t\t\t\t\t\t\t\t<text>收益:{{ cashProfit }} 元 | </text>\r\n\t\t\t\t\t\t\t\t<text>卡片分红:{{cardProfit}} </text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"sumProfit\">\r\n\t\t\t\t\t\t\t\t本次预估收益:{{sumProfit}}元\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\r\n\r\n\t\t\t\t<!-- 雷龙结算表单 -->\r\n\t\t\t\t<view v-if=\"roomData.room?.map_code === 'leilong'\">\r\n\t\t\t\t\t<view class=\"form-group\" style=\"flex-direction: column; align-items: flex-start;\">\r\n\t\t\t\t\t\t<view class=\"label required\">请选择通过阶段</view>\r\n\t\t\t\t\t\t<view class=\"circle-radio-group\" style=\"margin: 10rpx 0rpx;\">\r\n\t\t\t\t\t\t\t<view v-for=\"item in leilongStages\" :key=\"item.value\" class=\"circle-radio-item\"\r\n\t\t\t\t\t\t\t\t:class=\"{ selected: leilongStage === item.value }\" @tap=\"leilongStage = item.value\">\r\n\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"leilongStage === item.value\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text>{{ item.label }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\r\n\t\t\t\t\r\n\r\n\t\t\t\t<!-- 公共上传区域 -->\r\n\t\t\t\t<view v-if=\"!(roomData.room?.map_code === 'leilong' && leilongStage === 'disband')\" class=\"form-group\"\r\n\t\t\t\t\tstyle=\"flex-direction: column; align-items: flex-start;\">\r\n\t\t\t\t\t<text class=\"label required\" style=\"margin-bottom: 10rpx;\">上传结算截图</text>\r\n\t\t\t\t\t<fui-upload borderColor=\"#eee\" background=\"#fff\" radius=\"10\" immediate width=\"320\" height=\"200\"\r\n\t\t\t\t\t\t:url=\"uploadUrl\" :max=\"2\" ref=\"uploadRef\" @success=\"uploadSuccess\" @error=\"uploadError\" />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 提交按钮 -->\r\n\t\t\t\t<view class=\"popup-footer\">\r\n\t\t\t\t\t<view class=\"submit-btn\" @tap=\"doCompleteRoom\">确定完成</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</fui-bottom-popup>\r\n\t\t<!-- 顶部背景与状态栏 -->\r\n\t\t<view class=\"room-header\" :style=\"{ backgroundImage: `url(${roomData.room?.mode_image })` }\">\r\n\t\t\t<fui-nav-bar custom padding=\"12\" background=\"none\">\r\n\t\t\t\t<view class=\"fui-nav__left\">\r\n\t\t\t\t\t<TnIcon name=\"left\" size=\"35rpx\" color=\"#fff\" @tap=\"linkTo('/pages/index/index','tabbar')\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"room-top-info\">\r\n\t\t\t\t\t<image class=\"zone-icon\" src=\"https://dnf.hanyunkeji.cn/static/room/wechat2.png\"\r\n\t\t\t\t\t\tv-if=\"roomData.room?.channel === 'wechat'\" mode=\"aspectFill\" />\r\n\t\t\t\t\t<image class=\"zone-icon\" src=\"https://dnf.hanyunkeji.cn/static/home/qq.png\"\r\n\t\t\t\t\t\tv-if=\"roomData.room?.channel === 'QQ'\" mode=\"aspectFill\" />\r\n\t\t\t\t\t<text class=\"zone-tag\" v-if=\"roomData.room?.channel === 'wechat'\">微信区</text>\r\n\t\t\t\t\t<text class=\"zone-tag\" v-if=\"roomData.room?.channel === 'QQ'\">QQ区</text>\r\n\t\t\t\t\t<text class=\"zone-title\">{{roomData.room?.mode_title}} {{roomData.room?.id}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</fui-nav-bar>\r\n\r\n\t\t\t<!-- <view class=\"room-top-info\">\r\n\t\t\t\t<text class=\"zone-tag\">微信区 - 包车155</text>\r\n\t\t\t</view> -->\r\n\t\t\t<!-- <image class=\"room-bg\" src=\"https://dnf.hanyunkeji.cn/static/room/20.png\" mode=\"aspectFill\" /> -->\r\n\t\t\t<view class=\"room-overlay\">\r\n\t\t\t\t<view class=\"room-status\">\n\t\t\t\t  <!-- 先判断基础条件：仅当 channel==='wechat' 且 map_code 为 'terache' 或 'baoche' -->\n\t\t\t\t  <view \n\t\t\t\t    v-if=\"roomData.room?.channel === 'wechat' && ['terache','baoche'].includes(roomData.room?.map_code)\"\n\t\t\t\t  >\n\t\t\t\t    <!-- 如果 game_link_status 可能不是布尔，先做显式布尔化或严格比较 -->\n\t\t\t\t    <!-- 未匹配链接 -->\n\t\t\t\t    <view \n\t\t\t\t      class=\"room-tag\" \n\t\t\t\t      v-if=\"!roomData.room?.game_link_status\"\n\t\t\t\t\t @tap=\"handleContent(6)\"\n\t\t\t\t    >\n\t\t\t\t   \n\t\t\t\t\t  <image class=\"room-tag-icon\" src=\"https://dnf.hanyunkeji.cn/static/01.png\" mode=\"aspectFit\"></image>\n\t\t\t\t      <text class=\"room-tag-label\">暂未匹配游戏房间链接</text>\n\t\t\t\t    </view>\n\t\t\t\t    <!-- 已配置链接，用 else 或者 else-if -->\n\t\t\t\t    <view \n\t\t\t\t\t @tap=\"gameLinkShow =true\"\n\t\t\t\t      class=\"room-tag\" \n\t\t\t\t      v-else\n\t\t\t\t    >\n\t\t\t\t\t<image class=\"room-tag-icon\" src=\"https://dnf.hanyunkeji.cn/static/game1.png\" mode=\"aspectFit\"></image>\n\t\t\t\t      <text  class=\"room-tag-label\">游戏房间链接已经配置</text>\n\t\t\t\t    </view>\n\t\t\t\t  </view>\n\t\t\t\t\n\t\t\t\t  <!-- 其他 map_code 的标签保持不变 -->\n\t\t\t\t  <view class=\"room-tag\" v-if=\"roomData.room?.map_code === 'leilong'\">\n\t\t\t\t\t<image class=\"room-tag-icon\" src=\"https://dnf.hanyunkeji.cn/static/coin.png\" mode=\"aspectFit\"></image>\n\t\t\t\t    <text class=\"room-tag-label\">\n\t\t\t\t      13阶{{ roomData.room?.thirteen_stage_coin }}个币 | 斩杀{{ roomData.room?.finish_stage_coin }}个币\n\t\t\t\t    </text>\n\t\t\t\t  </view>\n\t\t\t\t  <view class=\"room-tag\" v-if=\"roomData.room?.map_code === 'normal' || roomData.room?.map_code === 'hard'\">\n\t\n\t\t\t\t\t<image class=\"room-tag-icon\" src=\"https://dnf.hanyunkeji.cn/static/coin.png\" mode=\"aspectFit\"></image>\n\t\t\t\t    <text class=\"room-tag-label\">1个 助战币</text>\n\t\t\t\t  </view>\n\t\t\t\t\n\t\t\t\t  <view class=\"room-time\" v-if=\"roomData && roomData.room?.status !== 'completed'\">\n\t\t\t\t    <text v-if=\"roomData.room?.status === 'waiting'\">等待中 {{ waitingTimeText }}</text>\n\t\t\t\t    <text v-else-if=\"roomData.room?.status === 'in_progress'\" style=\"color: green\">\n\t\t\t\t      进行中 {{ progressTimeText }}\n\t\t\t\t    </text>\n\t\t\t\t  </view>\n\t\t\t\t</view>\n\n\r\n\t\t\t</view>\r\n\t\t</view>\n\t\t<!-- <view >\n\t\t\t{{WebSocketStatus}}\n\t\t</view> -->\r\n\t\t<view class=\"room-cards\">\r\n\t\t\t<view class=\"role-card\" :class=\"pos.code\" v-for=\"(pos, index) in roomData.positions\" :key=\"pos.id\"\r\n\t\t\t\t@tap=\"onSelectPosition(pos)\" @longpress=\"onKickMember(pos)\">\r\n\t\t\t\t<view class=\"role-tag-box\">\r\n\t\t\t\t\t<view class=\"role-tag\" :class=\"getRoleColor(pos.code)\"> {{pos.title}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"role-info\" v-if=\"pos.user && pos.code != 'seller'\">\r\n\t\t\t\t\t<view class=\"role-meta\">\r\n\t\t\t\t\t\t<image class=\"role-avatar\" v-if=\"pos.user\" :src=\"pos.user['hero_avatar']\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t<text class=\"role-level\">{{ pos.user.resist_power }}</text>\r\n\t\t\t\t\t\t<text class=\"role-name\">{{ pos.user.hero_name }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tn-flex-1\">\r\n\r\n\t\t\t\t\t\t<image v-if=\"pos.user.status == 'escaped'\" class=\"icon-escaped\"\r\n\t\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/escaped.png\" />\r\n\t\t\t\t\t\t<text class=\"role-desc\">{{ pos.user.nickname }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"seller-layout\" v-if=\"pos.user && pos.code == 'seller'\">\r\n\t\t\t\t\t<view class=\"role-meta\">\r\n\t\t\t\t\t\t<image class=\"role-avatar\" v-if=\"pos.user\" :src=\"pos.user['hero_avatar']\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t{{roomData.room.tera_own}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tn-flex-1\">\r\n\t\t\t\t\t\t<view class=\"tera-ratio\">比例{{roomData.room.tera_ratio}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"role-info-empty\" :class=\"getRoleColor(pos.code)\" v-if=\"pos.code != 'lock' && !pos.user\">\r\n\t\t\t\t\t加入位置\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"role-info-empty\" v-if=\"pos.code == 'lock'\">\r\n\t\t\t\t\t位置锁定\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"room-chat\">\r\n\t\t\t<scroll-view class=\"room-chat\" scroll-y ref=\"scrollViewRef\"\r\n\t\t\t\tscroll-with-animation   :scroll-top=\"scrollTop\"    >\n\t\t\t\t<view class=\"chat-content\">\n\t\t\t\t\t<view class=\"team-tips\">\n\t\t\t\t\t\t<view\n\t\t\t\t\t\t  class=\"team-tips-item\"\n\t\t\t\t\t\t  v-for=\"(tips, index0) in roomData.room?.config_json?.tips\"\n\t\t\t\t\t\t  :key=\"index0\"\n\t\t\t\t\t\t  v-if=\"roomData.room?.config_json && roomData.room?.config_json.tips\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t  {{ tips }}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"chat-msg\" v-for=\"(msg, index) in msgList\" :key=\"index\" :id=\"'msg-' + index\">\n\t\t\t\t\t\t<view class=\"chat-header\">\n\t\t\t\t\t\t\t<TnAvatar size=\"60rpx\" :url=\"msg.hero_avatar\" />\n\t\t\t\t\t\t\t<view class=\"chat-meta\">\n\t\t\t\t\t\t\t\t<view class=\"chat-nickname\">\n\t\t\t\t\t\t\t\t\t<text class=\"chat-role\" :class=\"msg.role_code\">\n\t\t\t\t\t\t\t\t\t\t{{msg.role_title}}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t<text class=\"chat-tag\" :class=\"getRoleColor(msg.role_code)\">\n\t\t\t\t\t\t\t\t\t\t{{ msg.hero_nickname }}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<text class=\"chat-text\">{{ msg.content }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view id=\"bottom\" style=\"height:1px; width:100%;\"></view>\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 右侧功能按钮区域 -->\r\n\t\t<view class=\"room-actions\" v-if=\"roomData.room && isRoomOperator\">\r\n\r\n\t\t\t<!-- 等待中状态才能开始游戏 -->\r\n\t\t\t<view class=\"room-action start-btn\" v-if=\"roomData.room?.status === 'waiting'\" @tap=\"onStartGame()\">\r\n\t\t\t\t<text>开始</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 进行中状态可以上传结算图 -->\r\n\t\t\t<view class=\"room-action end-btn\" v-if=\"roomData.room?.status === 'in_progress'\" @tap=\"completeShow = true\">\r\n\t\t\t\t<text>完成</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 等待中可刷新 -->\r\n\t\t\t<view class=\"room-action refresh-btn\" v-if=\"roomData.room?.status === 'waiting'\" @tap=\"refresh()\">\r\n\t\t\t\t<text>刷新</text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 进行中可重置 -->\r\n\t\t\t<view class=\"room-action reset-btn\" v-if=\"roomData.room?.status === 'in_progress'\" @tap=\"onResetToWait()\">\r\n\t\t\t\t<view>重新</view>\r\n\t\t\t\t<view>等待</view>\r\n\t\t\t</view>\r\n\r\n\t\t</view>\r\n\r\n\t\t<!-- </view> -->\r\n\t\t<!-- 常用语和输入栏 -->\r\n\t\t<view class=\"room-footer\"\r\n\t\t\tv-if=\"roomData.room && roomData.room?.status != 'completed' && roomData.room?.status != 'disbanded' && roomData.room?.status != 'settling' \">\r\n\t\t\t<view class=\"input-layout\">\r\n\t\t\t\t<view class=\"chat-shortcuts\">\r\n\t\t\t\t\t<view class=\"shortcut\" @tap=\"checkMemberAccess(handlePhras)\">常用语</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"chat-input\">\r\n\t\t\t\t\t<input class=\"input\" ref=\"inputaRef\" confirm-type=\"send\" :disabled=\"!roomData.room?.is_member\"\r\n\t\t\t\t\t\t:placeholder=\"msgTime\" v-model=\"inputMsg\" @tap=\"() => checkMemberAccess()\" @focus=\"focusChange\"\r\n\t\t\t\t\t\t@blur=\"blurChange\" @confirm=\"sendChat()\" />\r\n\t\t\t\t\t<fui-icon @tap=\"() => checkMemberAccess(faceChange)\" :name=\"!faceShow?'face':'keyboard'\"></fui-icon>\r\n\r\n\t\t\t\t\t<image v-if=\"inputMsg\" @tap=\"checkMemberAccess(sendChat)\" class=\"icon-send\"\r\n\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/send.png\" />\r\n\t\t\t\t\t<image v-else @tap=\"checkMemberAccess(onLeaveRoom)\" class=\"icon-send\"\r\n\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/23.png\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"fui-scroll__box\" v-if=\"faceShow\">\r\n\t\t\t\t<scroll-view scroll-y class=\"fui-face__box\" :style=\"{opacity:faceShow?1:0}\">\r\n\t\t\t\t\t<view class=\"fui-face__inner\">\r\n\t\t\t\t\t\t<text class=\"fui-face__text fui--active\" v-for=\"(item,index) in faceList\" :key=\"index\"\r\n\t\t\t\t\t\t\t@click=\"faceClick(item)\">{{item}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<view class=\"fui-del__box\" @tap.stop=\"delMsg\">\r\n\t\t\t\t\t<fui-icon name=\"backspace\" :size=\"56\"></fui-icon>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<fui-safe-area background=\"none\"></fui-safe-area>\r\n\t\t</view>\r\n\t\t<view class=\"bottom-status\" v-if=\"roomData.room &&  roomData.room['status'] == 'disbanded'\">\r\n\t\t\t<image class=\"bottom-status-img\" src=\"https://dnf.hanyunkeji.cn/static/room/200.png\" mode=\"aspectFit\">\r\n\t\t\t</image>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"room-summary\"\r\n\t\t\tv-if=\"roomData.room  &&   roomData.room['status'] == 'completed' || roomData.room['status'] == 'settling' \">\r\n\t\t\t<view class=\"summary-left\">\r\n\t\t\t\t<view class=\"summary-item\">\r\n\t\t\t\t\t<text class=\"summary-label\">结算图:</text>\r\n\t\t\t\t\t<view class=\"images\">\r\n\t\t\t\t\t\t<image @tap=\"previewImage(img)\" v-for=\"(img, idx) in roomData.room.settlement_images\" :key=\"idx\"\r\n\t\t\t\t\t\t\t:src=\"img\" class=\"settle-img\" mode=\"aspectFill\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"summary-item\">\r\n\t\t\t\t\t<text class=\"summary-label\">组队时间:</text>\r\n\t\t\t\t\t<text class=\"value\">{{ roomData.room.start_time }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"summary-item\">\r\n\t\t\t\t\t<text class=\"summary-label\">累计用时:</text>\r\n\t\t\t\t\t<text class=\"value\">{{ roomData.room.teamup_time }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 右下角印章和客服 -->\r\n\t\t\t<view class=\"summary-right\">\r\n\t\t\t\t<image v-if=\"roomData.room && roomData.room['status'] == 'completed'\"\r\n\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/300.png\" class=\"stamp\" />\r\n\t\t\t\t<image v-if=\"roomData.room && roomData.room['status'] == 'settling'\"\r\n\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/400.png\" class=\"stamp\" />\r\n\t\t\t\t<image v-if=\"roomData.room && roomData.room['status'] == 'settled'\"\r\n\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/success_3.png\" class=\"stamp\" />\r\n\t\t\t\t<view class=\"actions\" v-if=\"roomData.room?.is_member\">\r\n\t\t\t\t\t<view class=\"btn-outline\"\r\n\t\t\t\t\t\tv-if=\"roomData.room?.joined_role_code == 'leader' || roomData.room?.joined_role_code == 'baoche'\">\r\n\t\t\t\t\t\t<text v-if=\"roomData.room?.complaint_status.can_complain\"\r\n\t\t\t\t\t\t\t@tap=\"linkTo(`/pages/complaint/send?room_id=${roomData.room?.id}`)\">发起申诉</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t@tap=\"linkTo(`/pages/complaint/complaint?complaint_id=${roomData.room?.complaint_status.complaint_id}`)\"\r\n\t\t\t\t\t\t\tv-if=\"roomData.room?.complaint_status.complaint_status == 'pending' || roomData.room?.complaint_status.complaint_status == 'processing'\">申诉中</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t@tap=\"linkTo(`/pages/complaint/complaint?complaint_id=${roomData.room?.complaint_status.complaint_id}`)\"\r\n\t\t\t\t\t\t\tv-if=\"roomData.room?.complaint_status.complaint_status == 'resolved' || roomData.room?.complaint_status.complaint_status == 'cancelled'\">申诉完成</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"btn-outline btn-default\" v-if=\"roomData.room?.is_terache && roomData.room['status'] == 'settling'\">\r\n\t\t\t\t\t\t<text @tap=\"linkTo(`/pages/complaint/index?room_id=${roomData.room?.id}`)\">查看结算单</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"btn-outline btn-default\"\r\n\t\t\t\t\t\tv-if=\"roomData.room?.is_terache && roomData.room['status'] == 'completed'\">\r\n\t\t\t\t\t\t<text @tap=\"linkTo(`/pages/complaint/index?room_id=${roomData.room?.id}`)\">结算完成</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"btn-primary\">联系客服</view> -->\n\t\t\t\t\t<button class=\"btn-default btn-primary\" open-type=\"contact\" >联系客服</button>\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport uniCopy from '@/js_sdk/xb-copy/uni-copy.js'\r\n\timport TnModal from '@/uni_modules/tuniaoui-vue3/components/modal/src/modal.vue'\r\n\timport TnIcon from '@/uni_modules/tuniaoui-vue3/components/icon/src/icon.vue'\r\n\timport fuiUpload from \"@/components/fui-upload.vue\"\r\n\timport {\r\n\t\tref,\r\n\t\tdefineProps,\r\n\t\tcomputed,\r\n\t\twatch,\r\n\t\tonMounted,\r\n\t\tonUnmounted,\r\n\t\tnextTick\r\n\r\n\t} from 'vue'\r\n\timport {\r\n\t\tonShow,\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app';\r\n\timport {\r\n\t\tbaseUrl\r\n\t} from \"@/util/env\";\r\n\timport ws from '@/util/ws.js'\r\n\timport faceList from './emoji.js'\r\n\timport Recharge from \"@/components/recharge.vue\";\r\n\timport fuiBottomPopup from \"@/components/fui-bottom-popup.vue\"\r\n\timport TnAvatar from '@/uni_modules/tuniaoui-vue3/components/avatar/src/avatar.vue'\r\n\timport fuiSafeArea from \"@/components/fui-safe-area.vue\"\r\n\timport fuiNavBar from \"@/components/fui-nav-bar.vue\"\r\n\timport fuiDialog from \"@/components/fui-dialog.vue\"\n\timport TnPopup from '@/uni_modules/tuniaoui-vue3/components/popup/src/popup.vue';\n\timport Parse from \"@/components/parse.vue\"\r\n\tconst uploadRef = ref(null)\r\n\tconst uploadUrl = baseUrl + '/common/upload'\r\n\tconst uploadStatus = ref(false);\r\n\tconst settlementImage = ref([]); // 游戏结算图\r\n\tconst dialogShow = ref(false);\r\n\tconst completeShow = ref(false);\r\n\tconst title = ref(null)\r\n\tconst content = ref(null)\r\n\tconst confirmText = ref(null)\r\n\tconst roomData = ref({})\r\n\tconst onConfirm = ref(null) // 动态绑定的回调函数\r\n\tconst selectedHeroId = ref(null)\r\n\tconst msgTime = ref(\"该房间最新消息，2小时前\")\r\n\tconst inputMsg = ref('');\r\n\tconst room_id = ref(null)\r\n\tconst msgList = ref([])\r\n\tconst phrasShow = ref(false)\r\n\tconst isGoldCar = ref('0')\r\n\tconst teraCost = ref('')\r\n\tconst hasCard = ref('0')\r\n\tconst cardPrice = ref('')\r\n\tconst gameLinkInput = ref(null)\r\n\tconst rechargeShow = ref(false)\r\n\tconst orderInfo = ref({})\n\tconst WebSocketStatus = ref(true)\r\n\r\n\tconst teraRatio = computed(() => {\r\n\t\t// return parseFloat(4500)\r\n\t\treturn parseFloat(roomData.value.room?.tera_ratio || 5000)\r\n\t})\n\tconst scrollTop = ref(0);\n\tconst contentId = ref(null)\n\tconst contentShow = ref(false)\n\tconst handleContent = (id) => {\n\t\t\tcontentId.value = id;\n\t\t\tcontentShow.value = true;\n\t\t}\r\n\r\n\r\n\t// 计算卖家自己分得（六人平分）\r\n\tconst sellerTera = computed(() => {\r\n\t\tconst cost = parseFloat(teraCost.value || 0)\r\n\t\treturn cost > 0 ? (cost * 0.95 / 6).toFixed(2) : '0.00'\r\n\t})\r\n\r\n\t// 实际支出泰拉\r\n\tconst realTera = computed(() => {\r\n\t\tconst cost = parseFloat(teraCost.value || 0)\r\n\t\tconst self = parseFloat(sellerTera.value || 0)\r\n\t\tconst cardcost = parseFloat(cardPrice.value || 0)\r\n\t\tconst result = cost * 0.95 - self - (cardcost * 0.9)\r\n\t\treturn result > 0 ? result.toFixed(2) : '0.00'\r\n\t})\r\n\r\n\t// 预计收益（元）\r\n\tconst cashProfit = computed(() => {\r\n\t\tconst tera = parseFloat(realTera.value || 0)\r\n\t\tconst ratio = teraRatio.value\r\n\t\treturn tera > 0 ? ((tera * 10000) / ratio).toFixed(2) : '0.00'\r\n\t})\r\n\r\n\tconst cardProfit = computed(() => {\r\n\t\tconst cost = parseFloat(teraCost.value || 0)\r\n\t\tconst cardcost = parseFloat(cardPrice.value || 0)\r\n\t\treturn ((cost * 0.95 / 6 * 2 * 5 - (cost * 0.95 - cost * 0.95 / 6 - cardcost * 0.9) * 2) * 0.2).toFixed(2)\r\n\r\n\t})\r\n\r\n\tconst sumProfit = computed(() => {\r\n\t\tconst result = parseFloat(cashProfit.value) + parseFloat(cardProfit.value);\r\n\t\treturn result.toFixed(2)\r\n\r\n\t})\r\n\r\n\tconst leilongStages = ref([{\r\n\t\t\tlabel: '解散房间',\r\n\t\t\tvalue: 'disband'\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: '13阶段',\r\n\t\t\tvalue: 'stage13'\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: '斩杀',\r\n\t\t\tvalue: 'kill'\r\n\t\t}\r\n\t])\r\n\r\n\tconst leilongStage = ref('kill')\n\tconst gameLinkShow = ref(false)\n\tconst gameLink = ref(null)\r\n\r\n\r\n\tonShow(() => {\r\n\t\tgetRoomData()\r\n\t})\r\n\tonLoad((params) => {\r\n\t\tif (params.share_uid) {\r\n\t\t\tuni.setStorageSync('share_uid', params.share_uid)\r\n\t\t\tconsole.log(\"换成分享uid\" + params.share_uid);\r\n\t\t}\r\n\r\n\t\tif (params.room_id) {\r\n\t\t\troom_id.value = params.room_id;\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"房间不存在\",\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\n\t\t\n\t\t\n\t\t\n\t\t\r\n\t})\r\n\r\n\tconst waitingTimeText = ref('')\r\n\tconst progressTimeText = ref('')\r\n\tlet timer = null\r\n\r\n\t// room 为接口返回的 room 数据\r\n\tconst startTime = ref(0)\r\n\tconst status = ref('')\r\n\tconst now = ref(Date.now())\r\n\r\n\tconst formatTime = (seconds) => {\r\n\t\tconst h = String(Math.floor(seconds / 3600)).padStart(2, '0')\r\n\t\tconst m = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0')\r\n\t\tconst s = String(seconds % 60).padStart(2, '0')\r\n\t\treturn `${h}:${m}:${s}`\r\n\t}\r\n\r\n\r\n\tconst updateTimer = () => {\r\n\t\tconst current = Math.floor(Date.now() / 1000)\r\n\t\tconst start = Number(startTime.value || 0)\r\n\t\tconst seconds = Math.max(0, current - start)\r\n\r\n\t\tif (status.value === 'waiting') {\r\n\t\t\twaitingTimeText.value = formatTime(seconds)\r\n\t\t} else if (status.value === 'in_progress') {\r\n\t\t\tprogressTimeText.value = formatTime(seconds)\r\n\t\t}\r\n\t}\r\n\r\n\tconst initCounter = (room) => {\r\n\t\tconsole.log(room)\r\n\t\tstatus.value = room.status\r\n\t\tif (status.value === 'waiting') {\r\n\t\t\tstartTime.value = Number(room.waiting_start_at)\r\n\t\t} else if (status.value === 'in_progress') {\r\n\t\t\tstartTime.value = Number(room.progress_start_at)\r\n\t\t}\r\n\r\n\t\tupdateTimer()\r\n\t\tclearInterval(timer)\r\n\t\tif (status.value === 'waiting' || status.value === 'in_progress') {\r\n\t\t\ttimer = setInterval(updateTimer, 1000)\r\n\t\t}\r\n\t}\r\n\r\n\tonUnmounted(() => {\r\n\t\tclearInterval(timer)\r\n\t})\r\n\r\n\tconst handlePhras = () => {\r\n\t\tconsole.log(\"执行我\");\r\n\t\tphrasShow.value = true;\r\n\t\tif (faceShow.value) {\r\n\t\t\tfaceShow.value = false;\r\n\t\t}\r\n\t}\r\n\r\n\t// 跳转申诉页面\r\n\tconst complaintLink = () => {\r\n\t\tlinkTo(`/pages/complaint/send?room_id=${roomData.value.room?.id}`)\r\n\t}\r\n\r\n\tconst onClick = (e) => {\r\n\t\tconsole.log('点击事件触发了，type：', e)\r\n\t\tif (e.index === 1 && typeof onConfirm.value === 'function') {\r\n\t\t\tconsole.log(\"点击确定\");\r\n\t\t\tonConfirm.value() // 只在点击确认按钮时执行\r\n\t\t}\r\n\t\tdialogShow.value = false\r\n\t}\r\n\tconst onClose = () => {\r\n\t\tdialogShow.value = false\r\n\t\tconsole.log(\"关闭点击\");\r\n\t}\r\n\r\n\tconst refresh = async () => {\r\n\r\n\t\tawait getChatList()\r\n\t\tawait getRoomData()\r\n\r\n\t\tuni.showToast({\r\n\t\t\ttitle: \"刷新成功\",\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tconst onStartGame = () => {\r\n\t\tconst positions = roomData.value.positions || []\r\n\t\tconst room = roomData.value.room || {}\r\n\r\n\t\t// 统计当前已加入的成员数（user 存在）\r\n\t\tconst joinedMembers = positions.filter(pos => pos.user).length\r\n\r\n\t\t// //判断泰拉车是否满员\r\n\t\t// if (room.is_terache && joinedMembers < 6) {\r\n\t\t// \tuni.showToast({\r\n\t\t// \t\ttitle: '泰拉车需满 6 人才能开始游戏',\r\n\t\t// \t\ticon: 'none'\r\n\t\t// \t})\r\n\t\t// \treturn\r\n\t\t// }\r\n\r\n\t\t// 普通副本至少 2 人才能开始\r\n\t\tif (!room.is_terache && joinedMembers <= 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '至少需要两名成员才能开始游戏',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\ttitle.value = \"确认开始游戏\"\r\n\t\tcontent.value = \"确定开始游戏吗？请确认房间人员准备完成\"\r\n\t\tconfirmText.value = \"确认开始\"\r\n\t\tdialogShow.value = true\r\n\r\n\t\tonConfirm.value = doStartGame\r\n\t}\r\n\r\n\tconst toView = ref('');\r\n\tconst openEmojiPanel = () => {\r\n\t\tconsole.log(\"表情\");\r\n\t}\r\n\r\n\tconst linkTo = (path, type = '') => {\r\n\t\tif (type == 'tabbar') {\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: path\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: path\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// const isRoomOperator = computed(() => {\r\n\t// \tconst room = roomData.value?.room\r\n\t// \tif (!room) {\r\n\t// \t\tconsole.log(\"不存在信息\");\r\n\t// \t\treturn false;\r\n\t// \t}\r\n\t// \tif (room.is_terache) {\r\n\t// \t\treturn room.joined_role_code === 'seller'\r\n\t// \t} else {\r\n\t// \t\treturn room.joined_role_code === 'dps'\r\n\t// \t}\r\n\t// })\n\t\n\t\n\tconst isRoomOperator = computed(() => {\n\t\tconst positions = roomData.value.positions || []\n\t\tconst room = roomData.value.room || {}\n\t\tif (!room || !positions.length) return false\n\t\n\t\t// 泰拉车：只有卖家能结算\n\t\tif (room.is_terache) {\n\t\t\treturn room.joined_role_code === 'seller'\n\t\t}\n\t\n\t\t// 包车房\n\t\tif (room.map_code === 'baoche') {\n\t\t\tconsole.log('positions:', positions);\n\t\t\tconsole.log(\"佐贺偶像\");\n\t\t\tconst hasDps = positions.some(pos => pos.code === 'dps')\n\t\t\t\n\t\t\tif (hasDps) {\n\t\t\t\treturn room.joined_role_code === 'dps'\n\t\t\t} else {\n\t\t\t\treturn room.joined_role_code === 'baoche'\n\t\t\t}\n\t\t}\n\t\n\t\t// 雷龙\n\t\tif (room.map_code === 'leilong') {\n\t\t\treturn room.joined_role_code === 'dps'\n\t\t}\n\t\n\t\t// 其它（普通副本）\n\t\treturn room.joined_role_code === 'dps'\n\t})\n\r\n\r\n\r\n\r\n\r\n\tconst onKickMember = (pos) => {\r\n\t\tconst room = roomData.value.room\r\n\t\tconst currentUserId = room?.user_id\r\n\r\n\t\t// console.log(currentUserId);\r\n\t\tconsole.log(pos);\r\n\r\n\t\t// 非房主不能操作\r\n\t\tif (!room?.is_owner) return\r\n\r\n\t\t// 空位或锁定位不能操作\r\n\t\tif (!pos.user || pos.code === 'lock') return\r\n\r\n\t\t// 不能踢自己（静默 return，无提示）\r\n\t\tif (pos.user.user_id === currentUserId) return\r\n\r\n\t\t// 确认弹窗\r\n\t\ttitle.value = \"踢出成员\"\r\n\t\tcontent.value = `确定将【${pos.user.nickname}】踢出房间吗？`\r\n\t\tconfirmText.value = \"确认踢出\"\r\n\t\tdialogShow.value = true\r\n\r\n\t\tonConfirm.value = () => doKickMember(pos.id)\r\n\t}\r\n\r\n\r\n\r\n\tconst doKickMember = async (memberId) => {\r\n\t\tconst res = await uni.$http.post('/dungeon/kick', {\r\n\t\t\troom_id: roomData.value.room.id,\r\n\t\t\tmember_id: memberId\r\n\t\t})\r\n\t\tif (res.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '已踢出',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\tgetRoomData()\r\n\t\t\t// 建议广播 WebSocket 通知更新房间\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tconst sendChat = async () => {\r\n\t\tif (!inputMsg.value.trim()) {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '请输入内容',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t\tws.send({\r\n\t\t\ttype: 'chat',\r\n\t\t\troom_id: `room_${roomData.value.room.id}`,\r\n\t\t\tcontent: inputMsg.value\r\n\t\t})\r\n\r\n\t\t// const res = await uni.$http.post('/dungeon/sendChat', {\r\n\t\t// \troom_id: room_id.value,\r\n\t\t// \tcontent: inputMsg.value\r\n\t\t// })\r\n\t\tif (faceShow.value) {\r\n\t\t\tfaceShow.value = false;\r\n\t\t}\r\n\t\tinputMsg.value = '';\r\n\t\t// console.log('接口信息:', res)\r\n\r\n\t\t// if (res.code === 1) {\r\n\t\t// \tif(faceShow.value){\r\n\t\t// \t\tfaceShow.value = false;\r\n\t\t// \t}\r\n\t\t// \tinputMsg.value = '';\r\n\t\t// \tgetChatList()\r\n\r\n\t\t// \tuni.showToast({\r\n\t\t// \t\ttitle: res.msg,\r\n\t\t// \t\ticon: 'none'\r\n\t\t// \t})\r\n\r\n\t\t// }\r\n\t}\r\n\r\n\tconst phrasSend = async (value) => {\r\n\t\t// const res = await uni.$http.post('/dungeon/sendChat', {\r\n\t\t// \troom_id: room_id.value,\r\n\t\t// \tcontent: value\r\n\t\t// })\r\n\r\n\t\tws.send({\r\n\t\t\ttype: 'chat',\r\n\t\t\troom_id: `room_${roomData.value.room.id}`,\r\n\t\t\tcontent: value\r\n\t\t})\r\n\t\tphrasShow.value = false;\r\n\r\n\r\n\t\t// if (res.code === 1) {\r\n\t\t// \tphrasShow.value = false;\r\n\t\t// \t// getChatList()\r\n\t\t// \tuni.showToast({\r\n\t\t// \t\ttitle: res.msg,\r\n\t\t// \t\ticon: 'none'\r\n\t\t// \t})\r\n\r\n\t\t// }\r\n\t}\r\n\r\n\tconst getChatList = async () => {\r\n\r\n\t\tconst res = await uni.$http.post('/dungeon/chatList', {\r\n\t\t\troom_id: room_id.value,\r\n\t\t\tlast_id: null\r\n\t\t})\r\n\t\tconsole.log('接口信息:', res)\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\tmsgList.value = res.data.list;\r\n\t\t\tnextTick(() => {\n\t\t\t    scrollToBottom();\n\t\t\t  });\r\n\t\t}\r\n\t}\r\n\r\n\tconst commonPhrases = ref([]);\r\n\tconst getCommonPhrases = async () => {\r\n\t\tconst res = await uni.$http.post('/room/getCommonPhrases', {})\r\n\t\tconsole.log('接口信息:', res)\r\n\t\tif (res.code === 1) {\r\n\t\t\tcommonPhrases.value = res.data;\r\n\t\t}\r\n\t}\n\t\n\t\n\tconst updateGameUrl = async () => {\n\t\tif(gameLinkInput.value == ''){\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请填写游戏组队链接',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn false;\n\t\t}\n\t\tconst res = await uni.$http.post('/dungeon/updateGameUrl', {\n\t\t\troom_id: room_id.value,\n\t\t\tgame_url:gameLinkInput.value\n\t\t})\n\t\tif (res.code === 1) {\n\t\t\tgameLinkShow.value = false;\n\t\t}\n\t}\r\n\r\n\r\n\tconst getRoomData = async () => {\r\n\t\tconst res = await uni.$http.post('/dungeon/info', {\r\n\t\t\troom_id: room_id.value\r\n\t\t})\r\n\t\tconsole.log('接口信息:', res)\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\troomData.value = res.data;\r\n\t\t\tonCheckRoom()\r\n\t\t\tinitCounter(res.data.room)\n\t\t\tgameLinkInput.value = roomData.value.room?.game_link;\r\n\t\t\t// modeMapTree.value = res.data\r\n\t\t}\r\n\t}\r\n\r\n\tconst onSelectPosition = async (pos) => {\r\n\r\n\t\tif (pos.code == 'lock') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (pos.user) {\r\n\t\t\tcopy(pos.user.nickname)\r\n\t\t\t// uni.showToast({ title: '该位置已被占用', icon: 'none' })\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (roomData.value.room.is_member) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst res = await uni.$http.post('/dungeon/join', {\r\n\t\t\tpayload: {\r\n\t\t\t\troom_id: roomData.value.room.id,\r\n\t\t\t\tmember_id: pos.id,\r\n\t\t\t\tuser_hero_id: selectedHeroId.value // 当前用户选择的英雄 ID\r\n\t\t\t}\r\n\t\t})\r\n\r\n\r\n\t\tif (res.code == 100) {\r\n\t\t\trechargeShow.value = true;\r\n\t\t\torderInfo.value = res.data;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加入成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\r\n\t\t\tws.send({\r\n\t\t\t\ttype: 'join',\r\n\t\t\t\troom_code: `room_${roomData.value.room.id}`\r\n\t\t\t})\r\n\t\t\tgetRoomData() // 重新刷新\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tconst previewImage = (e) => {\r\n\t\tuni.previewImage({\r\n\t\t\turls: [e], // 需要预览的图片http链接列表\r\n\t\t\tcurrent: '', // 当前显示图片的http链接，默认是第一个\r\n\t\t\tsuccess: function(res) {},\r\n\t\t\tfail: function(res) {},\r\n\t\t\tcomplete: function(res) {},\r\n\t\t})\r\n\t}\r\n\tconst onLeaveRoom = () => {\r\n\t\tconst room = roomData.value.room\r\n\t\tif (room.status === 'completed') {\r\n\t\t\t// 提示不能退出\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '游戏已经完成无须退出',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn false;\r\n\t\t} else if (room.is_owner && room.status === 'waiting') {\r\n\t\t\t// 提示解散房间确认\r\n\t\t\ttitle.value = \"解散房间\";\r\n\t\t\tcontent.value = \"你作为房主 退出将会解散房间\";\r\n\t\t\tconfirmText.value = \"确定解散\";\r\n\t\t} else if (room.is_owner && room.status === 'in_progress') {\r\n\t\t\t// 提示游戏中退出会解散，不结算\r\n\t\t\ttitle.value = \"解散房间\";\r\n\t\t\tcontent.value = \"游戏进行中，退出将会无法结算\";\r\n\t\t\tconfirmText.value = \"确认解散\";\r\n\t\t} else {\r\n\t\t\t// 普通成员退出提示\r\n\t\t\ttitle.value = \"退出房间\";\r\n\t\t\tcontent.value = \"退出房间将无法发言\";\r\n\t\t\tconfirmText.value = \"确认退出\";\r\n\t\t}\r\n\r\n\t\tonConfirm.value = confirmLeaveRoom\r\n\t\tdialogShow.value = true\r\n\t}\r\n\r\n\t// 开始游戏\r\n\tconst doStartGame = async () => {\r\n\t\tconst res = await uni.$http.post('/dungeon/start', {\r\n\t\t\troom_id: roomData.value.room.id\r\n\t\t})\r\n\t\tif (res.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '游戏已开始',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t\t// getRoomData()\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg || '开始失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t// 重新等待执行\r\n\tconst doResetToWait = async () => {\r\n\t\tconst result = await uni.$http.post('/dungeon/resetWait', {\r\n\t\t\troom_id: roomData.value.room.id\r\n\t\t})\r\n\t\tif (result.code === 1) {\r\n\t\t\t// getRoomData()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: result.msg || '失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t//重新等待\r\n\tconst onResetToWait = async () => {\r\n\t\ttitle.value = \"提示\";\r\n\t\tcontent.value = \"将房间变为等候中，和长按踢人，重新组人\";\r\n\t\tconfirmText.value = \"确认变更\";\r\n\t\tdialogShow.value = true;\r\n\t\t// 绑定弹窗确认的操作\r\n\t\tonConfirm.value = doResetToWait\r\n\t}\r\n\r\n\tconst doCompleteRoom = async () => {\r\n\r\n\t\tif (settlementImage.value == \"\" && leilongStage.value != 'disband') {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"请上传结算截图\",\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn false;\r\n\t\t}\n\t\tlet SettlementUrl = '/dungeon/completeRoom';\n\t\tif(roomData.value.room.map_code == 'normal' || roomData.value.room.map_code == 'hard'){\n\t\t\t SettlementUrl = '/dungeon/completeRoom';\n\t\t}\n\t\tif(roomData.value.room.map_code == 'terache'){\n\t\t\t SettlementUrl = '/dungeon/submitSettlement';\n\t\t}\n\t\t\n\t\tif(roomData.value.room.map_code == 'leilong'){\n\t\t\t SettlementUrl = '/dungeon/completeLeilongRoom';\n\t\t}\n\t\tif(roomData.value.room.map_code == 'baoche'){\n\t\t\t SettlementUrl = '/dungeon/completeBaocheRoom';\n\t\t}\n\t\t\n\t\r\n\r\n\t\t\r\n\t\tconst imagesList = settlementImage.value.join(',')\r\n\t\tconst res = await uni.$http.post(SettlementUrl, {\r\n\t\t\troom_id: roomData.value.room.id,\r\n\t\t\timage_url: imagesList,\n\t\t\tstage:leilongStage.value,\r\n\t\t\ttera_cost: parseFloat(teraCost.value || 0), // 花费泰拉（单位：万）← 用户填的\r\n\t\t\tis_gold_car: isGoldCar.value, // 是否金币车（0/1）← 用户选择\r\n\t\t\thas_card: hasCard.value, // 是否有卡片（0/1）← 用户勾选\r\n\t\t\tcard_price: hasCard.value ? parseFloat(cardPrice.value || 0) : 0 // 卡片拍卖价（单位：万）\r\n\t\t})\r\n\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg || '',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\tcompleteShow.value = false;\r\n\t\t\t// 可刷新房间状态或跳转\r\n\t\t\t// getRoomData()\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg || '开始失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tconst onCheckRoom = async () => {\r\n\r\n\r\n\t\tif (roomData.value.room.status == 'completed' && !roomData.value.room.is_member) {\r\n\t\t\ttitle.value = \"提示\";\r\n\t\t\tcontent.value = \"该房间已经完成\";\r\n\t\t\tconfirmText.value = \"更多房间\";\r\n\t\t\tdialogShow.value = true;\r\n\t\t\t// 绑定弹窗确认的操作\r\n\t\t\tonConfirm.value = toHome\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst positions = roomData.value.positions || []\r\n\t\t// 统计当前已加入的成员数\r\n\t\tconst joinedMembers = positions.filter(pos => pos.user).length;\r\n\t\tif (positions.length == joinedMembers && !roomData.value.room.is_member) {\r\n\t\t\ttitle.value = \"提示\";\r\n\t\t\tcontent.value = \"该房间已满员\";\r\n\t\t\tconfirmText.value = \"更多房间\";\r\n\t\t\tdialogShow.value = true;\r\n\t\t\t// 绑定弹窗确认的操作\r\n\t\t\tonConfirm.value = toHome\r\n\t\t}\n\t\t\n\t\n\t\t\n\t\t\n\t\t\r\n\r\n\t}\r\n\tconst toHome = () => {\r\n\t\tuni.switchTab({\r\n\t\t\turl: \"/pages/index/index\"\r\n\t\t})\r\n\t}\r\n\tconst checkMemberAccess = (callback) => {\r\n\t\tconsole.log(roomData.value.room);\r\n\t\tif (!roomData.value.room?.is_member) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先加入房间',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// 已加入房间时执行回调\r\n\t\tcallback && callback()\r\n\t}\r\n\r\n\tconst getRoleColor = (code) => {\r\n\t\tif (code === 'leader') return 'blue'\r\n\t\tif (code === 'dps') return 'red'\r\n\t\tif (code === 'support') return 'green'\r\n\t\tif (code === 'leech') return 'green'\r\n\t\tif (code === 'baoche') return code\r\n\t\tif (code === 'team') return code\r\n\t\tif (code === 'deck') return code\r\n\t\tif (code === 'lock') return code\r\n\t\tif (code === 'seller') return code\r\n\t\treturn ''\r\n\t}\r\n\r\n\tconst getRoleIcon = (code) => {\r\n\t\tconst map = {\r\n\t\t\tleader: 'https://dnf.hanyunkeji.cn/static/room/09.png',\r\n\t\t\tdps: 'https://dnf.hanyunkeji.cn/static/room/10.png',\r\n\t\t\tsupport: 'https://dnf.hanyunkeji.cn/static/room/11.png'\r\n\t\t}\r\n\t\treturn map[code] || ''\r\n\t}\r\n\t// 退出房间确认\r\n\tconst confirmLeaveRoom = async () => {\r\n\t\tconst result = await uni.$http.post('/dungeon/leave', {\r\n\t\t\troom_id: roomData.value.room.id\r\n\t\t})\r\n\t\tif (result.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: result.msg || '退出失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\t// getRoomData()\r\n\t\t\treturn true;\r\n\t\t\t// 可以返回房间列表或首页\r\n\t\t\t// uni.navigateBack()\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: result.msg || '退出失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tconst copy = (val) => {\r\n\t\tuniCopy({\r\n\t\t\tcontent: val,\n\t\t\ttitle:\"角色名字已复制~\",\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\terror: (e) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: e,\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 3000,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tconst uploadSuccess = (e) => {\r\n\t\tconsole.log(e)\r\n\t\t//上传成功回调，处理服务器返回数据【此处根据实际返回数据进行处理】\r\n\t\tlet res = JSON.parse(e.res.data.replace(/\\ufeff/g, \"\") || \"{}\")\r\n\t\tuploadStatus.value = e.status\r\n\t\tif (res.data.url) {\r\n\t\t\tsettlementImage.value.push(res.data.url);\r\n\t\t\t//处理结果返回给组件 \r\n\t\t\t//data.url为上传成功后返回的图片地址\r\n\t\t\t//e.index为图片索引值\r\n\t\t\t// this.$refs.upload.result(res.data.url, e.index)\r\n\t\t}\r\n\t}\n\t\n\t// const audio = uni.createInnerAudioContext()\n\t// audio.src = `/static/sounds/start.mp3`\n\t// audio.play()\r\n\r\n\tconst uploadError = (e) => {\r\n\t\tuploadStatus.value = e.status\r\n\t\tuni.showModal({\r\n\t\t\tcontent: JSON.stringify(e)\r\n\t\t})\r\n\t}\n\t\n\tconst pasteText = () => {\n\t    uni.getClipboardData({\n\t        success: (res) => {\n\t            // 粘贴的内容\n\t            gameLinkInput.value = res.data;\n\t            uni.showToast({\n\t                title: '粘贴成功',\n\t                icon: 'none',\n\t                duration: 1000\n\t            });\n\t        },\n\t        fail: () => {\n\t            uni.showToast({\n\t                title: '粘贴失败，请重试',\n\t                icon: 'none',\n\t                duration: 1000\n\t            });\n\t        }\n\t    });\n\t}\n\r\n\r\n\tconst focus = ref(false)\r\n\tconst faceShow = ref(false)\r\n\tconst inputaRef = ref(null)\r\n\tconst focusChange = () => {\r\n\t\tfocus.value = true;\r\n\t}\r\n\tconst blurChange = () => {\r\n\t\tfocus.value = false\r\n\t}\r\n\tconst faceChange = () => {\r\n\t\tfaceShow.value = !faceShow.value;\r\n\t\tuni.hideKeyboard()\r\n\t\t// // #ifdef APP-NVUE\r\n\t\tinputaRef.value.blur()\r\n\t\t// // #endif\r\n\t}\r\n\tconst faceClick = (item) => {\r\n\t\tconsole.log(item);\r\n\t\tif (!faceShow.value) return;\r\n\t\tinputMsg.value += item;\r\n\t}\r\n\r\n\tconst delMsg = () => {\r\n\t\tif (!inputMsg.value) return;\r\n\t\tlet number = 1;\r\n\t\tif (inputMsg.value.length > 1) {\r\n\t\t\tnumber = inputMsg.value.substr(inputMsg.value.length - 2, inputMsg.value.length).search(\r\n\t\t\t\t/(\\ud83c[\\udf00-\\udfff])|(\\ud83d[\\udc00-\\ude4f])|(\\ud83d[\\ude80-\\udeff])/i) == -1 ? 1 : 2;\r\n\t\t}\r\n\t\tinputMsg.value = inputMsg.value.substr(0, inputMsg.value.length - number);\r\n\t}\r\n\r\n\r\n\tconst scrollViewRef = ref(null)\r\n\r\n\tconst scrollToBottom = () => {\r\n\t\tuni.createSelectorQuery()\n\t\t    .select('.chat-content')\n\t\t    .boundingClientRect(rect => {\n\t\t      if (rect && rect.height != null) {\n\t\t        // rect.height 是内容高度（px）\n\t\t        // 直接设置 scrollTop = 高度 值，能够滚到底\n\t\t        scrollTop.value = rect.height;\n\t\t      }\n\t\t    })\n\t\t    .exec();\r\n\t}\r\n\r\n\r\n\tconst scrollTo = ref('')\r\n\r\n\twatch(\r\n\t\t() => msgList.value.length,\r\n\t\t(len) => {\r\n\t\t\tif (len > 0) {\r\n\t\t\t\tscrollTo.value = 'msg-' + (len - 1)\r\n\t\t\t}\r\n\t\t}\r\n\t)\n\t\n\t\n\tlet innerAudioContext = null;\n\t\n\t\n\tconst destroyAudio = () => {\n\t  if (innerAudioContext) {\n\t    innerAudioContext.stop();\n\t    innerAudioContext.destroy();\n\t    innerAudioContext = null;\n\t  }\n\t};\n\t// 创建音频\n\tconst createAudio = (audioSrc) => {\n\t  destroyAudio(); // 每次创建将上一个实例销毁\n\t  innerAudioContext = uni.createInnerAudioContext();\n\t  innerAudioContext.src = audioSrc;\n\t  // 播放事件\n\t  innerAudioContext.onPlay(() => {\n\t    console.log(\"play audio\");\n\t  });\n\t  // 播放结束事件\n\t  innerAudioContext.onEnded(() => {\n\t    console.log(\"ended audio\");\n\t  });\n\t  // 播放错误事件\n\t  innerAudioContext.onError((error) => {\n\t    console.log(\"play audio error\", error);\n\t    // 兼容ios（估计是官方bug），可能是ios资源没准备好时，播放会发生错误返回errCode为-1，这时需要重新播放，直至播放成功\n\t    if (error.errCode === -1) {\n\t      createAudio(audioSrc);\n\t    } else {\n\t      // 比如文件不存在等情况，会进入到这个提示\n\t      uni.showToast({\n\t        title: \"播放失败：\" + error.errMsg,\n\t        icon: \"none\",\n\t      });\n\t    }\n\t  });\n\t  innerAudioContext.play();\n\t};\n\t\n\t\r\n\r\n\tconst playNumberVoice = (num) => {\r\n\t\tconst audio = uni.createInnerAudioContext()\r\n\t\taudio.src = `/static/sounds/${num}.mp3`\r\n\t\taudio.play()\r\n\r\n\t\taudio.onEnded(() => audio.destroy())\r\n\t\taudio.onError(() => audio.destroy())\r\n\t}\r\n\r\n\t// 只创建一次实例\n\tconst audioCtx = uni.createInnerAudioContext();\n\t\n\tfunction playAudio(src) {\n\t  try {\n\t    // 停止当前播放（如果还在播放中）\n\t    audioCtx.stop();\n\t  } catch (_) {}\n\t  // 切换到新音源\n\t  audioCtx.src = src;\n\t  // 播放\n\t  audioCtx.play();\n\t}\r\n\r\n\r\n\tonMounted( async () => {\r\n\t\tawait  getRoomData()\r\n\t\tawait getChatList()\r\n\t\tawait getCommonPhrases()\n\t\t// if(roomData.room?.status === 'waiting' && isRoomOperator && roomData.value?.room.channel === 'wechat' && ['terache','baoche'].includes(roomData.value.room?.map_code) && !roomData.value.room.game_link_status){\n\t\t// \tgameLinkShow.value = true;\n\t\t// }\n\t\t\n\t\tif(isRoomOperator.value   && roomData.value?.room.status === 'waiting' && roomData.value?.room.channel === 'wechat' && ['terache','baoche'].includes(roomData.value.room?.map_code) && !roomData.value.room.game_link_status){\n\t\t\tgameLinkShow.value = true;\n\t\t}\n\t\t\r\n\t\t// playJoinSound()\r\n\t\tws.on('room_update', (msg) => {\r\n\t\t\tconsole.log('收到 room_update:', msg.data)\r\n\t\t\troomData.value = msg.data\r\n\t\t\tonCheckRoom()\r\n\t\t\tinitCounter(msg.data.room)\r\n\t\t\t// positions.value = msg.data.positions\r\n\t\t})\r\n\r\n\r\n\t\tws.on('chat', (msg) => {\r\n\t\t\tmsgList.value.push(msg.data)\r\n\t\t\tnextTick(() => {\n\t\t\t    scrollToBottom();\n\t\t\t  });\r\n\t\t})\r\n\r\n\t\tws.on('member_join_voice', (msg) => {\r\n\t\t\tconst num = msg.joined_number\r\n\t\t\tif (num >= 2 && num <= 6) {\n\t\t\t\t // playAudio(`/static/sounds/${num}.mp3`);\n\t\t\t\t  createAudio(`/static/sounds/${num}.mp3`);\r\n\t\t\t\t// playNumberVoice(num)\r\n\t\t\t}\r\n\t\t})\n\t\tws.on('start', (msg) => {\n\t\t\t // playAudio('/static/sounds/start.mp3');\n\t\t\t  createAudio('/static/sounds/start.mp3');\n\t\t\t// const audio = uni.createInnerAudioContext()\n\t\t\t// audio.src = `/static/sounds/start.mp3`\n\t\t\t// audio.play()\n\t\t\t\n\t\t\t// audio.onEnded(() => audio.destroy())\n\t\t\t// audio.onError(() => audio.destroy())\n\t\t})\r\n\t\tws.on('completeRoom', (res) => {\r\n\t\t\t// console.log(res);\r\n\t\t\tif (res.data.show_completed_modal) {\r\n\t\t\t\ttitle.value = \"组队完成\";\r\n\t\t\t\tcontent.value = \"结算阶段： 是否存在未通关、虚假结算、违规竞拍、等问题?\";\r\n\t\t\t\tconfirmText.value = \"发起申诉\";\r\n\t\t\t\tdialogShow.value = true;\r\n\t\t\t\t// 绑定弹窗确认的操作\r\n\t\t\t\tonConfirm.value = complaintLink\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\t\tws.on('kicked', () => {\r\n\t\t\ttitle.value = '提示'\r\n\t\t\tcontent.value = '你已被房主踢出该房间'\r\n\t\t\tconfirmText.value = '返回首页'\r\n\t\t\tdialogShow.value = true\r\n\r\n\t\t\tonConfirm.value = () => {\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.error('页面跳转失败:', err)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\r\n\t})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.room-container {\r\n\t\t// position: fixed;\r\n\t\twidth: 100%;\r\n\t\ttop: 0;\r\n\t\tbackground-color: #fff;\r\n\t\tcolor: #fff;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-between;\r\n\t}\n\t.room-tag-icon{\n\t\twidth: 30rpx;\n\t\theight: 30rpx;\n\t}\r\n\r\n\t.room-header {\r\n\t\t/* background-image: url('https://dnf.hanyunkeji.cn/static/room/20.png'); */\r\n\t\tbackground-size: 100% 100%;\r\n\t\tposition: relative;\r\n\t\theight: 380rpx;\r\n\t}\r\n\r\n\t.room-bg {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-bottom-left-radius: 24rpx;\r\n\t\tborder-bottom-right-radius: 24rpx;\r\n\t}\r\n\r\n\t.fui-nav__left {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tbackground: rgb(0, 0, 0, 0.8);\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.room-top-info {\r\n\t\theight: 60rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: rgb(0, 0, 0, 0.8);\r\n\t\tborder-radius: 50rpx;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 30rpx;\r\n\t\tfont-size: 25rpx;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.zone-icon {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t}\r\n\r\n\t.zone-tag {\r\n\t\tmargin: 0rpx 15rpx;\r\n\t}\r\n\r\n\t.room-content {\r\n\t\t/* height: 100%;\r\n\tposition: relative; */\r\n\t}\r\n\r\n\t.tag-icon {\r\n\t\twidth: 25rpx;\r\n\t\theight: 25rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\r\n\t.room-overlay {\r\n\t\tposition: absolute;\r\n\t\t/* top: 0; */\r\n\t\tbottom: 10rpx;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\t/* height: 100rpx; */\r\n\t\tbottom: 20rpx;\r\n\t\t// padding: 0rpx 20rpx;\r\n\t}\n\t\n\t.team-tips-item{\n\t\tcolor: red;\n\t\tfont-size: 26rpx;\n\t\tmargin: 5rpx 0rpx;\n\t}\r\n\r\n\r\n\r\n\t.room-status {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.room-time {\r\n\t\tmargin-left: auto;\r\n\t}\n\t.room-tag{\n\t\tborder-radius: 0rpx 50rpx 50rpx 0rpx;\n\t}\n\t.room-time{\n\t\tborder-radius: 50rpx 0rpx 0rpx 50rpx;\n\t}\r\n\r\n\t.room-tag,\r\n\t.room-time {\r\n\t\tbackground: rgba(0, 0, 0, 0.8);\r\n\t\t// border-radius: 50rpx;\r\n\t\tpadding: 15rpx 30rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\r\n\t}\n\t.room-tag-label{\n\t\tmargin-left: 10rpx;\n\t}\r\n\r\n\t.room-members {\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.room-row {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\r\n\r\n\t.role {\r\n\t\tfont-size: 24rpx;\r\n\t\tpadding: 2rpx 12rpx;\r\n\t\tborder-radius: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.role-icon {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t\tmargin-right: 5rpx;\r\n\t}\r\n\r\n\t.blue {\r\n\t\tcolor: #0284FE;\r\n\t}\r\n\r\n\t.red {\r\n\t\tcolor: #ff3a3a;\r\n\t}\r\n\r\n\t.green {\r\n\t\tcolor: #22cc88;\r\n\t}\r\n\r\n\t.user-nickname {\r\n\t\tfont-size: 38rpx;\r\n\t}\r\n\r\n\t.green-title {\r\n\t\tbackground: #22cc88;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role.blue {\r\n\t\tbackground: #0284FE;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role.red {\r\n\t\tbackground: #ff3a3a;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role.green {\r\n\t\tbackground: #22cc88;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.fail {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #ccc;\r\n\t}\r\n\r\n\t.room-icon-lock,\r\n\t.room-icon-chair {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground: #444;\r\n\t\tborder-radius: 20rpx;\r\n\t}\r\n\r\n\t.room-chat {\r\n\t\t// padding: 0 20rpx;\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.Profit {\r\n\t\tcolor: #007aff;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 500;\r\n\t\tmargin: 10rpx 0rpx;\r\n\t}\r\n\r\n\t.sumProfit {\r\n\t\tcolor: red;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 500;\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.chat-msg {\r\n\t\t/* background: #2a2a38; */\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 12rpx;\r\n\t\tmargin-bottom: 12rpx;\r\n\t\tcolor: #000;\r\n\t}\r\n\r\n\t.chat-tag {\r\n\t\tcolor: #58a6ff;\r\n\t\tmargin-right: 8rpx;\r\n\t}\r\n\r\n\t.chat-role {\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 5rpx 20rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tcolor: #fff;\r\n\t\tmargin: 0rpx 10rpx;\r\n\t}\r\n\r\n\t.chat-role.green {\r\n\t\tcolor: #48d6a2;\r\n\t\tmargin-right: 8rpx;\r\n\t}\r\n\r\n\t.chat-text {\r\n\t\tcolor: #333 !important;\r\n\t}\r\n\r\n\t.seller-layout {}\r\n\r\n\t.tera-aown {}\r\n\r\n\t.tera-ratio {\r\n\t\twidth: 131rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground: #EF6A22;\r\n\t\t// opacity: 0.8;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-weight: 500;\r\n\t\tfont-size: 23rpx;\r\n\t\tline-height: 40rpx;\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t.room-chat {\r\n\t\tpadding: 0rpx 20rpx;\r\n\t}\r\n\r\n\t.chat-msg {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.chat-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t}\r\n\r\n\t.chat-meta {\r\n\t\tmargin-left: 20rpx;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.chat-nickname {\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\r\n\t.chat-tag {\r\n\t\tmargin-right: 12rpx;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.chat-role {\r\n\t\tfont-size: 20rpx;\r\n\t\t// opacity: 0.8;\r\n\t}\r\n\r\n\t.chat-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t.room-footer {\r\n\t\t// padding: 20rpx;\r\n\t\tbackground: #f8f8f8;\r\n\t\tz-index: 1;\r\n\t\t/* border-top: 1rpx solid #333; */\r\n\t}\r\n\r\n\t.input-layout {\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.chat-shortcuts {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\t// padding: 20rpx;\r\n\t}\r\n\r\n\t.shortcut {\r\n\t\tbackground: #fff;\r\n\t\tcolor: #000;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\t// margin: 20rpx;\r\n\t}\r\n\r\n\t.icon-escaped {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t}\r\n\r\n\t.chat-input {\r\n\t\theight: 72rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 10 rpx;\r\n\t\tpadding: 8rpx 16rpx;\r\n\t}\r\n\r\n\t.input {\r\n\t\tflex: 1;\r\n\t\tbackground: transparent;\r\n\t\tcolor: #000;\r\n\t\tfont-size: 26rpx;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t.icon-face,\r\n\t.icon-send {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tmargin-left: 16rpx;\r\n\t}\r\n\r\n\r\n\r\n\r\n\t.room-members-grid {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\tgap: 24rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tjustify-items: center;\r\n\t}\r\n\r\n\t.room-player {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.avatar-frame {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tposition: relative;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\r\n\t.avatar-bg {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tposition: absolute;\r\n\t\ttop: 8rpx;\r\n\t\tleft: 8rpx;\r\n\t\tz-index: 2;\r\n\t}\r\n\r\n\t.room-icon-placeholder {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t}\r\n\r\n\r\n\t.room-icon-placeholder {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t}\r\n\r\n\t.room-actions {\r\n\t\tposition: absolute;\r\n\t\tbottom: 500rpx;\r\n\t\tright: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 30rpx;\r\n\t}\r\n\r\n\t.start-btn {\r\n\t\tbackground: #1677ff;\r\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx rgba(33, 56, 225, 0.98);\r\n\t}\r\n\r\n\t.refresh-btn {\r\n\t\tbackground: #5b2ae5;\r\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx rgb(6 30 255);\r\n\t}\r\n\r\n\t.reset-btn {\r\n\t\tbackground: #1677ff;\r\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx rgba(33, 56, 225, 0.98);\r\n\t}\r\n\r\n\t.forced-two-line {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.end-btn {\r\n\t\tbackground: rgba(128, 0, 2, 1.0);\r\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx #fc0107;\r\n\t}\r\n\r\n\t.room-action {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 25rpx;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.room-action image {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t\tmargin-bottom: 4rpx;\r\n\t}\r\n\r\n\t.leave-room {\r\n\t\twidth: 160rpx;\r\n\t\theight: 160rpx;\r\n\t\tbackground: url('https://dnf.hanyunkeji.cn/static/room/12.png');\r\n\t\tbackground-size: 100% 100%;\r\n\t}\r\n\r\n\r\n\t.room-cards {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\tgap: 24rpx;\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.role-avatar {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 5rpx;\r\n\t}\r\n\r\n\t.role-info {}\r\n\r\n\t.role-meta {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t/* gap: 10rpx; */\r\n\t\tcolor: #333;\r\n\t\tmargin: 5rpx 0rpx;\r\n\t}\r\n\r\n\t.role-level {\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.chat-role.dps {\r\n\t\tbackground: #ff4d4f;\r\n\t}\r\n\r\n\t.chat-role.leader {\r\n\t\tbackground: #1677ff;\r\n\t}\r\n\r\n\t.chat-role.support {\r\n\t\tbackground: #00c292;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.chat-role.baoche {\r\n\t\tbackground: #5b2ae5;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.chat-role.team {\r\n\t\tbackground: #fbbd12;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.chat-role.deck {\r\n\t\tbackground: #0198cc;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\r\n\r\n\t.lock {\r\n\t\tcolor: #000;\r\n\t}\r\n\r\n\t.role-tag {\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 4rpx 10rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.red {\r\n\t\tbackground: #ff4d4f;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.blue {\r\n\t\tbackground: #1677ff;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.green {\r\n\t\tbackground: #00c292;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\r\n\t.role-tag.baoche {\r\n\t\tbackground: #5b2ae5;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.team {\r\n\t\tbackground: #fbbd12;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.baoche {\r\n\t\tcolor: #5b2ae5;\r\n\t}\r\n\r\n\t.team {\r\n\t\tcolor: #fbbd12;\r\n\t}\r\n\r\n\t.deck {\r\n\t\tcolor: #0198cc;\r\n\t}\r\n\r\n\t.chat-role.seller {\r\n\t\tbackground: #EF6A22;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.deck {\r\n\t\tbackground: #0198cc;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.seller {\r\n\t\tbackground: #EF6A22;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.seller {\r\n\t\tcolor: #EF6A22;\r\n\t}\r\n\r\n\t.role-tag.lock {\r\n\t\tbackground: #000;\r\n\t}\r\n\r\n\r\n\t.role-desc {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #888;\r\n\t\ttext-align: center;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\r\n\r\n\t.role-card.dps {\r\n\t\tborder: 1rpx solid #ff4d4f !important;\r\n\t}\r\n\r\n\t.role-card.leader {\r\n\t\tborder: 1rpx solid #1677ff !important;\r\n\t}\r\n\r\n\t.role-card.support {\r\n\t\tborder: 1rpx solid #00c292 !important;\r\n\t}\r\n\r\n\t.role-card.baoche {\r\n\t\tborder: 1rpx solid #5b2ae5 !important;\r\n\t}\r\n\r\n\t.role-card.team {\r\n\t\tborder: 1rpx solid #fbbd12 !important;\r\n\t}\r\n\r\n\t.role-card.deck {\r\n\t\tborder: 1rpx solid #0198cc !important;\r\n\t}\r\n\r\n\t.role-card.lock {\r\n\t\tborder: 1rpx solid #000 !important;\r\n\t}\r\n\r\n\t.role-card.seller {\r\n\t\tborder: 1rpx solid #EF6A22 !important;\r\n\t}\r\n\r\n\r\n\r\n\t.role-card {\r\n\t\t/* background: #f8f9fa; */\r\n\t\tborder-radius: 10rpx;\r\n\t\theight: 110rpx;\r\n\t\t/* padding: 16rpx; */\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-right: 10rpx;\r\n\t\tjustify-content: center;\r\n\t\t/* gap: 12rpx; */\r\n\t\tposition: relative;\r\n\t\tborder: 1rpx #ccc solid;\r\n\t}\r\n\r\n\t.role-tag-box {\r\n\t\tposition: absolute;\r\n\t\ttop: -20rpx;\r\n\t\tright: -10rpx;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.phrase-popup {\r\n\t\tposition: relative;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\t/* padding: 0rpx 40rpx; */\r\n\t}\r\n\r\n\r\n\t.phras-header {\r\n\t\ttext-align: left;\r\n\t\tfont-size: 30rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tcolor: #000;\r\n\t\tborder-bottom: 1rpx solid #eee;\r\n\t}\r\n\r\n\t.complete-popup {\r\n\t\tposition: relative;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\n\t\theight: 70vh;\r\n\t\t/* padding: 0rpx 40rpx; */\r\n\t}\r\n\r\n\t.phras-list {}\r\n\r\n\t.phras-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-size: 26rpx;\r\n\t\t// border-bottom: 1rpx solid #ccc;\r\n\t}\r\n\r\n\t.phras-send {\r\n\t\tcolor: #3366ff;\r\n\t\tborder-radius: 26rpx;\r\n\t\tpadding: 5rpx 15rpx;\r\n\t\tborder: 1rpx solid #3366ff;\r\n\t}\r\n\r\n\r\n\t/* 弹窗头 */\r\n\t.popup-header {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tcolor: #007aff;\r\n\t\tborder-bottom: 1rpx solid #eee;\r\n\t}\r\n\r\n\t.fui-icon__close {\r\n\t\tposition: absolute;\r\n\t\ttop: 24rpx;\r\n\t\tright: 54rpx;\r\n\r\n\t}\r\n\r\n\t.popup-alert {\r\n\t\tbackground-color: #fff0f0;\r\n\t\tcolor: #f53f3f;\r\n\t\tfont-size: 28rpx;\r\n\t\tpadding: 25rpx;\r\n\t\t/* border-radius: 12rpx; */\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\r\n\r\n\t// .label {\r\n\t// \tfont-size: 28rpx;\r\n\t// \tcolor: #333;\r\n\t// \tmargin-bottom: 20rpx;\r\n\t// \tdisplay: block;\r\n\t// }\r\n\r\n\t.label.required::before {\r\n\t\tcontent: '*';\r\n\t\tcolor: red;\r\n\t\tmargin-right: 6rpx;\r\n\t}\r\n\r\n\t.label {\r\n\t\twidth: 300rpx;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.form-group {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx 0;\r\n\t\tcolor: #333;\r\n\t\tmargin: 20rpx 30rpx;\r\n\t}\r\n\r\n\t.radio-box,\r\n\t.input-box {\r\n\t\tflex: 1;\r\n\t\ttext-align: right;\r\n\t\tcolor: #333;\r\n\t\tfont-size: 30rpx !important;\r\n\t}\r\n\r\n\t.input-with-unit {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: 10rpx;\r\n\t}\r\n\r\n\t.unit {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #888;\r\n\t}\r\n\r\n\t.circle-radio-group {\r\n\t\tdisplay: flex;\r\n\t\tgap: 40rpx;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.circle-radio-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t/* 外圈默认灰色 */\r\n\t.circle-outer {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tborder: 2rpx solid #999;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-right: 10rpx;\r\n\t\t// background: red;\r\n\t}\r\n\r\n\t/* 内部圆点 */\r\n\t.circle-inner {\r\n\t\twidth: 14rpx;\r\n\t\theight: 14rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: #007aff;\r\n\t}\r\n\r\n\t/* ✅ 选中状态时 外圈变蓝 */\r\n\t.circle-radio-item.selected .circle-outer {\r\n\t\tborder-color: #007aff;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t/* .upload-box {\r\n\t  width: 200rpx;\r\n\t  height: 200rpx;\r\n\t  background-color: #f8f8f8;\r\n\t  border-radius: 16rpx;\r\n\t  display: flex;\r\n\t  flex-direction: column;\r\n\t  justify-content: center;\r\n\t  align-items: center;\r\n\t  border: 2rpx dashed #ccc;\r\n\t} */\r\n\r\n\r\n\r\n\t.upload-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #888;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.popup-footer {\r\n\t\t// margin: 30rpx;\n\t\twidth: 100%;\n\t\tpadding: 30rpx;\r\n\t\tposition: absolute;\n\t\tbottom: 20rpx;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\tbackground-color: #007aff;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 30rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 24rpx 0;\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\r\n\t.room-summary {\r\n\t\tdisplay: flex;\r\n\t\theight: 300rpx;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-top: 1rpx solid #eee;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.summary-left {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.summary-item {\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.summary-label {\r\n\t\t// font-weight: bold;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #888;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\r\n\t.value {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #888;\r\n\t}\r\n\r\n\t.images {\r\n\t\tdisplay: flex;\r\n\t\tgap: 10rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.settle-img {\r\n\t\twidth: 160rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t.summary-right {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: flex-end;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.stamp {\r\n\t\twidth: 150rpx;\r\n\t\theight: 150rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\t// flex-direction: column;\r\n\t\tgap: 10rpx;\r\n\t}\r\n\r\n\t.btn-outline {\r\n\t\tbackground: #fff;\r\n\t\tcolor: #ff4d4f;\r\n\t\tborder: 1rpx solid #ff4d4f;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.btn-primary {\r\n\t\tbackground: #007aff;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tfont-size: 26rpx;\r\n\t}\n\t.btn-default{\n\t\tbox-sizing: border-box;\n\t\theight: 60rpx !important;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\r\n\r\n\t.bottom-status {\r\n\t\tposition: absolute;\r\n\t\tright: 50rpx;\r\n\t\tbottom: 200rpx;\r\n\t}\r\n\r\n\t.bottom-status-img {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t.fui-face__hidden {\r\n\t\ttransform: translate3d(0, 520rpx, 0);\r\n\t}\r\n\r\n\r\n\t.fui-face__show {\r\n\t\ttransform: translate3d(0, 0, 0);\r\n\r\n\t\ttransform: translateY(0);\r\n\t}\r\n\r\n\r\n\t.fui-scroll__box {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.fui-face__box {\r\n\t\twidth: 100%;\r\n\t\t// width: 750rpx;\r\n\t\theight: 520rpx;\r\n\t\tbackground-color: #f8f8f8;\r\n\t}\r\n\r\n\t.fui-face__inner {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tbox-sizing: border-box;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t\tpadding: 32rpx 2rpx;\r\n\t}\r\n\r\n\t.fui-face__text {\r\n\t\tdisplay: flex;\r\n\t\twidth: 106rpx;\r\n\t\tfont-size: 60rpx;\r\n\t\tpadding: 16rpx 0;\r\n\t\ttext-align: center;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: pointer;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.fui-del__box {\r\n\t\tposition: absolute;\r\n\t\tright: 32rpx;\r\n\t\tbottom: 32rpx;\r\n\t\twidth: 120rpx;\r\n\t\theight: 72rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.fui-del__box:active {\r\n\t\tbackground-color: #ddd;\r\n\t}\n\t.game-link-popup-header{\n\t\ttext-align: center;\n\t\tfont-size: 30rpx;\n\t\tpadding: 24rpx;\n\t\tcolor: #000;\n\t\tfont-weight: 500;\n\t\tborder-bottom: 1rpx solid #eee;\n\t}\n\t.fui-icon__close {\n\t\tposition: absolute;\n\t\ttop: 24rpx;\n\t\tright: 54rpx;\n\t\n\t}\t\n\t.game-link-card-box{\n\t\tposition: relative;\n\t\t// padding: 20rpx;\n\t}\n\t.game-link-content{\n\t\tpadding: 0rpx 20rpx;\n\t\theight: 230rpx;\n\t}\n\t.link-input-box{\n\t\tmargin: 30rpx 0rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t.paste-btm{\n\t\tmargin: 0rpx 20rpx;\n\t\tbackground-color: #3366ff;\n\t\tcolor: #fff;\n\t\tpadding: 15rpx;\n\t\tfont-size: 28rpx;\n\t\tborder-radius: 10rpx;\n\t\ttext-align: center;\n\t}\n\t.game-link-input{\n\t\tcolor: #333;\n\t\tflex: 1;\n\t}\n\t.link-desc{\n\t\tmargin-top: 40rpx;\n\t\tcolor: darkred;\n\t\tfont-size: 28rpx;\n\t}\n\t.link-btn-layout{\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-around;\n\t\theight: 100rpx;\n\t\tborder-top: 1rpx solid #eee;\n\t}\n\t.link-btn-close {\n\t\twidth: 50%;\n\t\t// background-color: #3366ff;\n\t\tcolor: #000;\n\t\tpadding: 20rpx 0;\n\t\tfont-size: 28rpx;\n\n\t\tborder-radius: 10rpx;\n\t\ttext-align: center;\n\t}\n\t.link-btn {\n\t\twidth: 50%;\n\t\t// background-color: #3366ff;\n\t\tcolor: #3366ff;\n\t\tpadding: 20rpx 0;\n\t\tfont-size: 28rpx;\n\t\tborder-radius: 10rpx;\n\t\ttext-align: center;\n\t}\n\t.line{\n\t\twidth: 1rpx;\n\t\theight: 100%;\n\t\tbackground: #eee;\n\t}\r\n</style>","import MiniProgramPage from '/Users/zhizhi/Documents/HBuilderProjects/dnf/pages/room/room.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}