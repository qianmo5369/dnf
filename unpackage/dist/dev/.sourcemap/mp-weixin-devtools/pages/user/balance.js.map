{"version":3,"names":["TnIcon","TnPopup","paging","common_vendor","ref","useZPaging","balance","amount","rechargeShow","recordList","type","time","tip","goWithdraw","index","showToast","title","icon","doRecharge","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","res","wrap","_callee$","_context","prev","next","value","abrupt","$http","post","sent","code","requestPayment","appId","data","result","timeStamp","nonceStr","package","signType","paySign","success","res2","fail","err","__f__","msg","stop","apply","arguments","onCharge","wx","createPage","MiniProgramPage"],"sources":["balance.vue","balance.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"balance-page\">\r\n\r\n\t\t<TnPopup :model-value=\"rechargeShow\" width=\"80%\" height=\"400rpx\" borderRadius=\"16rpx\">\r\n\t\t\t<view class=\"recharge-card-box\">\r\n\t\t\t\t<view class=\"popup-header\">余额充值</view>\r\n\t\t\t\t<view class=\"fui-icon__close\" @tap=\"rechargeShow = false\">\r\n\t\t\t\t\t<TnIcon name=\"close\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"pay-input-box\">\r\n\t\t\t\t\t<view class=\"input-title\">\r\n\t\t\t\t\t\t充值未使用的余额可以申请退款\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"input-box\">\r\n\t\t\t\t\t\t<text class=\"yuan-text\">￥</text>\r\n\t\t\t\t\t\t<input class=\"input\" type=\"text\" v-model=\"amount\" placeholder=\"请输入充值金额\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"recharge-btn\" @tap=\"doRecharge()\">\r\n\t\t\t\t\t确认充值\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</TnPopup>\r\n\r\n\t\t<!-- 顶部余额卡片 -->\r\n\t\t<view class=\"balance-card\">\r\n\t\t\t<view class=\"balance-left\">\r\n\t\t\t\t<view class=\"label\">账号余额（元）</view>\r\n\t\t\t\t<view class=\"amount\">{{ balance }}</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"balance-right\" @click=\"goWithdraw\">去提现</view>\r\n\t\t\t<view class=\"balance-right btn-charge\" @tap=\"onCharge\">去充值</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 收支明细标题 -->\r\n\t\t<view class=\"section-title\">收支明细</view>\r\n\r\n\t\t<!-- 明细列表 -->\r\n\t\t<view class=\"record-list\">\r\n\t\t\t<view class=\"record-item\" v-for=\"(item, index) in recordList\" :key=\"index\">\r\n\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t{{ item.type }} <text class=\"tip\" v-if=\"item.tip\">?</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"desc\">余额：{{ item.balance }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t<view :class=\"['amount', item.amount > 0 ? 'positive' : 'negative']\">\r\n\t\t\t\t\t\t{{ item.amount > 0 ? '+' : '' }}{{ item.amount }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"time\">{{ item.time }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 充值按钮 -->\r\n\t\t<!-- <view class=\"btn-footer\">\r\n\t\t\t<view class=\"btn-charge\" @click=\"onCharge\">充值</view>\r\n\t\t</view> -->\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue'\r\n\timport TnIcon from '@/uni_modules/tuniaoui-vue3/components/icon/src/icon.vue'\r\n\timport TnPopup from '@/uni_modules/tuniaoui-vue3/components/popup/src/popup.vue';\n\tconst paging = ref(null)\n\tuseZPaging(paging)\r\n\tconst balance = ref(100.00)\r\n\tconst amount = ref(null)\r\n\tconst rechargeShow = ref(false)\r\n\tconst recordList = ref([{\r\n\t\t\ttype: '提现（退款）',\r\n\t\t\tamount: -188.0,\r\n\t\t\tbalance: 1054.5,\r\n\t\t\ttime: '2025-05-026 12:02',\r\n\t\t\ttip: true\r\n\t\t},\r\n\t\t// {\r\n\t\t// \ttype: '提现（退款）',\r\n\t\t// \tamount: -10.0,\r\n\t\t// \tbalance: 1054.5,\r\n\t\t// \ttime: '2025-05-05 12:02',\r\n\t\t// \ttip: true\r\n\t\t// },\r\n\t\t// {\r\n\t\t// \ttype: '充值',\r\n\t\t// \tamount: 300.0,\r\n\t\t// \tbalance: 1054.5,\r\n\t\t// \ttime: '2025-05-05 12:02'\r\n\t\t// },\r\n\t\t// {\r\n\t\t// \ttype: '提现（退款）',\r\n\t\t// \tamount: -5.0,\r\n\t\t// \tbalance: 1054.5,\r\n\t\t// \ttime: '2025-05-05 12:02',\r\n\t\t// \ttip: true\r\n\t\t// },\r\n\t])\n\t\n\t\n\tconst fundList = ref([])\n\t\n\tconst getFundLogs = async (pageNo, pageSize) => {\n\t  const res = await uni.$http.post('/dungeon/fundLogs', {\n\t    page: pageNo,\n\t    page_size: pageSize\n\t  })\n\t  if (res.code === 1) {\n\t    balance.value = res.data.balance\n\t    paging.value.complete(res.data.list)\n\t  } else {\n\t    paging.value.complete(false)\n\t  }\n\t}\n\t\n\t\r\n\r\n\tconst goWithdraw = () => {\r\n\t\t// uni.navigateTo({\r\n\t\t// \turl: '/pages/withdraw/index'\r\n\t\t// })\r\n\t\tuni.showToast({\r\n\t\t\ttitle: '暂无提现接口',\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\tconst doRecharge = async () => {\r\n\t\tif (amount.value <= 0) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请输入充值金额',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn false;\r\n\t\t}\n\t\t\n\t\t// // #ifdef H5\n\t\t//     uni.showToast({\n\t\t//     \ttitle: '未配置h5支付',\n\t\t//     \ticon: 'none'\n\t\t//     })\n\t\t// \treturn false;\n\t\t// // #endif\n\n\t\t\r\n\t\tconst res = await uni.$http.post('/dungeon/recharge', {\r\n\t\t\tamount: amount.value\r\n\t\t})\r\n\t\tif (res.code === 1) {\r\n\t\t\t\n\t\t\tuni.requestPayment({\n\t\t\t appId: res.data.result.appId,\n\t\t\t timeStamp: res.data.result.timeStamp,\n\t\t\t nonceStr: res.data.result.nonceStr,\n\t\t\t package: res.data.result.package,\n\t\t\t signType: res.data.result.signType,\n\t\t\t paySign: res.data.result.paySign,\n\t\t\t success: (res) => {\n\t\t\t  uni.showToast({\n\t\t\t  \ttitle: '已完成支付',\n\t\t\t  \ticon: 'none'\n\t\t\t  })\n\t\t\t  // getInfo();\n\t\t\t  rechargeShow.value = false;\n\t\t\t },\n\t\t\t fail: (err) => {\n\t\t\t  console.log(err)\n\t\t\t  uni.showToast({\n\t\t\t  \ttitle: '未付款',\n\t\t\t  \ticon: 'none'\n\t\t\t  })\n\t\t\t }\n\t\t\t});\r\n\t\t\t// 可刷新房间状态或跳转\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg || '请求支付错误',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tconst onCharge = () => {\r\n\t\trechargeShow.value = true\r\n\t\t// uni.navigateTo({ url: '/pages/charge/index' })\r\n\t}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.balance-page {\r\n\t\tposition: relative;\r\n\t\t// height: 100vh;\r\n\t\t/* background: #f6f6f6; */\r\n\t\t/* min-height: 100vh; */\r\n\t\t/* display: flex;\r\n  flex-direction: column; */\r\n\t}\r\n\r\n\t.balance-card {\r\n\t\tbackground: url(\"https://dnf.hanyunkeji.cn/static/user/card.png\");\r\n\t\theight: 300rpx;\r\n\t\tbackground-size: 100% 100%;\r\n\t\tmargin: 30rpx;\r\n\t\t/* border-bottom-left-radius: 24rpx;\r\n  border-bottom-right-radius: 24rpx; */\r\n\t\tpadding: 40rpx 30rpx;\r\n\t\tcolor: #fff;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.balance-left .label {\r\n\t\tdisplay: block;\r\n\t\tfont-size: 28rpx;\r\n\t\topacity: 0.9;\r\n\t}\r\n\r\n\t.balance-left .amount {\r\n\t\tfont-size: 52rpx;\r\n\t\tfont-weight: bold;\r\n\t\tmargin-top: 32rpx;\r\n\t}\r\n\r\n\t.balance-right {\r\n\t\tposition: absolute;\r\n\t\tbackground: #ffffff;\r\n\t\tcolor: #1e90ff;\r\n\t\tfont-size: 26rpx;\r\n\t\tpadding: 12rpx 32rpx;\r\n\t\tborder-top-left-radius: 32rpx;\r\n\t\tborder-bottom-left-radius: 32rpx;\r\n\t\tright: 0;\r\n\t\ttop: 80rpx;\r\n\t}\r\n\r\n\r\n\t.btn-charge {\r\n\t\tright: 0;\r\n\t\tbackground-color: #3366ff;\r\n\t\tcolor: #fff;\r\n\t\ttop: 180rpx;\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tpadding: 30rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.record-list {\r\n\t\tpadding: 0 24rpx;\r\n\t}\r\n\r\n\t.record-item {\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: flex-start;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.04);\r\n\t}\r\n\r\n\t.record-item .title {\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.record-item .desc {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999;\r\n\t\tmargin-top: 8rpx;\r\n\t}\r\n\r\n\t.tip {\r\n\t\tfont-size: 20rpx;\r\n\t\tbackground: #eee;\r\n\t\tborder-radius: 50%;\r\n\t\twidth: 28rpx;\r\n\t\theight: 28rpx;\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 10rpx;\r\n\t\tcolor: #888;\r\n\t}\r\n\r\n\t.right .amount {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: bold;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.positive {\r\n\t\tcolor: #12c279;\r\n\t}\r\n\r\n\t.negative {\r\n\t\tcolor: #f56c6c;\r\n\t}\r\n\r\n\t.right .time {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #999;\r\n\t\tmargin-top: 10rpx;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.btn-footer {\r\n\t\twidth: 100%;\r\n\t\tposition: absolute;\r\n\t\tbottom: 50rpx;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground: #fff;\r\n\t\t/* margin-top: auto; */\r\n\t}\r\n\r\n\t// .btn-charge {\r\n\t// \tbackground: linear-gradient(135deg, #1e90ff, #3a8bff);\r\n\t// \tcolor: #fff;\r\n\t// \tfont-size: 30rpx;\r\n\t// \tpadding: 20rpx 0;\r\n\t// \ttext-align: center;\r\n\t// \tborder-radius: 60rpx;\r\n\t// \twidth: 100%;\r\n\t// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t.recharge-card-box {\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 10rpx;\r\n\r\n\t\t.pay-input-box {\r\n\t\t\tmargin-bottom: 40rpx;\r\n\r\n\t\t\t.input-title {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: red;\r\n\t\t\t\tpadding: 25rpx 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.input-box {\r\n\t\t\t\tpadding: 0rpx 20rpx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t.yuan-text {\r\n\t\t\t\t\tfont-size: 33rpx;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tborder-bottom: 1px solid #f3f4f6;\r\n\t\t\t\tpadding-bottom: 20rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.remark {\r\n\t\tmargin-top: 16rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #808080;\r\n\t}\r\n\r\n\t.input {\r\n\t\tmargin-left: 14rpx;\r\n\t\tfont-size: 33rpx;\r\n\t}\r\n\r\n\t.popup-header {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tcolor: #000;\r\n\t\tfont-weight: 500;\r\n\t\tborder-bottom: 1rpx solid #eee;\r\n\t}\r\n\r\n\t.fui-icon__close {\r\n\t\tposition: absolute;\r\n\t\ttop: 24rpx;\r\n\t\tright: 54rpx;\r\n\r\n\t}\r\n\r\n\t.recharge-btn {\r\n\t\tmargin: 0rpx 20rpx;\r\n\t\tbackground-color: #3366ff;\r\n\t\tcolor: #fff;\r\n\t\tpadding: 20rpx 0;\r\n\t\tfont-size: 28rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/zhizhi/Documents/HBuilderProjects/dnf/pages/user/balance.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}