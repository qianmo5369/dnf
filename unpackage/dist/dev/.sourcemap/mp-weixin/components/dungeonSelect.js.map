{"version":3,"file":"dungeonSelect.js","sources":["components/dungeonSelect.vue","/Users/zhizhi/Documents/HBuilderProjects/dnf/components/dungeonSelect.vue?type=component"],"sourcesContent":["<template>\r\n\t<!-- 弹窗 -->\r\n\t<!-- 标题栏 -->\r\n\t<view class=\"hd\">\r\n\t\t<text class=\"title\">泰拉车</text>\r\n\t\t<view class=\"btn-close\" @tap=\"onClose\">\r\n\t\t\t<TnIcon name=\"close\" />\r\n\t\t</view>\r\n\t</view>\r\n\t<!-- 滚动区域 -->\r\n\t<scroll-view class=\"bd\" scroll-y>\r\n\t\t<!-- 团本图 -->\r\n\t\t<!-- <view class=\"dungeon-list\">\r\n\t\t\t<view v-for=\"(d, index) in modeMapTree\" :key=\"d.id\" class=\"dungeon-item\"\r\n\t\t\t\t:style=\"{ backgroundImage: `url(${d.image})` }\" @tap=\"onSelectDungeon(index)\">\r\n\t\t\t\t<view class=\"dungeon-label\">{{ d.title }}</view>\r\n\t\t\t\t<view :class=\"['mask', selectedDungeon === d.id ? 'mask-hidden' : '']\"></view>\r\n\t\t\t</view>\r\n\t\t</view> -->\r\n\r\n\t\t<view class=\"dungeon-list\">\r\n\t\t\t<view v-if=\"ozmaDungeon\" class=\"dungeon-item\" :style=\"{ backgroundImage: `url(${ozmaDungeon.image})` }\">\r\n\t\t\t\t<!-- <view class=\"dungeon-label\">{{ ozmaDungeon.title }}</view> -->\n\t\t\t\t<view class=\"dungeon-label\">查看泰拉车规则</view>\r\n\t\t\t\t<view class=\"mask mask-hidden\"></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\r\n\t\t<!-- 内部切换 Tab -->\r\n\t\t<view class=\"inner-tab\" v-if=\"false\">\r\n\t\t\t<view v-for=\"(map, index) in currentDungeon?.maps || []\" :key=\"map.id\" class=\"inner-tab-item\"\r\n\t\t\t\t:class=\"{ active: selectedMapIndex === index }\" @tap=\"selectedMapIndex = index;selectedPosition = null\">\r\n\t\t\t\t<text>{{ map.title }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 当前角色 -->\r\n\t\t<view class=\"current-role\">\r\n\t\t\t<text class=\"label\">当前角色</text>\r\n\t\t\t<view class=\"role-display\" @click=\"handleSelectorClick()\">\r\n\t\t\t\t<TnAvatar :url=\"userStore.userInfo.default_hero?.hero_avatar\" size=\"70rpx\" />\r\n\t\t\t\t<text class=\"role-name\">{{userStore.userInfo.default_hero?.resist_power|| ''}}\r\n\t\t\t\t\t{{ userStore.userInfo.default_hero?.hero_name || '默认角色' }}</text>\r\n\t\t\t\t<text class=\"role-seller\" v-if=\"selectedRole.code == 'seller'\">(卖家)</text>\r\n\t\t\t\t<text class=\"role-buy\" v-if=\"selectedRole.code == 'deck' || selectedRole.code == 'team'\">(买家)</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 选择位置 -->\r\n\t\t<view class=\"form-group\" v-if=\"showPositionSelector\">\r\n\t\t\t<text class=\"label\">选择位置</text>\r\n\t\t\t<view class=\"options\">\r\n\t\t\t\t<view v-for=\"role in filteredRoles\" :key=\"role.id\" class=\"option-btn\"\r\n\t\t\t\t\t:class=\"{ active: selectedPosition === role.id }\" @tap=\"() => handleSelectPosition(role)\">\r\n\t\t\t\t\t{{ role.title }}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 关闭位置 -->\r\n\t\t<view class=\"form-group\" v-if=\"showClosureOption\">\r\n\t\t\t<text class=\"label\">关闭位置</text>\r\n\t\t\t<view class=\"options\">\r\n\t\t\t\t<view v-for=\"opt in configOptions.closure_count\" :key=\"opt.value\" class=\"radio-item\"\r\n\t\t\t\t\t@tap=\"selectedClosure = opt.value\">\r\n\t\t\t\t\t<view class=\"radio\" :class=\"{ checked: selectedClosure === opt.value }\" />\r\n\t\t\t\t\t<text>{{ opt.label }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 雇佣打手 -->\r\n\t\t<view class=\"form-group\" v-if=\"showHireOption\">\r\n\t\t\t<view class=\"label-with-tip\">\r\n\t\t\t\t<text>雇佣打手</text>\r\n\t\t\t\t<TnIcon name=\"help\" size=\"24rpx\" @tap=\"tip('雇佣打手说明')\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"options\">\r\n\t\t\t\t<view v-for=\"opt in configOptions.hire_count\" :key=\"opt.value\" class=\"radio-item\"\r\n\t\t\t\t\t@tap=\"selectedHire = opt.value\">\r\n\t\t\t\t\t<view class=\"radio\" :class=\"{ checked: selectedHire === opt.value }\" />\r\n\t\t\t\t\t<text>{{ opt.label }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 是否一拖 -->\r\n\t\t<view class=\"form-group\" v-if=\"showIsSoloOption\">\r\n\t\t\t<text class=\"label\">是否一拖</text>\r\n\t\t\t<view class=\"options\">\r\n\t\t\t\t<view v-for=\"opt in configOptions.is_solo\" :key=\"opt.value\" class=\"radio-item\"\r\n\t\t\t\t\t@tap=\"selectedIsSolo = opt.value\">\r\n\t\t\t\t\t<view class=\"radio\" :class=\"{ checked: selectedIsSolo === opt.value }\" />\r\n\t\t\t\t\t<text>{{ opt.label }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 开启辅助位置 -->\r\n\t\t<view class=\"form-group\" v-if=\"showEnableSupport\">\r\n\t\t\t<text class=\"label\">开启辅助位置</text>\r\n\t\t\t<view class=\"options\">\r\n\t\t\t\t<view v-for=\"opt in configOptions.is_solo\" :key=\"opt.value\" class=\"radio-item\"\r\n\t\t\t\t\t@tap=\"selectedSupport = opt.value\">\r\n\t\t\t\t\t<view class=\"radio\" :class=\"{ checked: selectedSupport === opt.value }\" />\r\n\t\t\t\t\t<text>{{ opt.label }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\r\n\r\n\t\t<!-- 拥有泰拉 -->\r\n\t\t<view class=\"form-group\" v-if=\"showTeraOwnOption\">\r\n\t\t\t<view class=\"label-with-tip\">\r\n\t\t\t\t<text>拥有泰拉</text>\r\n\t\t\t\t<TnIcon name=\"help\" size=\"24rpx\" @tap=\"tip('拥有泰拉说明')\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"options\">\r\n\t\t\t\t<view v-for=\"opt in configOptions.tera_own\" :key=\"opt.value\" class=\"radio-item\"\r\n\t\t\t\t\t@tap=\"selectedTeraOwn = opt.value\">\r\n\t\t\t\t\t<view class=\"radio\" :class=\"{ checked: selectedTeraOwn === opt.value }\" />\r\n\t\t\t\t\t<text>{{ opt.label }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"form-group\" v-if=\"showTeraOptions\">\r\n\t\t\t<view class=\"label-with-tip\">\r\n\t\t\t\t<text>泰拉比例</text>\r\n\t\t\t\t<TnIcon name=\"help\" size=\"24rpx\" @tap=\"tip('泰拉比例说明')\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"options\">\r\n\t\t\t\t<view v-for=\"opt in configOptions.tera_ratio\" :key=\"opt.value\" class=\"radio-item\"\r\n\t\t\t\t\t@tap=\"selectedTeraRatio = opt.value\">\r\n\t\t\t\t\t<view class=\"radio\" :class=\"{ checked: selectedTeraRatio === opt.value }\" />\r\n\t\t\t\t\t<text>{{ opt.label }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 是否私密房间 -->\r\n\t\t<view class=\"form-group\" v-if=\"showPrivateOption\">\r\n\t\t\t<view class=\"label-with-tip\">\r\n\t\t\t\t<text>私密房间</text>\r\n\t\t\t\t<TnIcon name=\"help\" size=\"24rpx\" @tap=\"tip('私密房间说明')\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"options\">\r\n\t\t\t\t<view v-for=\"opt in configOptions.is_private\" :key=\"opt.value\" class=\"radio-item\"\r\n\t\t\t\t\t@tap=\"selectedPrivate = opt.value\">\r\n\t\t\t\t\t<view class=\"radio\" :class=\"{ checked: selectedPrivate === opt.value }\" />\r\n\t\t\t\t\t<text>{{ opt.label }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t</scroll-view>\r\n\t<!-- 红色提示 -->\r\n\r\n\t<!-- 底部按钮 -->\r\n\t<view class=\"ft\">\r\n\t\t<view class=\"warning\">\r\n\t\t\t{{selectedRole.tip}}\r\n\t\t\t<!-- 如被抢拍，申诉上传出价+被抢价（2张截图） -->\r\n\t\t</view>\r\n\t\t<view class=\"btn-group\">\r\n\t\t\t<view class=\"btn\"\n\t\t\t :class=\"selectedRole.code === 'seller' ? 'btn-primary' : 'btn-outline'\"\r\n\t\t\t\tv-if=\"selectedRole.code == 'dps' || selectedRole.code == 'seller' || selectedRole.code == 'baoche' || selectedRole.code == 'leader'\"\r\n\t\t\t\t@tap=\"createRoom\">创建房间</view>\r\n\t\t\t<view class=\"btn btn-primary\" v-if=\"selectedRole.code != 'seller'\">快速加入</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tdefineProps,\r\n\t\tcomputed,\r\n\t\twatch,\r\n\t\tdefineEmits\r\n\t} from 'vue'\r\n\timport TnIcon from '@/uni_modules/tuniaoui-vue3/components/icon/src/icon.vue'\r\n\timport TnAvatar from '@/uni_modules/tuniaoui-vue3/components/avatar/src/avatar.vue'\r\n\timport {\r\n\t\tuseUserStore\r\n\t} from '@/stores/user'\r\n\t// 控制弹窗显示\r\n\tconst show = ref(true)\r\n\t// 计算 70% 高度\r\n\tconst sys = uni.getSystemInfoSync()\r\n\tconst popupHeight = sys.windowHeight * 0.7 + 'px';\r\n\tconst userStore = useUserStore()\r\n\tconst props = defineProps({\r\n\t\tmodelValue: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tmodeMapTree: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault: () => []\r\n\t\t},\r\n\t\tdefaultDungeonCode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"ozma_assault\"\r\n\t\t},\r\n\t\tdefaultMapCode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"baoche\"\r\n\t\t},\r\n\t\tdefaultRoleCode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"deck\"\r\n\t\t}\r\n\t})\r\n\tconst emit = defineEmits(['update:modelValue', 'confirm-select', 'confirm-share'])\r\n\tconst handleSelectorClick = () => {\r\n\t\tconsole.log(\"通知父组件\");\r\n\t\temit('confirm-select')\r\n\t}\r\n\r\n\tconst handleSelectPosition = (role) => {\r\n\t\t// 只能选当前可用的 role，且不是 seller 特殊情况\r\n\t\tif (currentMap.value?.code === 'terache' && role.code === 'seller') return\r\n\t\tselectedPosition.value = role.id\r\n\t}\n\t\n\tconst ozmaDungeon = computed(() =>\n\t  props.modeMapTree.find(d => d.code === 'ozma_assault') || {}\n\t)\n\r\n\r\n\r\n\tconst selectedDungeon = ref(0)\r\n\tconst selectedDungeonIndex = ref(0)\r\n\tconst selectedMapIndex = ref(0)\r\n\tconst selectedPosition = ref(null)\r\n\tconst currentDungeon = computed(() => props.modeMapTree[selectedDungeonIndex.value] || {})\r\n\tconst currentMap = computed(() => currentDungeon.value?.maps?.[selectedMapIndex.value] || {})\r\n\tconst currentRoles = computed(() => currentMap.value?.roles || [])\r\n\tconst configOptions = computed(() => currentDungeon.value?.config_option || {})\r\n\t// 当前选中角色对象\r\n\tconst selectedRole = computed(() =>\r\n\t\tcurrentRoles.value.find(r => r.id === selectedPosition.value) || {}\r\n\t)\r\n\r\n\tconst modeMapCode = computed(() => currentDungeon.value?.code || '')\r\n\r\n\r\n\tconst selectedClosure = ref(null)\r\n\tconst selectedHire = ref(null)\r\n\tconst selectedTeraRatio = ref(null)\r\n\tconst selectedTeraOwn = ref(null)\r\n\tconst selectedIsSolo = ref(null)\r\n\tconst selectedPrivate = ref(null)\r\n\tconst selectedSupport = ref(null)\r\n\r\n\r\n\tconst showPositionSelector = computed(() => {\r\n\t\tconst mapCode = currentMap.value?.code\r\n\t\tconst roleCode = selectedRole.value.code\r\n\t\t// 如果是特拉切地图 + 卖家，不显示\r\n\t\tif (mapCode === 'terache' && roleCode === 'seller') return false\r\n\r\n\t\t// 默认规则\r\n\t\treturn ['deck', 'team'].includes(roleCode)\r\n\t})\r\n\r\n\tconst filteredRoles = computed(() => {\r\n\t\tconst roleCode = selectedRole.value.code\r\n\t\tconst mapCode = currentMap.value?.code\r\n\t\tconst roles = currentRoles.value\r\n\r\n\t\tif (mapCode === 'terache') {\r\n\t\t\t// 如果是 terache 地图，只显示 一队 和 甲板\r\n\t\t\treturn roles.filter(r => ['team', 'deck'].includes(r.code))\r\n\t\t}\r\n\r\n\t\tif (['deck', 'team'].includes(roleCode)) {\r\n\t\t\t// 正常逻辑\r\n\t\t\treturn roles.filter(r => r.code === roleCode)\r\n\t\t}\r\n\r\n\t\treturn []\r\n\t})\r\n\r\n\r\n\tconst roleInited = ref(false)\r\n\r\n\twatch(\r\n\t\t() => selectedRole.value.code,\r\n\t\t(code) => {\r\n\t\t\tif (roleInited.value) return // 已初始化过，后续点击不影响\r\n\r\n\t\t\tconst mapCode = currentMap.value?.code\r\n\t\t\tif (mapCode === 'terache') {\r\n\t\t\t\tconst match = currentRoles.value.find(r => ['deck', 'team'].includes(r.code))\r\n\t\t\t\tif (match) selectedPosition.value = match.id\r\n\t\t\t\troleInited.value = true\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif (['deck', 'team'].includes(code)) {\r\n\t\t\t\tconst match = currentRoles.value.find(r => r.code === code)\r\n\t\t\t\tif (match) selectedPosition.value = match.id\r\n\t\t\t} else {\r\n\t\t\t\tselectedPosition.value = null\r\n\t\t\t}\r\n\r\n\t\t\troleInited.value = true\r\n\t\t}, {\r\n\t\t\timmediate: true\r\n\t\t}\r\n\t)\r\n\r\n\r\n\r\n\r\n\r\n\tconst showClosureOption = computed(() =>\r\n\t\tmodeMapCode.value === \"ozma_assault\" && ['leader', 'baoche'].includes(selectedRole.value.code)\r\n\t)\r\n\r\n\tconst showHireOption = computed(() =>\r\n\t\tmodeMapCode.value === \"ozma_assault\" && ['leader', 'baoche'].includes(selectedRole.value.code)\r\n\t)\r\n\r\n\tconst showTeraOptions = computed(() => ['seller', 'deck', 'team'].includes(selectedRole.value.code))\r\n\r\n\tconst showIsSoloOption = computed(() =>\r\n\t\tmodeMapCode.value === \"ozma_assault\" && selectedRole.value.code === 'dps'\r\n\t)\r\n\t// 拥有泰拉\r\n\tconst showTeraOwnOption = computed(() => ['seller', 'deck', 'team'].includes(selectedRole.value.code)\r\n\r\n\t)\r\n\r\n\t//私密房间\r\n\tconst showPrivateOption = computed(() => ['seller'].includes(selectedRole.value.code))\r\n\t//开启辅助\r\n\tconst showEnableSupport = computed(() =>\r\n\t\tmodeMapCode.value === \"ozma_descent\" && selectedRole.value.code === 'dps'\r\n\t)\r\n\r\n\r\n\tconsole.log(currentMap.value.code);\r\n\r\n\r\n\r\n\r\n\r\n\t// 监听 modeMapTree 初始化地图/团本\r\n\t// watch(\r\n\t//   () => props.modeMapTree,\r\n\t//   (val) => {\r\n\t//     if (val.length > 0) {\r\n\t//       selectedDungeonIndex.value = 0\r\n\t//       selectedDungeon.value = val[0].id\r\n\t//       selectedMapIndex.value = 0;\r\n\t// \t  console.log(currentMap.value.code);\r\n\t//     }\r\n\t//   },\r\n\t//   { immediate: true }\r\n\t// )\r\n\tconst initialized = ref(false)\n\t\n\t\n\tconst initSelection = () => {\n\t  const val = props.modeMapTree\n\t  console.log('props.modeMapTree.length:', val.length)\n\t\n\t  const dungeon = val.find(d => d.code === props.defaultDungeonCode)\n\t  if (!dungeon) return\n\t\n\t  console.log('dungeon.maps:', dungeon.maps)\n\t  console.log('roles:', dungeon.maps?.[0]?.roles)\n\t\n\t  selectedDungeon.value = dungeon.id\n\t  selectedDungeonIndex.value = val.findIndex(d => d.id === dungeon.id)\n\t\n\t  const mapIndex = dungeon.maps?.findIndex(m => m.code === props.defaultMapCode)\n\t  selectedMapIndex.value = mapIndex >= 0 ? mapIndex : 0\n\t\n\t  const map = dungeon.maps?.[selectedMapIndex.value]\n\t  const role = map?.roles?.find(r => r.code === props.defaultRoleCode)\n\t  selectedPosition.value = role?.id ?? null\n\t\n\t  console.log('selectedMapIndex:', selectedMapIndex.value)\n\t  console.log('selectedPosition:', selectedPosition.value)\n\t}\n\n\r\n\r\n\t// watch(\r\n\t// \t() => props.modeMapTree,\r\n\t// \t(val) => {\n\t// \t\tconsole.log('modeMapTree 到达:', val)\n\t// \t\tif (initialized.value || !val.length) return\r\n\t// \t\t// if (val.length === 0) return\r\n\r\n\t// \t\t// 根据 code 查找 dungeon\r\n\t// \t\tconst dungeonIndex = val.findIndex(d => d.code === props.defaultDungeonCode)\r\n\t// \t\tconst dungeon = dungeonIndex >= 0 ? val[dungeonIndex] : val[0]\r\n\t// \t\tselectedDungeonIndex.value = dungeonIndex >= 0 ? dungeonIndex : 0\r\n\t// \t\tselectedDungeon.value = dungeon.id\r\n\r\n\t// \t\t// 根据 code 查找 map\r\n\t// \t\tconst mapIndex = dungeon.maps?.findIndex(m => m.code === props.defaultMapCode)\r\n\t// \t\tselectedMapIndex.value = mapIndex >= 0 ? mapIndex : 0\r\n\r\n\t// \t\t// 根据 code 查找 role\r\n\t// \t\tconst map = dungeon.maps?.[selectedMapIndex.value]\r\n\t// \t\tconst role = map?.roles?.find(r => r.code === props.defaultRoleCode)\r\n\t// \t\tselectedPosition.value = role?.id ?? null\n\t// \t\t  initialized.value = true\r\n\t// \t}, {\r\n\t// \t\timmediate: true\r\n\t// \t}\r\n\t// )\n\t\n\t\n\t\n\twatch(\n\t  () => props.modeMapTree,\n\t  (val) => {\n\t    if (val.length) {\n\t      // 延迟执行，等 DOM / 数据都 ready\n\t      setTimeout(() => {\n\t        initSelection()\n\t      }, 50)\n\t    }\n\t  },\n\t  { immediate: true }\n\t)\n\r\n\r\n\r\n\r\n\r\n\r\n\twatch(() => configOptions.value.closure_count, (opts) => {\r\n\t\tif (opts?.length) selectedClosure.value = opts[0].value\r\n\t}, {\r\n\t\timmediate: true\r\n\t})\r\n\r\n\twatch(() => configOptions.value.hire_count, (opts) => {\r\n\t\tif (opts?.length) selectedHire.value = opts[0].value\r\n\t}, {\r\n\t\timmediate: true\r\n\t})\r\n\r\n\twatch(() => configOptions.value.tera_ratio, (opts) => {\r\n\t\tif (opts?.length) selectedTeraRatio.value = opts[0].value\r\n\t}, {\r\n\t\timmediate: true\r\n\t})\r\n\r\n\twatch(() => configOptions.value.tera_own, (opts) => {\r\n\t\tif (opts?.length) selectedTeraOwn.value = opts[0].value\r\n\t}, {\r\n\t\timmediate: true\r\n\t})\r\n\r\n\twatch(() => configOptions.value.is_solo, (opts) => {\r\n\t\tif (opts?.length) selectedIsSolo.value = opts[0].value\r\n\t}, {\r\n\t\timmediate: true\r\n\t})\r\n\r\n\r\n\twatch(() => configOptions.value.is_private, (opts) => {\r\n\t\tif (opts?.length) selectedPrivate.value = opts[0].value\r\n\t}, {\r\n\t\timmediate: true\r\n\t})\r\n\r\n\r\n\twatch(() => configOptions.value.enable_support, (opts) => {\r\n\t\tif (opts?.length) selectedSupport.value = opts[0].value\r\n\t}, {\r\n\t\timmediate: true\r\n\t})\r\n\r\n\tconst onSelectDungeon = (index) => {\r\n\t\tselectedDungeonIndex.value = index\r\n\t\tselectedDungeon.value = props.modeMapTree[index].id\r\n\t\tselectedMapIndex.value = 0;\r\n\t\tselectedPosition.value = null;\r\n\r\n\t}\r\n\r\n\tconst createRoom = async () => {\r\n\t\tconsole.log(props.channel);\r\n\t\tconst payload = {\r\n\t\t\tchannel: props.channel,\r\n\t\t\tmap_id: currentMap.value?.id,\r\n\t\t\trole_id: selectedPosition.value,\r\n\t\t\thero_id: 0, // 如果你有英雄选择逻辑\r\n\t\t\tconfig: []\r\n\t\t}\n\t\t\n\t\t\n\t\tconst findOptionId = (groupKey, value) => {\n\t\t  const list = configOptions.value[groupKey] || []\n\t\t  const option = list.find(item => item.value == value)\n\t\t  return option?.id || null\n\t\t}\n\t\t\n\t\t// 然后改写你的逻辑：\n\t\tif (showClosureOption.value && selectedClosure.value) {\n\t\t  const id = findOptionId('closure_count', selectedClosure.value)\n\t\t  if (id) payload.config.push(id)\n\t\t}\n\t\t\n\t\tif (showHireOption.value && selectedHire.value) {\n\t\t  const id = findOptionId('hire_count', selectedHire.value)\n\t\t  if (id) payload.config.push(id)\n\t\t}\n\t\t\n\t\tif (showTeraOptions.value && selectedTeraRatio.value) {\n\t\t  const id = findOptionId('tera_ratio', selectedTeraRatio.value)\n\t\t  if (id) payload.config.push(id)\n\t\t}\n\t\t\n\t\tif (showTeraOwnOption.value && selectedTeraOwn.value) {\n\t\t  const id = findOptionId('tera_own', selectedTeraOwn.value)\n\t\t  if (id) payload.config.push(id)\n\t\t}\n\t\t\n\t\tif (showIsSoloOption.value && selectedIsSolo.value) {\n\t\t  const id = findOptionId('is_solo', selectedIsSolo.value)\n\t\t  if (id) payload.config.push(id)\n\t\t}\n\t\t\n\t\tif (showPrivateOption.value && selectedPrivate.value) {\n\t\t  const id = findOptionId('is_private', selectedPrivate.value)\n\t\t  if (id) payload.config.push(id)\n\t\t}\n\t\t\n\t\tif (showEnableSupport.value && selectedSupport.value) {\n\t\t  const id = findOptionId('enable_support', selectedSupport.value)\n\t\t  if (id) payload.config.push(id)\n\t\t}\r\n\r\n\t\t// 动态添加 config 字段\r\n\t\t// if (showClosureOption.value) {\r\n\t\t// \tpayload.config.closure_count = selectedClosure.value\r\n\t\t// }\r\n\t\t// if (showHireOption.value) {\r\n\t\t// \tpayload.config.hire_count = selectedHire.value\r\n\t\t// }\r\n\t\t// if (showTeraOptions.value && selectedTeraRatio.value) {\r\n\t\t// \tpayload.config.tera_ratio = selectedTeraRatio.value\r\n\t\t// }\r\n\t\t// if (showTeraOwnOption.value && selectedTeraOwn.value) {\r\n\t\t// \tpayload.config.tera_own = selectedTeraOwn.value\r\n\t\t// }\r\n\t\t// if (showIsSoloOption.value && selectedIsSolo.value) {\r\n\t\t// \tpayload.config.is_solo = selectedIsSolo.value\r\n\t\t// }\r\n\t\t// if (showPrivateOption.value && selectedPrivate.value) {\r\n\t\t// \tpayload.config.is_private = selectedPrivate.value\r\n\t\t// }\r\n\t\t// if (showEnableSupport.value && selectedSupport.value) {\r\n\t\t// \tpayload.config.enable_support = selectedSupport.value\r\n\t\t// }\r\n\t\tconst res = await uni.$http.post('/dungeon/create', {\r\n\t\t\tpayload\r\n\t\t})\r\n\t\tconsole.log('用户信息:', res)\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\temit('update:modelValue', false)\r\n\t\t\temit('confirm-share', res.data.roomInfo)\r\n\t\t\t// modeMapTree.value = res.data\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tconst onClose = () => {\r\n\t\temit('update:modelValue', false)\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.hd {\r\n\t\tposition: relative;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 32rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.btn-close {\r\n\t\tposition: absolute;\r\n\t\tright: 24rpx;\r\n\t\ttop: 24rpx;\r\n\t}\r\n\r\n\t.bd {\r\n\t\tpadding: 0 24rpx 20rpx;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t/* 团本列表 */\r\n\t.dungeon-list {\r\n\t\tdisplay: flex;\r\n\t\tgap: 10rpx;\r\n\t\tmargin-bottom: 24rpx;\r\n\t}\r\n\r\n\t.dungeon-item {\r\n\t\tposition: relative;\r\n\t\tbackground-size: 100% 100%;\r\n\t\t/* margin: 15rpx 10rpx; */\r\n\t\theight: 280rpx;\r\n\t\tflex: 1;\r\n\t\t/* background: #fff; */\r\n\t\t/* padding: 20rpx; */\r\n\t\tborder-radius: 10rpx;\r\n\t\tcolor: #888;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.dungeon-label {\r\n\t\tposition: absolute;\r\n\t\tright: 0rpx;\r\n\t\tbottom: 5rpx;\r\n\t\tpadding: 15rpx 35rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.7);\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 100rpx 0rpx 0rpx 100rpx;\r\n\t}\r\n\r\n\t/* 内部 Tab */\r\n\t.inner-tab {\r\n\t\tflex-direction: row;\r\n\t\tdisplay: flex;\r\n\t\t/* border: 1rpx solid #eee; */\r\n\t\tborder-radius: 10rpx;\r\n\t\toverflow: hidden;\r\n\t\tmargin-bottom: 24rpx;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.1);\r\n\t\t/* 阴影效果 */\r\n\t}\r\n\r\n\t.inner-tab-item {\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t\tpadding: 20rpx 0;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t/* .inner-tab-item.active {\r\n  color: #409eff;\r\n  background: #f6f8ff;\r\n} */\r\n\r\n\t.inner-tab-item text {\r\n\t\tdisplay: inline-block;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.inner-tab-item.active text {\r\n\t\tcolor: #007aff;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\r\n\t.inner-tab-item.active text::after {\r\n\t\tcontent: '';\r\n\t\tposition: absolute;\r\n\t\tbottom: -10rpx;\r\n\t\t/* 距离文字底部的距离 */\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 5rpx;\r\n\t\tbackground: linear-gradient(90deg, #366fff 0%, #5da0fc 100%);\r\n\t\tborder-radius: 2rpx;\r\n\t}\r\n\r\n\r\n\r\n\r\n\t.current-role {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 15rpx;\r\n\t}\r\n\r\n\t.role-name {\r\n\t\tmargin-left: 20rpx;\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\r\n\t.role-seller {\r\n\t\tcolor: #409eff;\r\n\t}\r\n\r\n\t.role-buy {\r\n\t\tcolor: red;\r\n\t}\r\n\r\n\t.tn-icon-help {\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\r\n\t/* 左侧标签固定宽度（可选） */\r\n\t.current-role .label {\r\n\t\t/* 如果想让左侧宽度固定，可以加上宽度 */\r\n\t\t/* width: 120rpx; */\r\n\t\tcolor: #888;\r\n\t}\r\n\r\n\t/* 右侧角色显示区不自动拉伸 */\r\n\t.current-role .role-display {\r\n\t\tflex: 0 0 auto;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t/* 小头像 + 名字间距 */\r\n\t.current-role .role-display tn-avatar {\r\n\t\tmargin-right: 16rpx;\r\n\t}\r\n\r\n\t/* 表单组 */\r\n\t.form-group {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\t/* 左右拉满 */\r\n\t\talign-items: center;\r\n\t\t/* 垂直居中 */\r\n\t\t/* margin-bottom: 24rpx; */\r\n\t\theight: 80rpx;\r\n\t\tcolor: #888;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t/* 标签那一块去掉 margin-bottom */\r\n\t.form-group .label-with-tip {\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n\r\n\t/* 让选项组靠右 */\r\n\t.form-group .options {\r\n\t\t/* 确保 options 不会被拉伸 */\r\n\t\tflex: 0 0 auto;\r\n\t\tdisplay: flex;\r\n\t\tgap: 30rpx;\r\n\t\tcolor: #000;\r\n\t}\r\n\r\n\t.option-btn {\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t\tpadding: 5rpx 20rpx;\r\n\t\tborder: 2rpx solid #ddd;\r\n\t\tborder-radius: 5rpx;\r\n\t\tborder-color: #3366ff;\r\n\t\tcolor: #3366ff;\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t.option-btn.active {\r\n\t\tbackground: #3366ff;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t/* 单选 */\r\n\t.radio-item {\r\n\t\tflex-direction: row;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.radio {\r\n\t\twidth: 38rpx;\r\n\t\theight: 38rpx;\r\n\t\tborder: 3rpx solid #ccc;\r\n\t\tborder-radius: 50%;\r\n\t\tposition: relative;\r\n\t\tfont-size: 28rpx;\r\n\t\tmargin-right: 8rpx;\r\n\t}\r\n\r\n\t.radio.checked {\r\n\t\tborder-color: #3366ff;\r\n\t}\r\n\r\n\t.radio.checked::after {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\ttop: 6rpx;\r\n\t\tleft: 6rpx;\r\n\t\twidth: 22rpx;\r\n\t\theight: 22rpx;\r\n\t\tbackground: #3366ff;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t/* 警告 */\r\n\t.warning {\r\n\t\tcolor: #e74c3c;\r\n\t\tfont-size: 24rpx;\r\n\t\ttext-align: center;\r\n\t\tmargin-bottom: 24rpx;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t/* 底部按钮 */\r\n\t.ft {\r\n\t\tposition: absolute;\r\n\t\tbottom: 10rpx;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t.btn-group {\r\n\t\tflex-direction: row;\r\n\t\tdisplay: flex;\r\n\t\tpadding: 20rpx;\r\n\t\t/* padding: 20rpx 24rpx calc(20rpx + env(safe-area-inset-bottom)); */\r\n\t\tgap: 16rpx;\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t.btn {\r\n\t\tflex: 1;\r\n\t\ttext-align: center;\r\n\t\tpadding: 20rpx 0;\r\n\t\tborder-radius: 40rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\t/*  line-height: 100rpx;\r\n  height: 100rpx;\r\n  box-sizing: border-box; */\r\n\t}\r\n\r\n\t.btn-outline {\r\n\t\tborder: 2rpx solid #3366ff;\r\n\t\tcolor: #3366ff;\r\n\t\tbackground: #fff;\r\n\t}\r\n\r\n\t.btn-primary {\r\n\t\tbackground: #3366ff;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\r\n\t.mask {\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.4);\r\n\t\t/* 白色半透明 */\r\n\t\tpointer-events: none;\r\n\t\t/* 不挡点击 */\r\n\t}\r\n\r\n\t.mask-hidden {\r\n\t\tdisplay: none;\r\n\t}\r\n</style>","import Component from '/Users/zhizhi/Documents/HBuilderProjects/dnf/components/dungeonSelect.vue'\nwx.createComponent(Component)"],"names":["ref","uni","useUserStore","computed","watch"],"mappings":"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"}