{"version":3,"file":"fui-bottom-popup.js","sources":["components/fui-bottom-popup.vue","/Users/zhizhi/Documents/HBuilderProjects/dnf/components/fui-bottom-popup.vue?type=component"],"sourcesContent":["<template>\r\n\t<view class=\"fui-bottom__popup-wrap\" :class=\"{'fui-bottom__popwrap-show':show}\"\r\n\t\t:style=\"{ zIndex: zIndex,background:maskBackground}\" @tap.stop=\"handleClose\" v-if=\"isShow || !isNvue\"\r\n\t\tref=\"fui_bp_mk_ani\">\r\n\t\t<!-- @touchmove.stop.prevent=\"stop\" -->\r\n\t\t<!-- #ifdef APP-NVUE -->\r\n\t\t<view class=\"fui-bottom__popup-border\" :style=\"{height:radius+'rpx',background: background}\" v-if=\"radius\">\r\n\t\t</view>\r\n\t\t<!-- #endif -->\r\n\t\t<view ref=\"fui_bp_ani\" class=\"fui-bottom__popup\"\r\n\t\t\t:class=\"{ 'fui-bottom__popup-show': show,'fui-bp__safe-weex':iphoneX && safeArea}\"\r\n\t\t\t:style=\"{borderTopLeftRadius:radius+'rpx',borderTopRightRadius:radius+'rpx' ,background: background}\"\r\n\t\t\t@tap.stop=\"stop($event,true)\">\r\n\t\t\t<slot></slot>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// #ifdef APP-NVUE\r\n\tconst animation = uni.requireNativePlugin('animation');\r\n\t// #endif\r\n\t/*如果底部有自定义导航栏，可适当设置内容padding-bottom值*/\r\n\texport default {\r\n\t\tname: 'fui-bottom-popup',\r\n\t\temits: ['close'],\r\n\t\tprops: {\r\n\t\t\tshow: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: false\r\n\t\t\t},\r\n\t\t\t//背景颜色\r\n\t\t\tbackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: '#fff'\r\n\t\t\t},\r\n\t\t\t//圆角\r\n\t\t\tradius: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 24\r\n\t\t\t},\r\n\t\t\tzIndex: {\r\n\t\t\t\ttype: [Number, String],\r\n\t\t\t\tdefault: 996\r\n\t\t\t},\r\n\t\t\t//点击遮罩 是否可关闭\r\n\t\t\tmaskClosable: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t},\r\n\t\t\tmaskBackground: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: 'rgba(0,0,0,.6)'\r\n\t\t\t},\r\n\t\t\t//是否适配底部安全区\r\n\t\t\tsafeArea: {\r\n\t\t\t\ttype: Boolean,\r\n\t\t\t\tdefault: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\tlet isAndroid = false;\r\n\t\t\tlet isNvue = false;\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tisNvue = true;\r\n\t\t\tconst res = uni.getSystemInfoSync();\r\n\t\t\tisAndroid = res.platform.toLocaleLowerCase() == \"android\"\r\n\t\t\t// #endif\r\n\t\t\treturn {\r\n\t\t\t\tiphoneX: false,\r\n\t\t\t\tisNvue: isNvue,\r\n\t\t\t\tisShow: false,\r\n\t\t\t\tisAndroid: isAndroid\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #ifdef APP-NVUE\r\n\t\twatch: {\r\n\t\t\tshow: {\r\n\t\t\t\thandler(newVal) {\r\n\t\t\t\t\tif (newVal) {\r\n\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\timmediate: true\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\tcreated() {\r\n\t\t\t// #ifdef APP-NVUE || MP-TOUTIAO\r\n\t\t\tthis.iphoneX = this.isPhoneX();\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleClose(e) {\r\n\t\t\t\tif (!this.maskClosable) return;\r\n\t\t\t\tthis.$emit('close', {});\r\n\t\t\t},\r\n\t\t\t// #ifdef APP-NVUE || MP-TOUTIAO\r\n\t\t\tisPhoneX() {\r\n\t\t\t\tif (!this.safeArea) return false;\r\n\t\t\t\t//34px\r\n\t\t\t\tconst res = uni.getSystemInfoSync();\r\n\t\t\t\tlet iphonex = false;\r\n\t\t\t\tlet models = ['iphonex', 'iphonexr', 'iphonexsmax']\r\n\t\t\t\tfor (let i = 11; i < 20; i++) {\r\n\t\t\t\t\tmodels.push(`iphone${i}`)\r\n\t\t\t\t\tmodels.push(`iphone${i}mini`)\r\n\t\t\t\t\tmodels.push(`iphone${i}pro`)\r\n\t\t\t\t\tmodels.push(`iphone${i}promax`)\r\n\t\t\t\t}\r\n\t\t\t\tconst model = res.model.replace(/\\s/g, \"\").toLowerCase()\r\n\t\t\t\tconst newModel = model.split('<')[0]\r\n\t\t\t\tif (models.includes(model) || models.includes(newModel) || (res.safeAreaInsets && res.safeAreaInsets\r\n\t\t\t\t\t\t.bottom > 0)) {\r\n\t\t\t\t\tiphonex = true;\r\n\t\t\t\t}\r\n\t\t\t\treturn iphonex;\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\topen() {\r\n\t\t\t\tthis.isShow = true;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis._animation(true);\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tclose() {\r\n\t\t\t\tthis._animation(false);\r\n\t\t\t},\r\n\t\t\t_animation(type) {\r\n\t\t\t\tif (!this.$refs['fui_bp_ani'] || !this.$refs['fui_bp_mk_ani']) return;\r\n\t\t\t\tanimation.transition(\r\n\t\t\t\t\tthis.$refs['fui_bp_mk_ani'].ref, {\r\n\t\t\t\t\t\tstyles: {\r\n\t\t\t\t\t\t\topacity: type ? 1 : 0\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tduration: 250,\r\n\t\t\t\t\t\ttimingFunction: 'ease-in-out',\r\n\t\t\t\t\t\tneedLayout: false,\r\n\t\t\t\t\t\tdelay: 0 //ms\r\n\t\t\t\t\t},\r\n\t\t\t\t\t() => {\r\n\t\t\t\t\t\tif (!type) {\r\n\t\t\t\t\t\t\tthis.isShow = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\t//nvue android 部分手机隐藏时动画有抖动感，调整duration去动画\r\n\t\t\t\tanimation.transition(\r\n\t\t\t\t\tthis.$refs['fui_bp_ani'].ref, {\r\n\t\t\t\t\t\tstyles: {\r\n\t\t\t\t\t\t\ttransform: `translateY(${type ? '0' : '100%'})`\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tduration: !type && this.isAndroid ? 20 : 250,\r\n\t\t\t\t\t\ttimingFunction: 'ease-in-out',\r\n\t\t\t\t\t\tneedLayout: false,\r\n\t\t\t\t\t\tdelay: 0 //ms\r\n\t\t\t\t\t},\r\n\t\t\t\t\t() => {}\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\t// #endif\r\n\t\t\tstop(e, tap) {\r\n\t\t\t\t// #ifdef APP-NVUE\r\n\t\t\t\ttap && e.stopPropagation();\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.fui-bottom__popup-wrap {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\ttop: 0;\r\n\t\tbottom: 0;\r\n\t\tz-index: 1001;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\tdisplay: flex;\r\n\t\t/* #endif */\r\n\t\tflex-direction: row;\r\n\t\talign-items: flex-end;\r\n\t\tjustify-content: center;\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\ttransition: all ease-in-out .2s;\r\n\t\tvisibility: hidden;\r\n\t\tborder-bottom-width: 0;\r\n\t\toverflow: hidden;\r\n\t\topacity: 0;\r\n\t\t/* #endif */\r\n\r\n\t\t/* #ifdef APP-NVUE */\r\n\t\topacity: 0.001;\r\n\t\t/* #endif */\r\n\r\n\t}\r\n\r\n\t/* #ifdef APP-NVUE */\r\n\t.fui-bottom__popup-border {\r\n\t\tposition: absolute;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t}\r\n\r\n\t/* #endif */\r\n\r\n\t/* #ifndef APP-NVUE */\r\n\t.fui-bottom__popwrap-show {\r\n\t\topacity: 1;\r\n\t\tvisibility: visible;\r\n\t}\r\n\r\n\t/* #endif */\r\n\t.fui-bottom__popup {\r\n\t\t/* #ifndef APP-NVUE */\r\n\t\twidth: 100%;\r\n\t\ttransform: translate3d(0, 100%, 0);\r\n\t\ttransition: all 0.3s ease-in-out;\r\n\t\tmin-height: 20rpx;\r\n\t\toverflow: hidden;\r\n\t\t/* #endif */\r\n\r\n\t\t/* #ifndef APP-NVUE || MP-TOUTIAO */\r\n\t\tpadding-bottom: constant(safe-area-inset-bottom);\r\n\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\t\t/* #endif */\r\n\t\tflex: 1;\r\n\t\t/* #ifdef APP-NVUE */\r\n\t\ttransform: translateY(100%);\r\n\t\tflex-direction: row;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t/* #ifndef APP-NVUE */\r\n\t.fui-bottom__popup-show {\r\n\t\ttransform: translate3d(0, 0, 0);\r\n\t}\r\n\r\n\t/* #endif */\r\n\r\n\t/* #ifdef APP-NVUE || MP-TOUTIAO */\r\n\t.fui-bp__safe-weex {\r\n\t\tpadding-bottom: 34px;\r\n\t}\r\n\r\n\t/* #endif */\r\n</style>","import Component from '/Users/zhizhi/Documents/HBuilderProjects/dnf/components/fui-bottom-popup.vue'\nwx.createComponent(Component)"],"names":[],"mappings":";;AAuBC,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,OAAO,CAAC,OAAO;AAAA,EACf,OAAO;AAAA,IACN,MAAM;AAAA,MACL,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA;AAAA,IAED,YAAY;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA;AAAA,IAED,QAAQ;AAAA,MACP,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACT;AAAA,IACD,QAAQ;AAAA,MACP,MAAM,CAAC,QAAQ,MAAM;AAAA,MACrB,SAAS;AAAA,IACT;AAAA;AAAA,IAED,cAAc;AAAA,MACb,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA,IACD,gBAAgB;AAAA,MACf,MAAM;AAAA,MACN,SAAS;AAAA,IACT;AAAA;AAAA,IAED,UAAU;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAO;AACN,QAAI,YAAY;AAChB,QAAI,SAAS;AAMb,WAAO;AAAA,MACN,SAAS;AAAA,MACT;AAAA,MACA,QAAQ;AAAA,MACR;AAAA,IACD;AAAA,EACA;AAAA,EAeD,UAAU;AAAA,EAIT;AAAA,EACD,SAAS;AAAA,IACR,YAAY,GAAG;AACd,UAAI,CAAC,KAAK;AAAc;AACxB,WAAK,MAAM,SAAS,CAAA,CAAE;AAAA,IACtB;AAAA,IAoED,KAAK,GAAG,KAAK;AAAA,IAIb;AAAA,EACD;;;;;;;;;;;;;;;;;;;AC1KF,GAAG,gBAAgB,SAAS;"}