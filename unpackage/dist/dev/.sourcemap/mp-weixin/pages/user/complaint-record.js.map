{"version":3,"file":"complaint-record.js","sources":["pages/user/complaint-record.vue","pages/user/complaint-record.vue?type=page"],"sourcesContent":["<template>\n  <view class=\"team-record-page\">\n\t  <z-paging\n\t    ref=\"paging\"\n\t    v-model=\"complaintList\"\n\t    @query=\"getComplaintList\"\n\t  :fixed=\"false\"\n\t  >\n\t  <template #top>\n\t  \t\n\t \n    <!-- 顶部导航 -->\n    <view class=\"tabs\">\n      <view\n        v-for=\"tab in tabs\"\n        :key=\"tab.value\"\n        class=\"tab\"\n        :class=\"{ active: activeTab === tab.value }\"\n        @tap=\"handleTab(tab.value)\"\n      >\n        {{ tab.label }}\n      </view>\n    </view>\n\t </template>\n\n    <!-- 列表内容 -->\n\t<!-- <view class=\"line\"></view> -->\n    <view class=\"record-list\">\n\t\t\n     <view class=\"appeal-item\" @tap=\"linkTo(`/pages/complaint/complaint?complaint_id=${item.id}`)\" v-for=\"(item, index) in complaintList\" :key=\"index\">\n            <view class=\"user-info\">\n              <image class=\"avatar\" :src=\"item.hero.hero_avatar\" mode=\"aspectFill\" />\n              <view class=\"name-wrap\">\n                <view class=\"nickname\">{{item.hero.resist_power}}{{ item.hero.hero_name }}</view>\n                <view class=\"hero-nickname\">{{ item.hero.nickname }}</view>\n              </view>\n              <view class=\"cancel-btn\">\n\t\t\t\t  <text v-if=\"item.status == 'pending'\">待处理</text>\n\t\t\t\t  <text v-if=\"item.status  == 'processing'\">处理中</text>\n\t\t\t\t  <text v-if=\"item.status == 'cancelled'\">撤回申诉</text>\n\t\t\t\t  <text v-if=\"item.status == 'resolved'\">已完成</text>\n\t\t\t  </view>\n            </view>\n      \n            <view class=\"info-text\">\n\t\t\t\t<text class=\"label\">房间信息：</text>\n              <text class=\"room-id\">{{ item.room_sn }}</text>\n              <text class=\"tag\" v-if=\"!item.is_mine\">被投诉</text>\n            </view>\n            <view class=\"label\">问题描述：\n\t\t\t<text class=\"reason\">{{ item.reason }}</text>\n\t\t\t</view>\n      \n            <view class=\"footer\">\n              <text class=\"time\">{{ item.created_at_text }}</text>\n              <view class=\"detail-btn\">查看详情</view>\n            </view>\n          </view>\n\t\t  \n\t\t \n  </view>\n   </z-paging>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed } from 'vue'\nimport useZPaging from \"@/uni_modules/z-paging/components/z-paging/js/hooks/useZPaging.js\";\nconst paging = ref(null)\n\tuseZPaging(paging)\nconst tabs = [\n  { label: '待处理', value: 'pending' },\n  { label: '处理中', value: 'processing' },\n  {label: '撤回申诉', value:'cancelled'},\n  { label: '已和解', value: 'resolved' },\n]\n\nconst activeTab = ref('pending')\n\nconst complaintList = ref([])\n\nconst handleTab = (value) => {\n\tactiveTab.value  = value;\n\tpaging.value.reload();\n}\nconst getComplaintList = async (pageNo, pageSize) => {\n\t  const res = await uni.$http.post('/room/complaintList', {\n\t    page: pageNo,\n\t    page_size: pageSize,\n\t\tstatus:activeTab.value\n\t  })\n\t  if (res.code === 1) {\n\t\t  console.log(res.data.list);\n\t    paging.value.complete(res.data.list)\n\t  } else {\n\t    paging.value.complete(false)\n\t  }\n\t}\nconst linkTo = (path)=>{\n\tuni.navigateTo({\n\t\turl:path\n\t})\n}\n</script>\n\n<style scoped>\n.team-record-page {\n  background: #fff;\n  /* min-height: 100vh; */\n}\n\n.tabs {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding: 20rpx 30rpx;\n  background: #fff;\n  /* border-bottom: 1rpx solid #eee; */\n}\n\n.tab {\n  font-size: 28rpx;\n  color: #666;\n  margin-right: 40rpx;\n  padding-bottom: 10rpx;\n  position: relative;\n}\n\n.tab.active {\n  color: #007aff;\n  font-weight: bold;\n}\n.line{\n\twidth: 100%;\n\theight: 30rpx;\n\tbackground: #f8f8f8;\n}\n\n/* .tab.active::after {\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 4rpx;\n  background: #007aff;\n  border-radius: 2rpx;\n} */\n\n.record-list {\n  /* padding: 20rpx; */\n  padding: 0 24rpx;\n  height: 60vh;\n  /* background: red; */\n}\n\n\n\n\n\n\n.appeal-item {\n  /* background: #fff; */\n  /* background: #007aff; */\n  border-radius: 20rpx;\n  padding: 24rpx;\n  margin-bottom: 30rpx;\n  /* box-shadow: 8rpx 8rpx 12rpx rgba(0, 0, 0, 0.1); */\n  box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\n  color: #999 !important;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 16rpx;\n}\n\n.avatar {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 50%;\n  margin-right: 20rpx;\n}\n\n.name-wrap {\n  flex: 1;\n}\n\n.nickname {\n  font-size: 28rpx;\n  font-weight: bold;\n  color: #333;\n}\n\n.hero-nickname {\n  font-size: 24rpx;\n  color: #999;\n}\n\n.cancel-btn {\n  color: #333;\n  font-size: 26rpx;\n}\n\n.info-text {\n  font-size: 26rpx;\n  color: #333;\n  margin: 15rpx 0rpx;\n}\n\n.room-id {\n  color: #2e8cf0;\n}\n\n.tag {\n  background: #f56c6c;\n  color: #fff;\n  padding: 4rpx 10rpx;\n  border-radius: 8rpx;\n  margin-left: 10rpx;\n  font-size: 22rpx;\n}\n.label{\n\tcolor: #999;\n\tfont-size: 26rpx;\n}\n\n.reason {\n  font-size: 26rpx;\n  color: #555;\n  margin-bottom: 20rpx;\n}\n\n.footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 24rpx;\n  color: #888;\n}\n\n.detail-btn {\n  color: #2e8cf0;\n  border: 1rpx solid #2e8cf0;\n  padding: 8rpx 20rpx;\n  border-radius: 5rpx;\n  font-size: 26rpx;\n}\n\n.bottom-text {\n  text-align: center;\n  color: #aaa;\n  font-size: 24rpx;\n  margin-top: 40rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/zhizhi/Documents/HBuilderProjects/dnf/pages/user/complaint-record.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","useZPaging","uni"],"mappings":";;;;;;;;;;;;;;AAoEA,UAAM,SAASA,cAAG,IAAC,IAAI;AACtBC,+DAAAA,WAAW,MAAM;AAClB,UAAM,OAAO;AAAA,MACX,EAAE,OAAO,OAAO,OAAO,UAAW;AAAA,MAClC,EAAE,OAAO,OAAO,OAAO,aAAc;AAAA,MACrC,EAAC,OAAO,QAAQ,OAAM,YAAW;AAAA,MACjC,EAAE,OAAO,OAAO,OAAO,WAAY;AAAA,IACrC;AAEA,UAAM,YAAYD,cAAG,IAAC,SAAS;AAE/B,UAAM,gBAAgBA,cAAG,IAAC,EAAE;AAE5B,UAAM,YAAY,CAAC,UAAU;AAC5B,gBAAU,QAAS;AACnB,aAAO,MAAM;IACd;AACA,UAAM,mBAAmB,OAAO,QAAQ,aAAa;AAClD,YAAM,MAAM,MAAME,cAAAA,MAAI,MAAM,KAAK,uBAAuB;AAAA,QACtD,MAAM;AAAA,QACN,WAAW;AAAA,QACd,QAAO,UAAU;AAAA,MACnB,CAAI;AACD,UAAI,IAAI,SAAS,GAAG;AACnBA,kFAAY,IAAI,KAAK,IAAI;AACxB,eAAO,MAAM,SAAS,IAAI,KAAK,IAAI;AAAA,MACxC,OAAU;AACL,eAAO,MAAM,SAAS,KAAK;AAAA,MAC5B;AAAA,IACF;AACF,UAAM,SAAS,CAAC,SAAO;AACtBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAI;AAAA,MACN,CAAE;AAAA,IACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrGA,GAAG,WAAW,eAAe;"}