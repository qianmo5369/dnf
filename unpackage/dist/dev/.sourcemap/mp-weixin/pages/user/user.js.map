{"version":3,"file":"user.js","sources":["pages/user/user.vue","pages/user/user.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"profile-page\">\n\t\t<fui-dialog :show=\"dialogShow\" :content=\"system.config.email\" title=\"请发送邮箱至\" confirmText=\"复制邮箱\" maskClosable @click=\"onClick\"\n\t\t\t></fui-dialog>\r\n\t\t<!-- 顶部信息区域 -->\r\n\t\t<view class=\"profile-header\">\r\n\t\t\t<template v-if=\"userStore.isLoggedIn\">\r\n\t\t\t\t<TnAvatar :url=\"userStore.userInfo.avatar\" size=\"xl\" type=\"primary\" />\r\n\t\t\t\t<view class=\"profile-info\">\r\n\t\t\t\t\t<text class=\"nickname\">{{userStore.userInfo.nickname}}</text>\r\n\t\t\t\t\t<view class=\"userid\">\r\n\t\t\t\t\t\t编号：{{userStore.userInfo.id}}\r\n\t\t\t\t\t\t<TnIcon name=\"copy\" @tap=\"copy(userStore.userInfo.id)\" />\r\n\t\t\t\t\t\t<!-- <image class=\"copy-icon\" src=\"https://dnf.hanyunkeji.cn/static/icon-copy.png\" /> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\n\t\t\t\t<TnIcon name=\"set\" size=\"45\" @tap=\"linkTo('/pages/user/setting')\" />\r\n\t\t\t</template>\r\n\r\n\t\t\t<template v-else>\r\n\t\t\t\t<TnAvatar size=\"xl\" url=\"https://dnf.hanyunkeji.cn/static/user/10.png\"\r\n\t\t\t\t\t@click=\"linkTo('/pages/login/login')\" />\r\n\t\t\t\t<view class=\"profile-info\" @click=\"linkTo('/pages/login/login')\">\r\n\t\t\t\t\t<text class=\"nickname\">未登录用户</text>\r\n\t\t\t\t\t<view class=\"userid\">\r\n\t\t\t\t\t\t请先登录以使用全部功能\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</template>\r\n\t\t</view>\r\n\r\n\t\t<!-- 余额卡片 -->\r\n\t\t<view class=\"balance-card\">\r\n\t\t\t<view class=\"balance-item\" @click=\"linkTo('/pages/user/balance')\">\r\n\t\t\t\t<image src=\"https://dnf.hanyunkeji.cn/static/user/icon-money1.png\" class=\"balance-icon\" />\r\n\t\t\t\t<text class=\"balance-text\">余额：¥{{userStore.userInfo.balance}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"balance-item\" @click=\"linkTo('/pages/user/deposit')\">\r\n\t\t\t\t<image src=\"https://dnf.hanyunkeji.cn/static/user/icon-coin.png\" class=\"balance-icon\" />\r\n\t\t\t\t<text class=\"balance-text\">助战币：{{userStore.userInfo.sum_coin}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 功能菜单 -->\r\n\t\t<view class=\"menu-list\">\r\n\t\t\t<view class=\"menu-item\" v-for=\"(item, index) in menus\" :key=\"index\" @click=\"linkTo(item.path,item.type)\">\r\n\t\t\t\t<image :src=\"item.icon\" class=\"menu-icon\" />\r\n\t\t\t\t<text class=\"menu-text\">{{ item.text }}</text>\r\n\t\t\t\t<image class=\"arrow-icon\" src=\"https://dnf.hanyunkeji.cn/static/user/09.png\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 客服按钮 -->\r\n\t\t<!-- <view class=\"service-btn\">\r\n      <image src=\"https://dnf.hanyunkeji.cn/static/kefu.png\" class=\"kefu-img\" />\r\n      <view class=\"kefu-tag\">客服</view>\r\n    </view> -->\r\n\r\n\t\t<button class=\"top-kefu\" open-type=\"contact\">\r\n\t\t\t客服\r\n\t\t</button>\r\n\r\n\t\t<!-- 留空占位的群 banner -->\r\n\t\t<!-- <view class=\"group-banner\">\r\n      <image src=\"https://dnf.hanyunkeji.cn/static/group-placeholder.png\" mode=\"widthFix\" />\r\n    </view> -->\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\n\timport {\n\t\tref,\n\t\tcomputed,\n\t\tonMounted\n\t} from 'vue'\r\n\timport TnAvatar from '@/uni_modules/tuniaoui-vue3/components/avatar/src/avatar.vue'\r\n\timport TnIcon from '@/uni_modules/tuniaoui-vue3/components/icon/src/icon.vue'\n\timport fuiDialog from \"@/components/fui-dialog.vue\"\r\n\timport {\r\n\t\tuseUserStore\r\n\t} from '@/stores/user'\n\timport {\n\t\tuseSystemStore\n\t} from '@/stores/system'\n\tconst dialogShow = ref(false)\n\tconst system = useSystemStore()\n\t// console.log(system.config.email);\r\n\timport {\r\n\t\tonShow,\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app'\n\t\timport uniCopy from '@/js_sdk/xb-copy/uni-copy.js'\r\n\tconst menus = [{\r\n\t\t\ttext: '组队记录',\r\n\t\t\ticon: 'https://dnf.hanyunkeji.cn/static/user/01.png',\r\n\t\t\tpath: \"/pages/user/team-record\",\r\n\t\t\ttype: \"url\"\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '申诉记录',\r\n\t\t\ticon: 'https://dnf.hanyunkeji.cn/static/user/06.png',\r\n\t\t\tpath: \"/pages/user/complaint-record\",\r\n\t\t\ttype: \"url\"\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '角色管理',\r\n\t\t\ticon: 'https://dnf.hanyunkeji.cn/static/user/02.png',\r\n\t\t\tpath: \"/pages/hero/hero\",\r\n\t\t\ttype: \"url\"\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '邀请好友',\r\n\t\t\ticon: 'https://dnf.hanyunkeji.cn/static/user/05.png',\n\t\t\tpath:\"/pages/red/red\",\r\n\t\t\ttype: \"urlTab\"\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '建议反馈',\r\n\t\t\ticon: 'https://dnf.hanyunkeji.cn/static/user/04.png',\r\n\t\t\tpath: \"/pages/user/feedback\",\r\n\t\t\ttype: \"url\"\r\n\t\t},\r\n\t\t{\r\n\t\t\ttext: '商务合作',\r\n\t\t\ticon: 'https://dnf.hanyunkeji.cn/static/user/03.png',\r\n\t\t\ttype: \"popup\"\r\n\t\t},\r\n\t]\r\n\t\n\tonShow(()=>{\n\t\tgetUserInfo()\n\t})\r\n\r\n\r\n\tconst userStore = useUserStore()\r\n\tonMounted(() => {\r\n\t\tgetUserInfo()\r\n\t\t// system.fetchConfig()\r\n\t})\r\n\r\n\tconst getUserInfo = async () => {\r\n\t\tawait userStore.fetchUserInfo()\r\n\t}\r\n\tconst linkTo = (path,type = 'url') => {\r\n\t\tif(type ==  'url'){\n\t\t\tuni.navigateTo({\n\t\t\t\turl: path\n\t\t\t})\n\t\t}\n\t\tif(type ==  'popup'){\n\t\t\tdialogShow.value =  true\n\t\t\t\n\t\t}\n\t\t\n\t\tif(type == 'urlTab'){\n\t\t\tuni.switchTab({\n\t\t\t\turl:path\n\t\t\t})\n\t\t}\n\t\t\n\t\t\n\t\t\r\n\t}\n\tconst onClick = (e) => {\n\t\tconsole.log('点击事件触发了，type：', e)\n\t\tif (e.index === 1) {\n\t\t\tconsole.log(\"点击确定\");\n\t\t\tcopy(system.config.email) // 只在点击确认按钮时执行\n\t\t}\n\t\tdialogShow.value = false\n\t}\n\t\n\tconst copy = (val) => {\n\t\tuniCopy({\n\t\t\tcontent: val,\n\t\t\ttitle:\"复制成功\",\n\t\t\tsuccess: (res) => {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: res,\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t},\n\t\t\terror: (e) => {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: e,\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 3000,\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\tpage {\r\n\t\tbackground: #f4f7fb;\r\n\t}\r\n\r\n\t.profile-page {\r\n\t\tbottom: 0;\r\n\t\tmargin: 0;\r\n\t\tbackground: #f4f7fb;\r\n\t\theight: 100vh;\r\n\t}\r\n\r\n\t.profile-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 200rpx 40rpx 20rpx;\r\n\t\tbackground: linear-gradient(to bottom, #66ccff, #ffffff);\n\t\tposition: relative;\r\n\t\t/* background: linear-gradient(177.16deg, #fff 0%, #d9ecff 33.13%, #fff 69.08%, #fff 100%); */\r\n\t\t/* background-image: url('https://resource.tuniaokj.com/images/cool_bg_image/icon_bg.png'); */\r\n\t}\n\t.setting{\n\t\tposition: absolute;\n\t\tright: 10;\n\t\ttop: 10;\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 24rpx;\r\n\t}\r\n\r\n\t.profile-info {\r\n\t\tflex: 1;\r\n\t\tmargin-left: 30rpx;\r\n\t}\r\n\r\n\t.nickname {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.userid {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #666;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 8rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.copy-icon {\r\n\t\twidth: 28rpx;\r\n\t\theight: 28rpx;\r\n\t}\n\t\n\t\r\n\r\n\t.balance-card {\r\n\t\tbackground: #2e2b27;\r\n\t\tcolor: #ffe8b6;\r\n\t\tfont-size: 29rpx;\r\n\t\tmargin: 20rpx;\r\n\t\tpadding: 25rpx 30rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.menu-list {\r\n\t\tbackground: #fff;\r\n\t\tmargin: 20rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.menu-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 33rpx 30rpx;\r\n\t\tborder-bottom: 1rpx solid #f2f2f2;\r\n\t\tposition: relative;\r\n\t\t/* margin: 0rpx 90rpx; */\r\n\t}\r\n\r\n\t.menu-icon {\r\n\t\twidth: 36rpx;\r\n\t\theight: 36rpx;\r\n\t\tmargin-right: 24rpx;\r\n\t}\r\n\r\n\t.menu-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.arrow-icon {\r\n\t\twidth: 24rpx;\r\n\t\theight: 24rpx;\r\n\t}\r\n\r\n\t.service-btn {\r\n\t\tposition: absolute;\r\n\t\tright: 30rpx;\r\n\t\tbottom: 300rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tz-index: 9;\r\n\t}\r\n\r\n\t.kefu-img {\r\n\t\twidth: 88rpx;\r\n\t\theight: 88rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tborder: 6rpx solid #fff;\r\n\t\tbox-shadow: 0 6rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.kefu-tag {\r\n\t\tbackground: #ff7c1f;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 4rpx 12rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tmargin-top: -12rpx;\r\n\t}\r\n\r\n\t.group-banner {\r\n\t\tmargin: 32rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.group-banner image {\r\n\t\twidth: 100%;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.balance-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tgap: 16rpx;\r\n\t}\r\n\r\n\t.balance-icon {\r\n\t\twidth: 36rpx;\r\n\t\theight: 36rpx;\r\n\t}\r\n\r\n\t.balance-text {\r\n\t\tcolor: #ffe8b6;\r\n\t\tfont-size: 30rpx;\r\n\t}\r\n\r\n\r\n\t.top-kefu {\r\n\t\tposition: absolute;\r\n\t\tright: 10rpx;\r\n\t\tbottom: 200rpx;\r\n\t\twidth: 146rpx;\r\n\t\theight: 70rpx;\r\n\t\tcolor: #fff;\r\n\t\tbackground-image: url('https://dnf.hanyunkeji.cn/static/home/04.png');\r\n\t\tbackground-size: 100% 100%;\r\n\t\tfont-size: 25rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-end;\r\n\t\tpadding-right: 10rpx;\n\t\tbackground-color: transparent;\r\n\t}\n\n\t.top-kefu::after{\n\t\t\n\t\tborder: none !important;\n\t\theight: 100rpx !important;\n\t}\t\r\n</style>","import MiniProgramPage from '/Users/zhizhi/Documents/HBuilderProjects/dnf/pages/user/user.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","useSystemStore","onShow","useUserStore","onMounted","uni","uniCopy"],"mappings":";;;;;;;;AA2EC,MAAM,WAAW,MAAW;AAC5B,MAAM,SAAS,MAAW;AAC1B,MAAM,YAAY,MAAW;;;;AAO7B,UAAM,aAAaA,cAAG,IAAC,KAAK;AAC5B,UAAM,SAASC,cAAAA,eAAgB;AAO/B,UAAM,QAAQ;AAAA,MAAC;AAAA,QACb,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAK;AAAA,QACL,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,MACN;AAAA,MACD;AAAA,QACC,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,MACN;AAAA,IACD;AAEDC,kBAAAA,OAAO,MAAI;AACV,kBAAa;AAAA,IACf,CAAE;AAGD,UAAM,YAAYC,YAAAA,aAAc;AAChCC,kBAAAA,UAAU,MAAM;AACf,kBAAa;AAAA,IAEf,CAAE;AAED,UAAM,cAAc,YAAY;AAC/B,YAAM,UAAU,cAAe;AAAA,IAC/B;AACD,UAAM,SAAS,CAAC,MAAK,OAAO,UAAU;AACrC,UAAG,QAAS,OAAM;AACjBC,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK;AAAA,QACT,CAAI;AAAA,MACD;AACD,UAAG,QAAS,SAAQ;AACnB,mBAAW,QAAS;AAAA,MAEpB;AAED,UAAG,QAAQ,UAAS;AACnBA,sBAAAA,MAAI,UAAU;AAAA,UACb,KAAI;AAAA,QACR,CAAI;AAAA,MACD;AAAA,IAID;AACD,UAAM,UAAU,CAAC,MAAM;AACtBA,oBAAAA,iDAAY,iBAAiB,CAAC;AAC9B,UAAI,EAAE,UAAU,GAAG;AAClBA,sBAAAA,MAAA,MAAA,OAAA,8BAAY,MAAM;AAClB,aAAK,OAAO,OAAO,KAAK;AAAA,MACxB;AACD,iBAAW,QAAQ;AAAA,IACnB;AAED,UAAM,OAAO,CAAC,QAAQ;AACrBC,oCAAQ;AAAA,QACP,SAAS;AAAA,QACT,OAAM;AAAA,QACN,SAAS,CAAC,QAAQ;AACjBD,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UACX,CAAK;AAAA,QACD;AAAA,QACD,OAAO,CAAC,MAAM;AACbA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACf,CAAK;AAAA,QACD;AAAA,MACJ,CAAG;AAAA,IACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7LF,GAAG,WAAW,eAAe;"}