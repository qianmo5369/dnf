{"version":3,"file":"room.js","sources":["pages/room/room.vue","pages/room/room.vue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"room-container\">\r\n\t\t<fui-dialog :show=\"dialogShow\" :content=\"content\" :title=\"title\" :confirmText=\"confirmText\" maskClosable\r\n\t\t\t@click=\"onClick\" @close=\"onClose\"></fui-dialog>\r\n\t\t<TnModal ref=\"modalRef\" />\r\n\r\n\t\t<view v-if=\"rechargeShow\" style=\"z-index: 1000001;\">\r\n\t\t\t<Recharge v-model=\"rechargeShow\" :orderInfo=\"orderInfo\"></Recharge>\r\n\t\t</view>\r\n\r\n\t\t<TnPopup z-index=\"20076\" :model-value=\"contentShow\" width=\"90%\" height=\"70vh\" borderRadius=\"16rpx\">\r\n\t\t\t<Parse v-if=\"contentShow\" v-model=\"contentShow\" :contentId=\"contentId\"></Parse>\r\n\t\t</TnPopup>\r\n\r\n\r\n\t\t<TnPopup :model-value=\"gameLinkShow\" width=\"80%\" height=\"450rpx\" borderRadius=\"16rpx\">\r\n\t\t\t<view class=\"game-link-card-box\">\r\n\t\t\t\t<view class=\"game-link-popup-header\">创建游戏房间链接</view>\r\n\t\t\t\t<view class=\"fui-icon__close\" @tap=\"gameLinkShow = false;\">\r\n\t\t\t\t\t<TnIcon name=\"close\" size=\"35\" color=\"#999\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"game-link-content\">\r\n\t\t\t\t\t<view class=\"link-input-box\">\r\n\t\t\t\t\t\t<input class=\"game-link-input\" v-model=\"gameLinkInput\" placeholder=\"请输入游戏房间链接\" type=\"text\" />\r\n\t\t\t\t\t\t<view class=\"paste-btm\" @tap=\"pasteText\">\r\n\t\t\t\t\t\t\t粘贴链接\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"link-desc\">\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t只需要三步，15秒告别繁琐邀请流程\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t(匹配成功后，可再次填写)\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"link-btn-layout\">\r\n\t\t\t\t\t<view class=\"link-btn-close\" @tap=\"handleContent(6)\">\r\n\t\t\t\t\t\t如何填写?\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\"></view>\r\n\t\t\t\t\t<view class=\"link-btn\" @tap=\"updateGameUrl\">\r\n\t\t\t\t\t\t确认填写\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</TnPopup>\r\n\r\n\t\t<fui-bottom-popup :show=\"phrasShow\" :zIndex=\"4000\">\r\n\t\t\t<view class=\"phras-popup\">\r\n\t\t\t\t<view class=\"phras-header\">常用语</view>\r\n\t\t\t\t<view class=\"fui-icon__close\" @tap=\"phrasShow  = false\">\r\n\t\t\t\t\t<TnIcon name=\"close\" color=\"#000\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"phras-list\">\r\n\t\t\t\t\t<view class=\"phras-item\" v-for=\"(item,index) in commonPhrases\" :key=\"index\">\r\n\t\t\t\t\t\t<view class=\"phras-desc\">\r\n\t\t\t\t\t\t\t{{item.text}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"phras-send\" @tap=\"phrasSend(item.text)\">\r\n\t\t\t\t\t\t\t发送\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</fui-bottom-popup>\r\n\t\t<fui-bottom-popup :show=\"completeShow\" :zIndex=\"8000\">\r\n\t\t\t<view class=\"complete-popup\">\r\n\r\n\t\t\t\t<!-- 标题 -->\r\n\t\t\t\t<view class=\"popup-header\">完成结算</view>\r\n\t\t\t\t<view class=\"fui-icon__close\" @tap=\"completeShow = false\">\r\n\t\t\t\t\t<TnIcon name=\"close\" color=\"#000\" />\r\n\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t<view class=\"popup-alert\">\r\n\t\t\t\t\t<TnIcon name=\"tip-fill\" color=\"#f53f3f\" />\r\n\t\t\t\t\t<text v-if=\"roomData.room?.settle_model != 'leilong'\" class=\"tn-ml\">上传截图，可作为纠纷评判依据</text>\r\n\t\t\t\t\t<text class=\"tn-ml\" v-else>没有达到13阶段直接解散</text>\r\n\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t<!--  泰拉车结算表单 -->\r\n\t\t\t\t<template v-if=\"roomData.room?.settle_model == 'terache'\">\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<text class=\"label required\">是否金币车</text>\r\n\t\t\t\t\t\t<view class=\"circle-radio-group\">\r\n\t\t\t\t\t\t\t<view class=\"circle-radio-item\" :class=\"{ selected: isGoldCar === '0' }\"\r\n\t\t\t\t\t\t\t\t@tap=\"isGoldCar = '0'\">\r\n\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"isGoldCar === '0'\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text>否</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"circle-radio-item\" :class=\"{ selected: isGoldCar === '1' }\"\r\n\t\t\t\t\t\t\t\t@tap=\"isGoldCar = '1'\">\r\n\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"isGoldCar === '1'\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text>是</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t<!-- 非金币车才填写泰拉和卡片 -->\r\n\t\t\t\t\t<view v-if=\"isGoldCar === '0'\">\r\n\r\n\t\t\t\t\t\t<!-- 花费泰拉 -->\r\n\t\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t\t<text class=\"label required\">花费泰拉</text>\r\n\t\t\t\t\t\t\t<view class=\"input-box input-with-unit\">\r\n\t\t\t\t\t\t\t\t<input v-model=\"teraCost\" type=\"number\" placeholder=\"请输入\" class=\"input\" />\r\n\t\t\t\t\t\t\t\t<text class=\"unit\">万</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 是否有卡片 -->\r\n\t\t\t\t\t\t<!-- 卡片/宝珠选择 -->\r\n\t\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t\t<text class=\"label required\">卡片/宝珠</text>\r\n\t\t\t\t\t\t\t<view class=\"circle-radio-group\">\r\n\t\t\t\t\t\t\t\t<view class=\"circle-radio-item\" :class=\"{ selected: hasCard === '0' }\"\r\n\t\t\t\t\t\t\t\t\t@tap=\"hasCard = '0'\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"hasCard === '0'\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text>无</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"circle-radio-item\" :class=\"{ selected: hasCard === '1' }\"\r\n\t\t\t\t\t\t\t\t\t@tap=\"hasCard = '1'\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"hasCard === '1'\" />\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<text>有</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!-- 卡片拍卖价（仅当选择“有”时） -->\r\n\t\t\t\t\t\t<view v-if=\"hasCard === '1'\" class=\"form-group\">\r\n\t\t\t\t\t\t\t<text class=\"label required\">拍卖价</text>\r\n\t\t\t\t\t\t\t<view class=\"input-box input-with-unit\">\r\n\t\t\t\t\t\t\t\t<input v-model=\"cardPrice\" type=\"number\" placeholder=\"请输入\" class=\"input\" />\r\n\t\t\t\t\t\t\t\t<text class=\"unit\">万</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\r\n\r\n\t\t\t\t\t\t<!-- 动态计算展示 -->\r\n\t\t\t\t\t\t<view class=\"form-group\" style=\"flex-direction: column; align-items: flex-start;\">\r\n\t\t\t\t\t\t\t<text class=\"label\">结算参考</text>\r\n\t\t\t\t\t\t\t<view class=\"Profit\">\r\n\t\t\t\t\t\t\t\t<text>支出泰拉:{{ realTera }} 万 | </text>\r\n\t\t\t\t\t\t\t\t<text>收益:{{ cashProfit }} 元 | </text>\r\n\t\t\t\t\t\t\t\t<text>卡片分红:{{cardProfit}} </text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"sumProfit\">\r\n\t\t\t\t\t\t\t\t本次预估收益:{{sumProfit}}元\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</template>\r\n\r\n\r\n\t\t\t\t<!-- 雷龙结算表单 -->\r\n\t\t\t\t<view v-if=\"roomData.room?.settle_model === 'leilong'\">\r\n\t\t\t\t\t<view class=\"form-group\" style=\"flex-direction: column; align-items: flex-start;\">\r\n\t\t\t\t\t\t<view class=\"label required\">请选择通过阶段</view>\r\n\t\t\t\t\t\t<view class=\"circle-radio-group\" style=\"margin: 10rpx 0rpx;\">\r\n\t\t\t\t\t\t\t<view v-for=\"item in leilongStages\" :key=\"item.value\" class=\"circle-radio-item\"\r\n\t\t\t\t\t\t\t\t:class=\"{ selected: leilongStage === item.value }\" @tap=\"leilongStage = item.value\">\r\n\t\t\t\t\t\t\t\t<view class=\"circle-outer\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"circle-inner\" v-if=\"leilongStage === item.value\" />\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text>{{ item.label }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 公共上传区域 -->\r\n\t\t\t\t<view v-if=\"!(roomData.room?.settle_model === 'leilong' && leilongStage === 'disband')\" class=\"form-group\"\r\n\t\t\t\t\tstyle=\"flex-direction: column; align-items: flex-start;\">\r\n\t\t\t\t\t<text class=\"label required\" style=\"margin-bottom: 10rpx;\">上传结算截图</text>\r\n\t\t\t\t\t<fui-upload borderColor=\"#eee\" background=\"#fff\" radius=\"10\" immediate width=\"320\" height=\"200\"\r\n\t\t\t\t\t\t:url=\"uploadUrl\" :max=\"2\" ref=\"uploadRef\" @success=\"uploadSuccess\" @error=\"uploadError\" />\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 提交按钮 -->\r\n\t\t\t\t<view class=\"popup-footer\">\r\n\t\t\t\t\t<view class=\"submit-btn\" @tap=\"doCompleteRoom\">确定完成</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</fui-bottom-popup>\r\n\t\t<!-- 顶部背景与状态栏 -->\r\n\t\t<view class=\"room-header\" :style=\"{ backgroundImage: `url(${roomData.room?.mode_image })` }\">\r\n\t\t\t<fui-nav-bar custom padding=\"12\" background=\"none\">\r\n\t\t\t\t<view class=\"fui-nav__left\">\r\n\t\t\t\t\t<TnIcon name=\"left\" size=\"35rpx\" color=\"#fff\" @tap=\"linkTo('/pages/index/index','tabbar')\" />\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"room-top-info\">\r\n\t\t\t\t\t<image class=\"zone-icon\" src=\"https://dnf.hanyunkeji.cn/static/room/wechat2.png\"\r\n\t\t\t\t\t\tv-if=\"roomData.room?.channel === 'wechat'\" mode=\"aspectFill\" />\r\n\t\t\t\t\t<image class=\"zone-icon\" src=\"https://dnf.hanyunkeji.cn/static/home/qq.png\"\r\n\t\t\t\t\t\tv-if=\"roomData.room?.channel === 'QQ'\" mode=\"aspectFill\" />\r\n\t\t\t\t\t<text class=\"zone-tag\" v-if=\"roomData.room?.channel === 'wechat'\">微信区</text>\r\n\t\t\t\t\t<text class=\"zone-tag\" v-if=\"roomData.room?.channel === 'QQ'\">QQ区</text>\r\n\t\t\t\t\t<text class=\"zone-title\">{{roomData.room?.mode_title}} {{roomData.room?.id}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t</fui-nav-bar>\r\n\r\n\t\t\t<!-- <view class=\"room-top-info\">\r\n\t\t\t\t<text class=\"zone-tag\">微信区 - 包车155</text>\r\n\t\t\t</view> -->\r\n\t\t\t<!-- <image class=\"room-bg\" src=\"https://dnf.hanyunkeji.cn/static/room/20.png\" mode=\"aspectFill\" /> -->\r\n\t\t\t<view class=\"room-overlay\">\r\n\t\t\t\t<view class=\"room-status\">\r\n\t\t\t\t\t<!-- 先判断基础条件：仅当 channel==='wechat' 且 map_code 为 'terache' 或 'baoche' -->\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tv-if=\"roomData.room?.channel === 'wechat' && ['terache','baoche'].includes(roomData.room?.settle_model)\">\r\n\r\n\t\t\t\t\t\t<!-- 未匹配链接 -->\r\n\t\t\t\t\t\t<view class=\"room-tag\" v-if=\"!roomData.room?.game_link_status\" @tap=\"handleContent(6)\">\r\n\r\n\t\t\t\t\t\t\t<image class=\"room-tag-icon\" src=\"https://dnf.hanyunkeji.cn/static/01.png\" mode=\"aspectFit\">\r\n\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t<text class=\"room-tag-label\">暂未匹配游戏房间链接</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 已配置链接，用 else 或者 else-if -->\r\n\t\t\t\t\t\t<view @tap=\"gameLinkShow =true\" class=\"room-tag\" v-else>\r\n\t\t\t\t\t\t\t<image class=\"room-tag-icon\" src=\"https://dnf.hanyunkeji.cn/static/game1.png\"\r\n\t\t\t\t\t\t\t\tmode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t<text class=\"room-tag-label\">游戏房间链接已经配置</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 其他 settle_model 的标签保持不变 -->\r\n\t\t\t\t\t<view class=\"room-tag\" v-if=\"roomData.room?.settle_model === 'leilong'\">\r\n\t\t\t\t\t\t<image class=\"room-tag-icon\" src=\"https://dnf.hanyunkeji.cn/static/coin.png\" mode=\"aspectFit\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t<text class=\"room-tag-label\">\r\n\t\t\t\t\t\t\t13阶{{ roomData.room?.thirteen_stage_coin }}个币 | 斩杀{{ roomData.room?.finish_stage_coin }}个币\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"room-tag\"\r\n\t\t\t\t\t\tv-if=\"roomData.room?.settle_model === 'normal'\">\r\n\r\n\t\t\t\t\t\t<image class=\"room-tag-icon\" src=\"https://dnf.hanyunkeji.cn/static/coin.png\" mode=\"aspectFit\">\r\n\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t<text class=\"room-tag-label\">{{roomData.room?.leader_pay}}个 助战币</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"room-time\" v-if=\"roomData && roomData.room?.status !== 'completed'\">\r\n\t\t\t\t\t\t<text v-if=\"roomData.room?.status === 'waiting'\">等待中 {{ waitingTimeText }}</text>\r\n\t\t\t\t\t\t<text v-else-if=\"roomData.room?.status === 'in_progress'\" style=\"color: green\">\r\n\t\t\t\t\t\t\t进行中 {{ progressTimeText }}\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"room-cards\">\r\n\t\t\t<view class=\"role-card\" :class=\"pos.code\" v-for=\"(pos, index) in roomData.positions\" :key=\"pos.id\"\r\n\t\t\t\t@tap=\"onSelectPosition(pos)\" @longpress=\"onKickMember(pos)\">\r\n\t\t\t\t<view class=\"role-tag-box\">\r\n\t\t\t\t\t<view class=\"role-tag\" :class=\"getRoleColor(pos.code)\"> {{pos.title}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"role-info\" v-if=\"pos.user && pos.code != 'seller'\">\r\n\t\t\t\t\t<view class=\"role-meta\">\r\n\t\t\t\t\t\t<image class=\"role-avatar\" v-if=\"pos.user\" :src=\"pos.user['hero_avatar']\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t<text class=\"role-level\">{{ pos.user.resist_power }}</text>\r\n\t\t\t\t\t\t<text class=\"role-name\">{{ pos.user.hero_name }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tn-flex-1\">\r\n\r\n\t\t\t\t\t\t<image v-if=\"pos.user.status == 'escaped'\" class=\"icon-escaped\"\r\n\t\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/escaped.png\" />\r\n\t\t\t\t\t\t<text class=\"role-desc\">{{ pos.user.nickname }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"seller-layout\" v-if=\"pos.user && pos.code == 'seller'\">\r\n\t\t\t\t\t<view class=\"role-meta\">\r\n\t\t\t\t\t\t<image class=\"role-avatar\" v-if=\"pos.user\" :src=\"pos.user['hero_avatar']\" mode=\"aspectFill\" />\r\n\t\t\t\t\t\t{{roomData.room.tera_own}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"tn-flex-1\">\r\n\t\t\t\t\t\t<view class=\"tera-ratio\">比例{{roomData.room.tera_ratio}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"role-info-empty\" :class=\"getRoleColor(pos.code)\" v-if=\"pos.code != 'lock' && !pos.user\">\r\n\t\t\t\t\t加入位置\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"role-info-empty\" v-if=\"pos.code == 'lock'\">\r\n\t\t\t\t\t位置锁定\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\n\t\t\n\t\t\n\t\t\n\t\t<view class=\"message-wrap\">\n\t\t\t<scroll-view scroll-y enable-flex class=\"scroll-list\" scroll-with-animation  :scroll-top=\"scrollTop\">\n\t\t\t\t<view class=\"message-item-wrap\">\n\t\t\t\t\t<view class=\"team-tips\">\n\t\t\t\t\t\t<view class=\"team-tips-item\" v-for=\"(tips, index0) in roomData.room?.config_json?.tips\"\n\t\t\t\t\t\t\t:key=\"index0\" v-if=\"roomData.room?.config_json && roomData.room?.config_json.tips\">\n\t\t\t\t\t\t\t{{ tips }}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"chat-msg\" v-for=\"(msg, index) in msgList\" :key=\"index\" :id=\"'msg-' + index\">\n\t\t\t\t\t\t<view class=\"chat-header\">\n\t\t\t\t\t\t\t<TnAvatar size=\"60rpx\" :url=\"msg.hero_avatar\" />\n\t\t\t\t\t\t\t<view class=\"chat-meta\">\n\t\t\t\t\t\t\t\t<view class=\"chat-nickname\">\n\t\t\t\t\t\t\t\t\t<text class=\"chat-role\" :class=\"msg.role_code\">\n\t\t\t\t\t\t\t\t\t\t{{msg.role_title}}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t\t\t\t<text class=\"chat-tag\" :class=\"getRoleColor(msg.role_code)\">\n\t\t\t\t\t\t\t\t\t\t{{ msg.hero_nickname }}\n\t\t\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\n\t\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t\t<text class=\"chat-text\">{{ msg.content }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</scroll-view>\n\t\t</view>\n\t\t\n\t\t\r\n\t\t\r\n\r\n\r\n\t\t<!-- 右侧功能按钮区域 -->\r\n\t\t<view class=\"room-actions\" >\r\n\t\t\t<template v-if=\"roomData.room && isRoomOperator\">\n\t\t\t\t\n\t\t\t\t<!-- 等待中状态才能开始游戏 -->\n\t\t\t\t<view class=\"room-action start-btn\" v-if=\"roomData.room?.status === 'waiting'\" @tap=\"onStartGame()\">\n\t\t\t\t\t<text>开始</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 进行中状态可以上传结算图 -->\n\t\t\t\t<view class=\"room-action end-btn\" v-if=\"roomData.room?.status === 'in_progress'\" @tap=\"completeShow = true\">\n\t\t\t\t\t<text>完成</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 等待中可刷新 -->\n\t\t\t\t<view class=\"room-action refresh-btn\" v-if=\"roomData.room?.status === 'waiting'\" @tap=\"refresh()\">\n\t\t\t\t\t<text>刷新</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t<!-- 进行中可重置 -->\n\t\t\t\t<view class=\"room-action reset-btn\" v-if=\"roomData.room?.status === 'in_progress'\" @tap=\"onResetToWait()\">\n\t\t\t\t\t<view>重新</view>\n\t\t\t\t\t<view>等待</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t\n\t\t\t</template>\n\t\t\t<template v-if=\"roomData.room?.status === 'in_progress' && roomData.room?.game_link && roomData.room?.joined_role_code != null\">\n\t\t\t\t<view class=\"room-action game-link-btn\"  @tap=\"onJoinGameRoom()\">\n\t\t\t\t\t<view>进入</view>\n\t\t\t\t\t<view>游戏</view>\n\t\t\t\t</view>\n\t\t\t</template>\r\n\r\n\t\t</view>\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\n\t\t\r\n\r\n\t\t<!-- </view> -->\r\n\t\t<!-- 常用语和输入栏 -->\r\n\t\t<view class=\"room-footer\"\r\n\t\t\tv-if=\"roomData.room && roomData.room?.status != 'completed' && roomData.room?.status != 'disbanded' && roomData.room?.status != 'settling' \">\r\n\t\t\t<view class=\"input-layout\">\r\n\t\t\t\t<view class=\"chat-shortcuts\">\r\n\t\t\t\t\t<view class=\"shortcut\" @tap=\"checkMemberAccess(handlePhras)\">常用语</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"chat-input\">\r\n\t\t\t\t\t<input class=\"input\" ref=\"inputaRef\" confirm-type=\"send\" :disabled=\"!roomData.room?.is_member\"\r\n\t\t\t\t\t\t:placeholder=\"msgTime\" v-model=\"inputMsg\" @tap=\"() => checkMemberAccess()\" @focus=\"focusChange\"\r\n\t\t\t\t\t\t@blur=\"blurChange\" @confirm=\"sendChat()\" />\r\n\t\t\t\t\t<fui-icon @tap=\"() => checkMemberAccess(faceChange)\" :name=\"!faceShow?'face':'keyboard'\"></fui-icon>\r\n\r\n\t\t\t\t\t<image v-if=\"inputMsg\" @tap=\"checkMemberAccess(sendChat)\" class=\"icon-send\"\r\n\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/send.png\" />\r\n\t\t\t\t\t<image v-else @tap=\"checkMemberAccess(onLeaveRoom)\" class=\"icon-send\"\r\n\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/23.png\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"fui-scroll__box\" v-if=\"faceShow\">\r\n\t\t\t\t<scroll-view scroll-y class=\"fui-face__box\" :style=\"{opacity:faceShow?1:0}\">\r\n\t\t\t\t\t<view class=\"fui-face__inner\">\r\n\t\t\t\t\t\t<text class=\"fui-face__text fui--active\" v-for=\"(item,index) in faceList\" :key=\"index\"\r\n\t\t\t\t\t\t\t@click=\"faceClick(item)\">{{item}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<view class=\"fui-del__box\" @tap.stop=\"delMsg\">\r\n\t\t\t\t\t<fui-icon name=\"backspace\" :size=\"56\"></fui-icon>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<fui-safe-area background=\"none\"></fui-safe-area>\r\n\t\t</view>\r\n\t\t<view class=\"bottom-status\" v-if=\"roomData.room &&  roomData.room['status'] == 'disbanded'\">\r\n\t\t\t<image class=\"bottom-status-img\" src=\"https://dnf.hanyunkeji.cn/static/room/200.png\" mode=\"aspectFit\">\r\n\t\t\t</image>\r\n\t\t</view>\r\n\t\t<view>\n\t\t\t<view class=\"room-summary\"\n\t\t\t\tv-if=\"roomData.room  &&   roomData.room['status'] == 'completed' || roomData.room['status'] == 'settling' \">\n\t\t\t\t<view class=\"summary-left\">\n\t\t\t\t\t<view class=\"summary-item\">\n\t\t\t\t\t\t<text class=\"summary-label\">结算图:</text>\n\t\t\t\t\t\t<view class=\"images\">\n\t\t\t\t\t\t\t<image @tap=\"previewImage(img)\" v-for=\"(img, idx) in roomData.room.settlement_images\" :key=\"idx\"\n\t\t\t\t\t\t\t\t:src=\"img\" class=\"settle-img\" mode=\"aspectFill\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"summary-item\">\n\t\t\t\t\t\t<text class=\"summary-label\">组队时间:</text>\n\t\t\t\t\t\t<text class=\"value\">{{ roomData.room.start_time }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"summary-item\">\n\t\t\t\t\t\t<text class=\"summary-label\">累计用时:</text>\n\t\t\t\t\t\t<text class=\"value\">{{ roomData.room.teamup_time }}</text>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\n\t\t\t\t<!-- 右下角印章和客服 -->\n\t\t\t\t<view class=\"summary-right\">\n\t\t\t\t\t<image v-if=\"roomData.room && roomData.room['status'] == 'completed'\"\n\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/300.png\" class=\"stamp\" />\n\t\t\t\t\t<image v-if=\"roomData.room && roomData.room['status'] == 'settling'\"\n\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/room/400.png\" class=\"stamp\" />\n\t\t\t\t\t<image v-if=\"roomData.room && roomData.room['status'] == 'settled'\"\n\t\t\t\t\t\tsrc=\"https://dnf.hanyunkeji.cn/static/success_3.png\" class=\"stamp\" />\n\t\t\t\t\t<view class=\"actions\" v-if=\"roomData.room?.is_member\">\n\t\t\t\t\t\t<view class=\"btn-outline\"\n\t\t\t\t\t\t\tv-if=\"roomData.room?.joined_role_code == 'leader' || roomData.room?.joined_role_code == 'baoche'\">\n\t\t\t\t\t\t\t<text v-if=\"roomData.room?.complaint_status.can_complain\"\n\t\t\t\t\t\t\t\t@tap=\"linkTo(`/pages/complaint/send?room_id=${roomData.room?.id}`)\">发起申诉</text>\n\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t@tap=\"linkTo(`/pages/complaint/complaint?complaint_id=${roomData.room?.complaint_status.complaint_id}`)\"\n\t\t\t\t\t\t\t\tv-if=\"roomData.room?.complaint_status.complaint_status == 'pending' || roomData.room?.complaint_status.complaint_status == 'processing'\">申诉中</text>\n\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t@tap=\"linkTo(`/pages/complaint/complaint?complaint_id=${roomData.room?.complaint_status.complaint_id}`)\"\n\t\t\t\t\t\t\t\tv-if=\"roomData.room?.complaint_status.complaint_status == 'resolved' || roomData.room?.complaint_status.complaint_status == 'cancelled'\">申诉完成</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"btn-outline btn-default\"\n\t\t\t\t\t\t\tv-if=\"roomData.room?.is_terache && roomData.room['status'] == 'settling'\">\n\t\t\t\t\t\t\t<text @tap=\"linkTo(`/pages/complaint/index?room_id=${roomData.room?.id}`)\">查看结算单</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"btn-outline btn-default\"\n\t\t\t\t\t\t\tv-if=\"roomData.room?.is_terache && roomData.room['status'] == 'completed'\">\n\t\t\t\t\t\t\t<text @tap=\"linkTo(`/pages/complaint/index?room_id=${roomData.room?.id}`)\">结算完成</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<!-- <view class=\"btn-primary\">联系客服</view> -->\n\t\t\t\t\t\t<button class=\"btn-default btn-primary\" open-type=\"contact\">联系客服</button>\n\t\t\t\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t</view>\n\t\t\t<fui-safe-area background=\"none\"></fui-safe-area>\n\t\t</view>\r\n\t\t\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport uniCopy from '@/js_sdk/xb-copy/uni-copy.js'\r\n\timport TnModal from '@/uni_modules/tuniaoui-vue3/components/modal/src/modal.vue'\r\n\timport TnIcon from '@/uni_modules/tuniaoui-vue3/components/icon/src/icon.vue'\r\n\timport fuiUpload from \"@/components/fui-upload.vue\"\r\n\timport {\r\n\t\tref,\r\n\t\tdefineProps,\r\n\t\tcomputed,\r\n\t\twatch,\r\n\t\tonMounted,\r\n\t\tonUnmounted,\r\n\t\tnextTick,\n\t\treactive\r\n\r\n\t} from 'vue'\r\n\timport {\r\n\t\tonShow,\r\n\t\tonLoad\r\n\t} from '@dcloudio/uni-app';\r\n\timport {\r\n\t\tbaseUrl\r\n\t} from \"@/util/env\";\r\n\timport ws from '@/util/ws.js'\r\n\timport faceList from './emoji.js'\r\n\timport Recharge from \"@/components/recharge.vue\";\r\n\timport fuiBottomPopup from \"@/components/fui-bottom-popup.vue\"\r\n\timport TnAvatar from '@/uni_modules/tuniaoui-vue3/components/avatar/src/avatar.vue'\r\n\timport fuiSafeArea from \"@/components/fui-safe-area.vue\"\r\n\timport fuiNavBar from \"@/components/fui-nav-bar.vue\"\r\n\timport fuiDialog from \"@/components/fui-dialog.vue\"\r\n\timport TnPopup from '@/uni_modules/tuniaoui-vue3/components/popup/src/popup.vue';\r\n\timport Parse from \"@/components/parse.vue\"\r\n\tconst uploadRef = ref(null)\r\n\tconst uploadUrl = baseUrl + '/common/upload'\r\n\tconst uploadStatus = ref(false);\r\n\tconst settlementImage = ref([]); // 游戏结算图\r\n\tconst dialogShow = ref(false);\r\n\tconst completeShow = ref(false);\r\n\tconst title = ref(null)\r\n\tconst content = ref(null)\r\n\tconst confirmText = ref(null)\r\n\tconst roomData = ref({})\r\n\tconst onConfirm = ref(null) // 动态绑定的回调函数\r\n\tconst selectedHeroId = ref(null)\r\n\tconst msgTime = ref(\"该房间最新消息，2小时前\")\r\n\tconst inputMsg = ref('');\r\n\tconst room_id = ref(null)\r\n\tconst msgList = ref([])\r\n\tconst phrasShow = ref(false)\r\n\tconst isGoldCar = ref('0')\r\n\tconst teraCost = ref('')\r\n\tconst hasCard = ref('0')\r\n\tconst cardPrice = ref('')\r\n\tconst gameLinkInput = ref(null)\r\n\tconst rechargeShow = ref(false)\r\n\tconst orderInfo = ref({})\r\n\tconst WebSocketStatus = ref(true)\n\t\n\tconst translateY = reactive(520)\r\n\r\n\tconst teraRatio = computed(() => {\r\n\t\t// return parseFloat(4500)\r\n\t\treturn parseFloat(roomData.value.room?.tera_ratio || 5000)\r\n\t})\r\n\tconst scrollTop = ref();\r\n\tconst contentId = ref(null)\r\n\tconst contentShow = ref(false)\r\n\tconst handleContent = (id) => {\r\n\t\tcontentId.value = id;\r\n\t\tcontentShow.value = true;\r\n\t}\r\n\r\n\r\n\t// 计算卖家自己分得（六人平分）\r\n\tconst sellerTera = computed(() => {\r\n\t\tconst cost = parseFloat(teraCost.value || 0)\r\n\t\treturn cost > 0 ? (cost * 0.95 / 6).toFixed(2) : '0.00'\r\n\t})\r\n\r\n\t// 实际支出泰拉\r\n\tconst realTera = computed(() => {\r\n\t\tconst cost = parseFloat(teraCost.value || 0)\r\n\t\tconst self = parseFloat(sellerTera.value || 0)\r\n\t\tconst cardcost = parseFloat(cardPrice.value || 0)\r\n\t\tconst result = cost * 0.95 - self - (cardcost * 0.9)\r\n\t\treturn result > 0 ? result.toFixed(2) : '0.00'\r\n\t})\r\n\r\n\t// 预计收益（元）\r\n\tconst cashProfit = computed(() => {\r\n\t\tconst tera = parseFloat(realTera.value || 0)\r\n\t\tconst ratio = teraRatio.value\r\n\t\treturn tera > 0 ? ((tera * 10000) / ratio).toFixed(2) : '0.00'\r\n\t})\r\n\r\n\tconst cardProfit = computed(() => {\r\n\t\tconst cost = parseFloat(teraCost.value || 0)\r\n\t\tconst cardcost = parseFloat(cardPrice.value || 0)\r\n\t\treturn ((cost * 0.95 / 6 * 2 * 5 - (cost * 0.95 - cost * 0.95 / 6 - cardcost * 0.9) * 2) * 0.2).toFixed(2)\r\n\r\n\t})\r\n\r\n\tconst sumProfit = computed(() => {\r\n\t\tconst result = parseFloat(cashProfit.value) + parseFloat(cardProfit.value);\r\n\t\treturn result.toFixed(2)\r\n\r\n\t})\r\n\r\n\tconst leilongStages = ref([{\r\n\t\t\tlabel: '解散房间',\r\n\t\t\tvalue: 'disband'\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: '13阶段',\r\n\t\t\tvalue: 'stage13'\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: '斩杀',\r\n\t\t\tvalue: 'kill'\r\n\t\t}\r\n\t])\r\n\r\n\tconst leilongStage = ref('kill')\r\n\tconst gameLinkShow = ref(false)\r\n\tconst gameLink = ref(null)\n\t\n\tconst onJoinGameRoom = () => {\n\t    wx.navigateToMiniProgram({\n\t      shortLink: roomData.value.game_link,\n\t      fail: function (e) {\n\t\t\t  uni.showToast({\n\t\t\t  \ttitle: \"启动失败，请检查链接是否配置正确\",\n\t\t\t  \ticon: 'none'\n\t\t\t  })\n\t       \n\t      }\n\t    })\n\t  }\r\n\r\n\r\n\tonShow(() => {\r\n\t\tgetRoomData()\r\n\t})\r\n\tonLoad((params) => {\r\n\t\tif (params.share_uid) {\r\n\t\t\tuni.setStorageSync('share_uid', params.share_uid)\r\n\t\t\tconsole.log(\"换成分享uid\" + params.share_uid);\r\n\t\t}\r\n\r\n\t\tif (params.room_id) {\r\n\t\t\troom_id.value = params.room_id;\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"房间不存在\",\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t})\r\n\r\n\tconst waitingTimeText = ref('00:00:00')\n\tconst progressTimeText = ref('00:00:00')\n\tlet timer = null;\n\t\n\tconst startTime = ref(0)\n\tconst status = ref('')\n\t\n\t\n\tconst startTimestamp = ref(0)\n\tconst roomStatus = ref('')\n\t// let timer = null\n\t\n\t// 格式化秒为 HH:mm:ss\n\tconst formatTime = (seconds) => {\n\t  const h = String(Math.floor(seconds / 3600)).padStart(2, '0')\n\t  const m = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0')\n\t  const s = String(seconds % 60).padStart(2, '0')\n\t  return `${h}:${m}:${s}`\n\t}\n\t\n\t\n\t// const formatTime = (seconds) => {\n\t// \tconst h = String(Math.floor(seconds / 3600)).padStart(2, '0')\n\t// \tconst m = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0')\n\t// \tconst s = String(seconds % 60).padStart(2, '0')\n\t// \treturn `${h}:${m}:${s}`\n\t// }\n\t\n\t// const updateTimer = () => {\n\t// \tconst current = Math.floor(Date.now() / 1000)\n\t\t\n\t// \tconsole.log(current);\n\t\t\n\t// \tconst start = Number(startTime.value || 0)\n\t// \tconsole.log(start);\n\t// \tconst seconds = Math.max(0, current - start)\n\t// console.log(seconds);\n\t// \tif (status.value === 'waiting') {\n\t// \t\twaitingTimeText.value = formatTime(seconds)\n\t// \t} else if (status.value === 'in_progress') {\n\t// \t\tprogressTimeText.value = formatTime(seconds)\n\t// \t}\n\t// }\n\t\n\t\n\t// 每秒更新显示时间\n\tconst updateTimer = () => {\n\t  const current = Math.floor(Date.now() / 1000)\n\t  const start = startTimestamp.value\n\t  const elapsed = Math.max(0, current - start)\n\t  const formatted = formatTime(elapsed)\n\t\n\t  // console.log('[Timer Debug] 当前状态:', status.value)\n\t  // console.log('[Timer Debug] 当前时间戳:', current)\n\t  // console.log('[Timer Debug] 开始时间戳:', start)\n\t  // console.log('[Timer Debug] 已过秒数:', elapsed)\n\t  // console.log('[Timer Debug] 显示格式:', formatted)\n\t\n\t  if (status.value === 'waiting') {\n\t    waitingTimeText.value = formatted\n\t  } else if (status.value === 'in_progress') {\n\t    progressTimeText.value = formatted\n\t  }\n\t}\n\t\n\tconst initCounter = (room) => {\n\t\tclearInterval(timer) // 先清\n\t\tstatus.value = room.status\n\t\tif (status.value === 'waiting') {\n\t\t\tstartTime.value = Number(room.waiting_start_at)\n\t\t\tstartTimestamp.value = Number(room.waiting_start_at || 0)\n\t\t} else if (status.value === 'in_progress') {\n\t\t\tstartTime.value = Number(room.progress_start_at)\n\t\t\tstartTimestamp.value = Number(room.progress_start_at || 0)\n\t\t}\n\t\n\t\tupdateTimer() // 立刻更新一次\n\t\n\t\tif (status.value === 'waiting' || status.value === 'in_progress') {\n\t\t\ttimer = setInterval(() => {\n\t\t\t\tupdateTimer()\n\t\t\t}, 1000)\n\t\t}\n\t}\r\n\r\n\t\r\n\r\n\tonUnmounted(() => {\r\n\t\tclearInterval(timer)\r\n\t})\r\n\r\n\tconst handlePhras = () => {\r\n\t\tconsole.log(\"执行我\");\r\n\t\tphrasShow.value = true;\r\n\t\tif (faceShow.value) {\r\n\t\t\tfaceShow.value = false;\r\n\t\t}\r\n\t}\r\n\r\n\t// 跳转申诉页面\r\n\tconst complaintLink = () => {\r\n\t\tlinkTo(`/pages/complaint/send?room_id=${roomData.value.room?.id}`)\r\n\t}\r\n\r\n\tconst onClick = (e) => {\r\n\t\tconsole.log('点击事件触发了，type：', e)\r\n\t\tif (e.index === 1 && typeof onConfirm.value === 'function') {\r\n\t\t\tconsole.log(\"点击确定\");\r\n\t\t\tonConfirm.value() // 只在点击确认按钮时执行\r\n\t\t}\r\n\t\tdialogShow.value = false\r\n\t}\r\n\tconst onClose = () => {\r\n\t\tdialogShow.value = false\r\n\t\tconsole.log(\"关闭点击\");\r\n\t}\r\n\r\n\tconst refresh = async () => {\r\n\r\n\t\tawait getChatList()\r\n\t\tawait getRoomData()\r\n\r\n\t\tuni.showToast({\r\n\t\t\ttitle: \"刷新成功\",\r\n\t\t\ticon: 'none'\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tconst onStartGame = () => {\r\n\t\tconst positions = roomData.value.positions || []\r\n\t\tconst room = roomData.value.room || {}\r\n\r\n\t\t// 统计当前已加入的成员数（user 存在）\r\n\t\tconst joinedMembers = positions.filter(pos => pos.user).length\r\n\r\n\t\t// //判断泰拉车是否满员\r\n\t\t// if (room.is_terache && joinedMembers < 6) {\r\n\t\t// \tuni.showToast({\r\n\t\t// \t\ttitle: '泰拉车需满 6 人才能开始游戏',\r\n\t\t// \t\ticon: 'none'\r\n\t\t// \t})\r\n\t\t// \treturn\r\n\t\t// }\r\n\r\n\t\t// 普通副本至少 2 人才能开始\r\n\t\tif (!room.is_terache && joinedMembers <= 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '至少需要两名成员才能开始游戏',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\ttitle.value = \"确认开始游戏\"\r\n\t\tcontent.value = \"确定开始游戏吗？请确认房间人员准备完成\"\r\n\t\tconfirmText.value = \"确认开始\"\r\n\t\tdialogShow.value = true\r\n\r\n\t\tonConfirm.value = doStartGame\r\n\t}\r\n\r\n\tconst toView = ref('');\r\n\tconst openEmojiPanel = () => {\r\n\t\tconsole.log(\"表情\");\r\n\t}\r\n\r\n\tconst linkTo = (path, type = '') => {\r\n\t\tif (type == 'tabbar') {\r\n\t\t\tuni.switchTab({\r\n\t\t\t\turl: path\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: path\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t// const isRoomOperator = computed(() => {\r\n\t// \tconst room = roomData.value?.room\r\n\t// \tif (!room) {\r\n\t// \t\tconsole.log(\"不存在信息\");\r\n\t// \t\treturn false;\r\n\t// \t}\r\n\t// \tif (room.is_terache) {\r\n\t// \t\treturn room.joined_role_code === 'seller'\r\n\t// \t} else {\r\n\t// \t\treturn room.joined_role_code === 'dps'\r\n\t// \t}\r\n\t// })\r\n\r\n\r\n\tconst isRoomOperator = computed(() => {\r\n\t\tconst positions = roomData.value.positions || []\r\n\t\tconst room = roomData.value.room || {}\r\n\t\tif (!room || !positions.length) return false\r\n\r\n\t\t// 泰拉车：只有卖家能结算\r\n\t\tif (room.is_terache) {\r\n\t\t\treturn room.joined_role_code === 'seller'\r\n\t\t}\r\n\r\n\t\t// 包车房\r\n\t\tif (room.settle_model === 'baoche') {\r\n\t\t\tconst hasDps = positions.some(pos => pos.code === 'dps')\r\n\r\n\t\t\tif (hasDps) {\r\n\t\t\t\treturn room.joined_role_code === 'dps'\r\n\t\t\t} else {\r\n\t\t\t\treturn room.joined_role_code === 'baoche'\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// 雷龙\r\n\t\tif (room.settle_model === 'leilong') {\r\n\t\t\treturn room.joined_role_code === 'dps'\r\n\t\t}\n\t\t\n\t\r\n\t\t// 其它（普通副本）\r\n\t\treturn room.joined_role_code === 'dps'\r\n\t})\r\n\r\n\r\n\r\n\r\n\r\n\tconst onKickMember = (pos) => {\r\n\t\tconst room = roomData.value.room\r\n\t\tconst currentUserId = room?.user_id\r\n\r\n\t\t// console.log(currentUserId);\r\n\t\tconsole.log(pos);\r\n\r\n\t\t// 非房主不能操作\r\n\t\tif (!room?.is_owner) return\r\n\r\n\t\t// 空位或锁定位不能操作\r\n\t\tif (!pos.user || pos.code === 'lock') return\r\n\r\n\t\t// 不能踢自己（静默 return，无提示）\r\n\t\tif (pos.user.user_id === currentUserId) return\r\n\r\n\t\t// 确认弹窗\r\n\t\ttitle.value = \"踢出成员\"\r\n\t\tcontent.value = `确定将【${pos.user.nickname}】踢出房间吗？`\r\n\t\tconfirmText.value = \"确认踢出\"\r\n\t\tdialogShow.value = true\r\n\r\n\t\tonConfirm.value = () => doKickMember(pos.id)\r\n\t}\r\n\r\n\r\n\r\n\tconst doKickMember = async (memberId) => {\r\n\t\tconst res = await uni.$http.post('/dungeon/kick', {\r\n\t\t\troom_id: roomData.value.room.id,\r\n\t\t\tmember_id: memberId\r\n\t\t})\r\n\t\tif (res.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '已踢出',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\tgetRoomData()\r\n\t\t\t// 建议广播 WebSocket 通知更新房间\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tconst sendChat = async () => {\r\n\t\tif (!inputMsg.value.trim()) {\r\n\t\t\treturn uni.showToast({\r\n\t\t\t\ttitle: '请输入内容',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\r\n\r\n\t\tws.send({\r\n\t\t\ttype: 'chat',\r\n\t\t\troom_id: `room_${roomData.value.room.id}`,\r\n\t\t\tcontent: inputMsg.value\r\n\t\t})\r\n\r\n\t\t// const res = await uni.$http.post('/dungeon/sendChat', {\r\n\t\t// \troom_id: room_id.value,\r\n\t\t// \tcontent: inputMsg.value\r\n\t\t// })\r\n\t\tif (faceShow.value) {\r\n\t\t\tfaceShow.value = false;\r\n\t\t}\r\n\t\tinputMsg.value = '';\r\n\t\t// console.log('接口信息:', res)\r\n\r\n\t\t// if (res.code === 1) {\r\n\t\t// \tif(faceShow.value){\r\n\t\t// \t\tfaceShow.value = false;\r\n\t\t// \t}\r\n\t\t// \tinputMsg.value = '';\r\n\t\t// \tgetChatList()\r\n\r\n\t\t// \tuni.showToast({\r\n\t\t// \t\ttitle: res.msg,\r\n\t\t// \t\ticon: 'none'\r\n\t\t// \t})\r\n\r\n\t\t// }\r\n\t}\r\n\r\n\tconst phrasSend = async (value) => {\r\n\t\t// const res = await uni.$http.post('/dungeon/sendChat', {\r\n\t\t// \troom_id: room_id.value,\r\n\t\t// \tcontent: value\r\n\t\t// })\r\n\r\n\t\tws.send({\r\n\t\t\ttype: 'chat',\r\n\t\t\troom_id: `room_${roomData.value.room.id}`,\r\n\t\t\tcontent: value\r\n\t\t})\r\n\t\tphrasShow.value = false;\r\n\r\n\r\n\t\t// if (res.code === 1) {\r\n\t\t// \tphrasShow.value = false;\r\n\t\t// \t// getChatList()\r\n\t\t// \tuni.showToast({\r\n\t\t// \t\ttitle: res.msg,\r\n\t\t// \t\ticon: 'none'\r\n\t\t// \t})\r\n\r\n\t\t// }\r\n\t}\r\n\r\n\tconst getChatList = async () => {\r\n\r\n\t\tconst res = await uni.$http.post('/dungeon/chatList', {\r\n\t\t\troom_id: room_id.value,\r\n\t\t\tlast_id: null\r\n\t\t})\r\n\t\tconsole.log('接口信息:', res)\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\tmsgList.value = res.data.list;\r\n\t\t\t// 滚动到底部\n\t\t\tscrollTop.value = 0;\n\t\t\tnextTick(() => {\n\t\t\t\tscrollTop.value = undefined;\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst commonPhrases = ref([]);\r\n\tconst getCommonPhrases = async () => {\r\n\t\tconst res = await uni.$http.post('/room/getCommonPhrases', {})\r\n\t\tconsole.log('接口信息:', res)\r\n\t\tif (res.code === 1) {\r\n\t\t\tcommonPhrases.value = res.data;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst updateGameUrl = async () => {\r\n\t\tif (gameLinkInput.value == '') {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请填写游戏组队链接',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst res = await uni.$http.post('/dungeon/updateGameUrl', {\r\n\t\t\troom_id: room_id.value,\r\n\t\t\tgame_url: gameLinkInput.value\r\n\t\t})\r\n\t\tif (res.code === 1) {\r\n\t\t\tgameLinkShow.value = false;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tconst getRoomData = async () => {\r\n\t\tconst res = await uni.$http.post('/dungeon/info', {\r\n\t\t\troom_id: room_id.value\r\n\t\t})\r\n\t\tconsole.log('接口信息:', res)\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\troomData.value = res.data;\r\n\t\t\tonCheckRoom()\r\n\t\t\tinitCounter(res.data.room)\r\n\t\t\tgameLinkInput.value = roomData.value.room?.game_link;\r\n\t\t\t// modeMapTree.value = res.data\r\n\t\t}\r\n\t}\r\n\r\n\tconst onSelectPosition = async (pos) => {\r\n\r\n\t\tif (pos.code == 'lock') {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (pos.user) {\r\n\t\t\tcopy(pos.user.nickname)\r\n\t\t\t// uni.showToast({ title: '该位置已被占用', icon: 'none' })\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (roomData.value.room.is_member) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tconst res = await uni.$http.post('/dungeon/join', {\r\n\t\t\tpayload: {\r\n\t\t\t\troom_id: roomData.value.room.id,\r\n\t\t\t\tmember_id: pos.id,\r\n\t\t\t\tuser_hero_id: selectedHeroId.value // 当前用户选择的英雄 ID\r\n\t\t\t}\r\n\t\t})\r\n\r\n\r\n\t\tif (res.code == 100) {\r\n\t\t\trechargeShow.value = true;\r\n\t\t\torderInfo.value = res.data;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '加入成功',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\r\n\t\t\tws.send({\r\n\t\t\t\ttype: 'join',\r\n\t\t\t\troom_code: `room_${roomData.value.room.id}`\r\n\t\t\t})\r\n\t\t\tgetRoomData() // 重新刷新\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tconst previewImage = (e) => {\r\n\t\tuni.previewImage({\r\n\t\t\turls: [e], // 需要预览的图片http链接列表\r\n\t\t\tcurrent: '', // 当前显示图片的http链接，默认是第一个\r\n\t\t\tsuccess: function(res) {},\r\n\t\t\tfail: function(res) {},\r\n\t\t\tcomplete: function(res) {},\r\n\t\t})\r\n\t}\r\n\tconst onLeaveRoom = () => {\r\n\t\tconst room = roomData.value.room\r\n\t\tif (room.status === 'completed') {\r\n\t\t\t// 提示不能退出\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '游戏已经完成无须退出',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn false;\r\n\t\t} else if (room.is_owner && room.status === 'waiting') {\r\n\t\t\t// 提示解散房间确认\r\n\t\t\ttitle.value = \"解散房间\";\r\n\t\t\tcontent.value = \"你作为房主 退出将会解散房间\";\r\n\t\t\tconfirmText.value = \"确定解散\";\r\n\t\t} else if (room.is_owner && room.status === 'in_progress') {\r\n\t\t\t// 提示游戏中退出会解散，不结算\r\n\t\t\ttitle.value = \"解散房间\";\r\n\t\t\tcontent.value = \"游戏进行中，退出将会无法结算\";\r\n\t\t\tconfirmText.value = \"确认解散\";\r\n\t\t} else {\r\n\t\t\t// 普通成员退出提示\r\n\t\t\ttitle.value = \"退出房间\";\r\n\t\t\tcontent.value = \"退出房间将无法发言\";\r\n\t\t\tconfirmText.value = \"确认退出\";\r\n\t\t}\r\n\r\n\t\tonConfirm.value = confirmLeaveRoom\r\n\t\tdialogShow.value = true\r\n\t}\r\n\r\n\t// 开始游戏\r\n\tconst doStartGame = async () => {\r\n\t\tconst res = await uni.$http.post('/dungeon/start', {\r\n\t\t\troom_id: roomData.value.room.id\r\n\t\t})\r\n\t\tif (res.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '游戏已开始',\r\n\t\t\t\ticon: 'success'\r\n\t\t\t})\r\n\t\t\t// getRoomData()\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg || '开始失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t// 重新等待执行\r\n\tconst doResetToWait = async () => {\r\n\t\tconst result = await uni.$http.post('/dungeon/resetWait', {\r\n\t\t\troom_id: roomData.value.room.id\r\n\t\t})\r\n\t\tif (result.code === 1) {\r\n\t\t\t// getRoomData()\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: result.msg || '失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\t//重新等待\r\n\tconst onResetToWait = async () => {\r\n\t\ttitle.value = \"提示\";\r\n\t\tcontent.value = \"将房间变为等候中，和长按踢人，重新组人\";\r\n\t\tconfirmText.value = \"确认变更\";\r\n\t\tdialogShow.value = true;\r\n\t\t// 绑定弹窗确认的操作\r\n\t\tonConfirm.value = doResetToWait\r\n\t}\r\n\r\n\tconst doCompleteRoom = async () => {\r\n\r\n\t\tif (settlementImage.value == \"\" && leilongStage.value != 'disband') {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: \"请上传结算截图\",\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tlet SettlementUrl = '/dungeon/completeRoom';\r\n\t\tif (roomData.value.room.settle_model == 'normal') {\r\n\t\t\tSettlementUrl = '/dungeon/completeRoom';\r\n\t\t}\r\n\t\tif (roomData.value.room.settle_model == 'terache') {\r\n\t\t\tSettlementUrl = '/dungeon/submitSettlement';\r\n\t\t}\r\n\r\n\t\tif (roomData.value.room.settle_model == 'leilong') {\r\n\t\t\tSettlementUrl = '/dungeon/completeLeilongRoom';\r\n\t\t}\r\n\t\tif (roomData.value.room.settle_model == 'baoche') {\r\n\t\t\tSettlementUrl = '/dungeon/completeBaocheRoom';\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t\tconst imagesList = settlementImage.value.join(',')\r\n\t\tconst res = await uni.$http.post(SettlementUrl, {\r\n\t\t\troom_id: roomData.value.room.id,\r\n\t\t\timage_url: imagesList,\r\n\t\t\tstage: leilongStage.value,\r\n\t\t\ttera_cost: parseFloat(teraCost.value || 0), // 花费泰拉（单位：万）← 用户填的\r\n\t\t\tis_gold_car: isGoldCar.value, // 是否金币车（0/1）← 用户选择\r\n\t\t\thas_card: hasCard.value, // 是否有卡片（0/1）← 用户勾选\r\n\t\t\tcard_price: hasCard.value ? parseFloat(cardPrice.value || 0) : 0 // 卡片拍卖价（单位：万）\r\n\t\t})\r\n\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg || '',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\tcompleteShow.value = false;\r\n\t\t\t// 可刷新房间状态或跳转\r\n\t\t\t// getRoomData()\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg || '开始失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tconst onCheckRoom = async () => {\r\n\r\n\r\n\t\tif (roomData.value.room.status == 'completed' && !roomData.value.room.is_member) {\r\n\t\t\ttitle.value = \"提示\";\r\n\t\t\tcontent.value = \"该房间已经完成\";\r\n\t\t\tconfirmText.value = \"更多房间\";\r\n\t\t\tdialogShow.value = true;\r\n\t\t\t// 绑定弹窗确认的操作\r\n\t\t\tonConfirm.value = toHome\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tconst positions = roomData.value.positions || []\r\n\t\t// 统计当前已加入的成员数\r\n\t\tconst joinedMembers = positions.filter(pos => pos.user).length;\r\n\t\tif (positions.length == joinedMembers && !roomData.value.room.is_member) {\r\n\t\t\ttitle.value = \"提示\";\r\n\t\t\tcontent.value = \"该房间已满员\";\r\n\t\t\tconfirmText.value = \"更多房间\";\r\n\t\t\tdialogShow.value = true;\r\n\t\t\t// 绑定弹窗确认的操作\r\n\t\t\tonConfirm.value = toHome\r\n\t\t}\r\n\t}\r\n\tconst toHome = () => {\r\n\t\tuni.switchTab({\r\n\t\t\turl: \"/pages/index/index\"\r\n\t\t})\r\n\t}\r\n\tconst checkMemberAccess = (callback) => {\r\n\t\tconsole.log(roomData.value.room);\r\n\t\tif (!roomData.value.room?.is_member) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '请先加入房间',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\t// 已加入房间时执行回调\r\n\t\tcallback && callback()\r\n\t}\r\n\r\n\tconst getRoleColor = (code) => {\r\n\t\tif (code === 'leader') return 'blue'\r\n\t\tif (code === 'dps') return 'red'\r\n\t\tif (code === 'support') return 'green'\r\n\t\tif (code === 'leech') return 'green'\r\n\t\tif (code === 'baoche') return code\r\n\t\tif (code === 'team') return code\r\n\t\tif (code === 'deck') return code\r\n\t\tif (code === 'lock') return code\r\n\t\tif (code === 'seller') return code\r\n\t\treturn ''\r\n\t}\r\n\r\n\tconst getRoleIcon = (code) => {\r\n\t\tconst map = {\r\n\t\t\tleader: 'https://dnf.hanyunkeji.cn/static/room/09.png',\r\n\t\t\tdps: 'https://dnf.hanyunkeji.cn/static/room/10.png',\r\n\t\t\tsupport: 'https://dnf.hanyunkeji.cn/static/room/11.png'\r\n\t\t}\r\n\t\treturn map[code] || ''\r\n\t}\r\n\t// 退出房间确认\r\n\tconst confirmLeaveRoom = async () => {\r\n\t\tconst result = await uni.$http.post('/dungeon/leave', {\r\n\t\t\troom_id: roomData.value.room.id\r\n\t\t})\r\n\t\tif (result.code === 1) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: result.msg || '退出失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\t// getRoomData()\r\n\t\t\treturn true;\r\n\t\t\t// 可以返回房间列表或首页\r\n\t\t\t// uni.navigateBack()\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: result.msg || '退出失败',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tconst copy = (val) => {\r\n\t\tuniCopy({\r\n\t\t\tcontent: val,\r\n\t\t\ttitle: \"角色名字已复制~\",\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: res,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\terror: (e) => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: e,\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 3000,\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tconst uploadSuccess = (e) => {\r\n\t\tconsole.log(e)\r\n\t\t//上传成功回调，处理服务器返回数据【此处根据实际返回数据进行处理】\r\n\t\tlet res = JSON.parse(e.res.data.replace(/\\ufeff/g, \"\") || \"{}\")\r\n\t\tuploadStatus.value = e.status\r\n\t\tif (res.data.url) {\r\n\t\t\tsettlementImage.value.push(res.data.url);\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t// const audio = uni.createInnerAudioContext()\r\n\t// audio.src = `/static/sounds/start.mp3`\r\n\t// audio.play()\r\n\r\n\tconst uploadError = (e) => {\r\n\t\tuploadStatus.value = e.status\r\n\t\tuni.showModal({\r\n\t\t\tcontent: JSON.stringify(e)\r\n\t\t})\r\n\t}\r\n\r\n\tconst pasteText = () => {\r\n\t\tuni.getClipboardData({\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\t// 粘贴的内容\r\n\t\t\t\tgameLinkInput.value = res.data;\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '粘贴成功',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 1000\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '粘贴失败，请重试',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 1000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tconst focus = ref(false)\r\n\tconst faceShow = ref(false)\r\n\tconst inputaRef = ref(null)\r\n\tconst focusChange = () => {\r\n\t\tfocus.value = true;\r\n\t}\r\n\tconst blurChange = () => {\r\n\t\tfocus.value = false\r\n\t}\r\n\tconst faceChange = () => {\r\n\t\tfaceShow.value = !faceShow.value;\r\n\t\tuni.hideKeyboard()\r\n\t\t// // #ifdef APP-NVUE\r\n\t\tinputaRef.value.blur()\r\n\t\t// // #endif\r\n\t}\r\n\tconst faceClick = (item) => {\r\n\t\tconsole.log(item);\r\n\t\tif (!faceShow.value) return;\r\n\t\tinputMsg.value += item;\r\n\t}\r\n\r\n\tconst delMsg = () => {\r\n\t\tif (!inputMsg.value) return;\r\n\t\tlet number = 1;\r\n\t\tif (inputMsg.value.length > 1) {\r\n\t\t\tnumber = inputMsg.value.substr(inputMsg.value.length - 2, inputMsg.value.length).search(\r\n\t\t\t\t/(\\ud83c[\\udf00-\\udfff])|(\\ud83d[\\udc00-\\ude4f])|(\\ud83d[\\ude80-\\udeff])/i) == -1 ? 1 : 2;\r\n\t\t}\r\n\t\tinputMsg.value = inputMsg.value.substr(0, inputMsg.value.length - number);\r\n\t}\r\n\r\n\r\n\t\r\n\r\n\t\r\n\r\n\r\n\tconst scrollTo = ref('')\r\n\r\n\t\r\n\r\n\r\n\tconst innerAudioContext = uni.createInnerAudioContext();\r\n\tinnerAudioContext.autoplay = true;\r\n\r\n\r\n\tconst destroyAudio = () => {\r\n\t\tif (innerAudioContext) {\r\n\t\t\tinnerAudioContext.stop();\r\n\t\t\tinnerAudioContext.destroy();\r\n\t\t\tinnerAudioContext = null;\r\n\t\t}\r\n\t};\r\n\t// 创建音频\r\n\tconst createAudio = (audioSrc) => {\r\n\t\t// destroyAudio(); // 每次创建将上一个实例销毁\r\n\r\n\t\tsetTimeout(() => {\r\n\t\t\tinnerAudioContext.src = audioSrc;\r\n\t\t}, 100)\r\n\t\t// 播放事件\r\n\t\tinnerAudioContext.onPlay(() => {\r\n\t\t\tconsole.log(\"play audio\");\r\n\t\t});\r\n\t\t// 播放结束事件\r\n\t\tinnerAudioContext.onEnded(() => {\r\n\t\t\tconsole.log(\"ended audio\");\r\n\t\t});\r\n\t\t// 播放错误事件\r\n\t\tinnerAudioContext.onError((error) => {\r\n\t\t\tconsole.log(\"play audio error\", error);\r\n\t\t\t// 兼容ios（估计是官方bug），可能是ios资源没准备好时，播放会发生错误返回errCode为-1，这时需要重新播放，直至播放成功\r\n\t\t\tif (error.errCode === -1) {\r\n\t\t\t\tcreateAudio(audioSrc);\r\n\t\t\t} else {\r\n\t\t\t\t// 比如文件不存在等情况，会进入到这个提示\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: \"播放失败：\" + error.errMsg,\r\n\t\t\t\t\ticon: \"none\",\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t\t// innerAudioContext.play();\r\n\t};\r\n\r\n\r\n\r\n\t\r\n\r\n\tonMounted(async () => {\r\n\t\tawait getRoomData()\r\n\t\tawait getChatList()\r\n\t\tawait getCommonPhrases()\r\n\t\t// if(roomData.room?.status === 'waiting' && isRoomOperator && roomData.value?.room.channel === 'wechat' && ['terache','baoche'].includes(roomData.value.room?.map_code) && !roomData.value.room.game_link_status){\r\n\t\t// \tgameLinkShow.value = true;\r\n\t\t// }\r\n\r\n\t\tif (isRoomOperator.value && roomData.value?.room.status === 'waiting' && roomData.value?.room\r\n\t\t\t.channel === 'wechat' && ['terache', 'baoche'].includes(roomData.value.room?.settle_model) && !roomData\r\n\t\t\t.value.room.game_link_status) {\r\n\t\t\tgameLinkShow.value = true;\r\n\t\t}\r\n\r\n\t\t// playJoinSound()\r\n\t\tws.on('room_update', (msg) => {\r\n\t\t\tconsole.log('收到 room_update:', msg.data)\r\n\t\t\troomData.value = msg.data\r\n\t\t\tonCheckRoom()\r\n\t\t\tinitCounter(msg.data.room)\r\n\t\t\t// positions.value = msg.data.positions\r\n\t\t})\r\n\r\n\r\n\t\tws.on('chat', (msg) => {\r\n\t\t\tmsgList.value.push(msg.data)\r\n\t\t\t// 滚动到底部\n\t\t\tscrollTop.value = 0;\n\t\t\tnextTick(() => {\n\t\t\t\tscrollTop.value = undefined;\n\t\t\t})\r\n\t\t})\r\n\r\n\t\tws.on('member_join_voice', (msg) => {\r\n\t\t\tconst num = msg.joined_number\r\n\t\t\tif (num >= 2 && num <= 6) {\r\n\t\t\t\t// playAudio(`/static/sounds/${num}.mp3`);\r\n\t\t\t\tcreateAudio(`/static/sounds/${num}.mp3`);\r\n\t\t\t\t// playNumberVoice(num)\r\n\t\t\t}\r\n\t\t})\r\n\t\tws.on('start', (msg) => {\r\n\t\t\t// playAudio('/static/sounds/start.mp3');\r\n\t\t\tcreateAudio('/static/sounds/start.mp3');\r\n\t\t\t// const audio = uni.createInnerAudioContext()\r\n\t\t\t// audio.src = `/static/sounds/start.mp3`\r\n\t\t\t// audio.play()\r\n\r\n\t\t\t// audio.onEnded(() => audio.destroy())\r\n\t\t\t// audio.onError(() => audio.destroy())\r\n\t\t})\r\n\t\tws.on('completeRoom', (res) => {\r\n\t\t\t// console.log(res);\r\n\t\t\tif (res.data.show_completed_modal) {\r\n\t\t\t\ttitle.value = \"组队完成\";\r\n\t\t\t\tcontent.value = \"结算阶段： 是否存在未通关、虚假结算、违规竞拍、等问题?\";\r\n\t\t\t\tconfirmText.value = \"发起申诉\";\r\n\t\t\t\tdialogShow.value = true;\r\n\t\t\t\t// 绑定弹窗确认的操作\r\n\t\t\t\tonConfirm.value = complaintLink\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\t\tws.on('kicked', () => {\r\n\t\t\ttitle.value = '提示'\r\n\t\t\tcontent.value = '你已被房主踢出该房间'\r\n\t\t\tconfirmText.value = '返回首页'\r\n\t\t\tdialogShow.value = true\r\n\r\n\t\t\tonConfirm.value = () => {\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.error('页面跳转失败:', err)\r\n\t\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\r\n\t})\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n\t.room-container {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\ttop: 0;\r\n\t\tbackground-color: #fff;\r\n\t\tcolor: #fff;\r\n\t\theight: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\t// justify-content: space-between;\r\n\t}\n\t\n\t\n\t\n\t\n\t\n\t.message-wrap {\n\t\theight: 0;\n\t\tflex: 1;\n\t\n\t\t.scroll-list {\n\t\t\theight: 100%;\n\t\t\ttransform: scaleY(-1);\n\t\t}\n\t\n\t\t.message-item-wrap {\n\t\t\tmin-height: 100%;\n\t\t\ttransform: scaleY(-1);\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: flex-start;\n\t\t\tpadding: 40rpx;\n\t\t}\n\t\n\t\t.loading-wrap {\n\t\t\ttransform: scaleY(-1);\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tjustify-content: center;\n\t\t\tpadding: 10rpx;\n\t\t}\n\t}\r\n\r\n\t.room-tag-icon {\r\n\t\twidth: 30rpx;\r\n\t\theight: 30rpx;\r\n\t}\r\n\r\n\t.room-header {\r\n\t\t/* background-image: url('https://dnf.hanyunkeji.cn/static/room/20.png'); */\r\n\t\tbackground-size: 100% 100%;\r\n\t\tposition: relative;\r\n\t\theight: 380rpx;\r\n\t}\r\n\r\n\t.room-bg {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-bottom-left-radius: 24rpx;\r\n\t\tborder-bottom-right-radius: 24rpx;\r\n\t}\r\n\r\n\t.fui-nav__left {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tbackground: rgb(0, 0, 0, 0.8);\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.room-top-info {\r\n\t\theight: 60rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\tbackground: rgb(0, 0, 0, 0.8);\r\n\t\tborder-radius: 50rpx;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 30rpx;\r\n\t\tfont-size: 25rpx;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\r\n\t.zone-icon {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t}\r\n\r\n\t.zone-tag {\r\n\t\tmargin: 0rpx 15rpx;\r\n\t}\r\n\r\n\t.room-content {\r\n\t\t/* height: 100%;\r\n\tposition: relative; */\r\n\t}\r\n\r\n\t.tag-icon {\r\n\t\twidth: 25rpx;\r\n\t\theight: 25rpx;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\r\n\t.room-overlay {\r\n\t\tposition: absolute;\r\n\t\t/* top: 0; */\r\n\t\tbottom: 10rpx;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\t/* height: 100rpx; */\r\n\t\tbottom: 20rpx;\r\n\t\t// padding: 0rpx 20rpx;\r\n\t}\r\n\r\n\t.team-tips-item {\r\n\t\tcolor: red;\r\n\t\tfont-size: 26rpx;\r\n\t\tmargin: 5rpx 0rpx;\r\n\t}\r\n\r\n\r\n\r\n\t.room-status {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\r\n\t.room-time {\r\n\t\tmargin-left: auto;\r\n\t}\r\n\r\n\t.room-tag {\r\n\t\tborder-radius: 0rpx 50rpx 50rpx 0rpx;\r\n\t}\r\n\r\n\t.room-time {\r\n\t\tborder-radius: 50rpx 0rpx 0rpx 50rpx;\r\n\t}\r\n\r\n\t.room-tag,\r\n\t.room-time {\r\n\t\tbackground: rgba(0, 0, 0, 0.8);\r\n\t\t// border-radius: 50rpx;\r\n\t\tpadding: 15rpx 30rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.room-tag-label {\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n\r\n\t.room-members {\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.room-row {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\r\n\r\n\t.role {\r\n\t\tfont-size: 24rpx;\r\n\t\tpadding: 2rpx 12rpx;\r\n\t\tborder-radius: 24rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.role-icon {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t\tmargin-right: 5rpx;\r\n\t}\r\n\r\n\t.blue {\r\n\t\tcolor: #0284FE;\r\n\t}\r\n\r\n\t.red {\r\n\t\tcolor: #ff3a3a;\r\n\t}\r\n\r\n\t.green {\r\n\t\tcolor: #22cc88;\r\n\t}\r\n\r\n\t.user-nickname {\r\n\t\tfont-size: 38rpx;\r\n\t}\r\n\r\n\t.green-title {\r\n\t\tbackground: #22cc88;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role.blue {\r\n\t\tbackground: #0284FE;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role.red {\r\n\t\tbackground: #ff3a3a;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role.green {\r\n\t\tbackground: #22cc88;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.fail {\r\n\t\tfont-size: 20rpx;\r\n\t\tcolor: #ccc;\r\n\t}\r\n\r\n\t.room-icon-lock,\r\n\t.room-icon-chair {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tbackground: #444;\r\n\t\tborder-radius: 20rpx;\r\n\t}\r\n\r\n\t.room-chat {\r\n\t\t// padding: 0 20rpx;\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.Profit {\r\n\t\tcolor: #007aff;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 500;\r\n\t\tmargin: 10rpx 0rpx;\r\n\t}\r\n\r\n\t.sumProfit {\r\n\t\tcolor: red;\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 500;\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.chat-msg {\r\n\t\t/* background: #2a2a38; */\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 12rpx;\r\n\t\tmargin-bottom: 12rpx;\r\n\t\tcolor: #000;\r\n\t}\r\n\r\n\t.chat-tag {\r\n\t\tcolor: #58a6ff;\r\n\t\tmargin-right: 8rpx;\r\n\t}\r\n\r\n\t.chat-role {\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 5rpx 20rpx;\r\n\t\tborder-radius: 30rpx;\r\n\t\tcolor: #fff;\r\n\t\tmargin: 0rpx 10rpx;\r\n\t}\r\n\r\n\t.chat-role.green {\r\n\t\tcolor: #48d6a2;\r\n\t\tmargin-right: 8rpx;\r\n\t}\r\n\r\n\t.chat-text {\r\n\t\tcolor: #333 !important;\r\n\t}\r\n\r\n\t.seller-layout {}\r\n\r\n\t.tera-aown {}\r\n\r\n\t.tera-ratio {\r\n\t\twidth: 131rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground: #EF6A22;\r\n\t\t// opacity: 0.8;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-weight: 500;\r\n\t\tfont-size: 23rpx;\r\n\t\tline-height: 40rpx;\r\n\t\tcolor: #fff;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t.room-chat {\r\n\t\tpadding: 0rpx 20rpx;\r\n\t}\r\n\r\n\t.chat-msg {\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.chat-header {\r\n\t\tdisplay: flex;\r\n\t\talign-items: flex-start;\r\n\t}\r\n\r\n\t.chat-meta {\r\n\t\tmargin-left: 20rpx;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.chat-nickname {\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\r\n\t.chat-tag {\r\n\t\tmargin-right: 12rpx;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.chat-role {\r\n\t\tfont-size: 20rpx;\r\n\t\t// opacity: 0.8;\r\n\t}\r\n\r\n\t.chat-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t.room-footer {\r\n\t\t// padding: 20rpx;\r\n\t\tbackground: #f8f8f8;\r\n\t\tz-index: 1;\r\n\t\t/* border-top: 1rpx solid #333; */\r\n\t}\r\n\r\n\t.input-layout {\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.chat-shortcuts {\r\n\t\tdisplay: flex;\r\n\t\tgap: 20rpx;\r\n\t\tmargin-bottom: 16rpx;\r\n\t\t// padding: 20rpx;\r\n\t}\r\n\r\n\t.shortcut {\r\n\t\tbackground: #fff;\r\n\t\tcolor: #000;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\t// margin: 20rpx;\r\n\t}\r\n\r\n\t.icon-escaped {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t}\r\n\r\n\t.chat-input {\r\n\t\theight: 82rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 10 rpx;\r\n\t\tpadding: 16rpx;\r\n\t}\r\n\r\n\t.input {\r\n\t\tflex: 1;\r\n\t\tbackground: transparent;\r\n\t\tcolor: #000;\r\n\t\tfont-size: 26rpx;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t}\r\n\r\n\t.icon-face,\r\n\t.icon-send {\r\n\t\twidth: 60rpx;\r\n\t\theight: 60rpx;\r\n\t\tmargin-left: 16rpx;\r\n\t}\r\n\r\n\r\n\r\n\r\n\t.room-members-grid {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\tgap: 24rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tjustify-items: center;\r\n\t}\r\n\r\n\t.room-player {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.avatar-frame {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tposition: relative;\r\n\t\tmargin-bottom: 6rpx;\r\n\t}\r\n\r\n\t.avatar-bg {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.avatar {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tposition: absolute;\r\n\t\ttop: 8rpx;\r\n\t\tleft: 8rpx;\r\n\t\tz-index: 2;\r\n\t}\r\n\r\n\t.room-icon-placeholder {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t}\r\n\r\n\r\n\t.room-icon-placeholder {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t}\r\n\r\n\t.room-actions {\r\n\t\tposition: absolute;\r\n\t\tbottom: 500rpx;\r\n\t\tright: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 30rpx;\r\n\t}\r\n\r\n\t.start-btn {\r\n\t\tbackground: #1677ff;\r\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx rgba(33, 56, 225, 0.98);\r\n\t}\r\n\r\n\t.refresh-btn {\r\n\t\tbackground: #5b2ae5;\r\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx rgb(6 30 255);\r\n\t}\r\n\r\n\t.reset-btn {\r\n\t\tbackground: #1677ff;\r\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx rgba(33, 56, 225, 0.98);\r\n\t}\n\t\n\t\n\t.game-link-btn {\n\t\tbackground: rgba(128, 0, 2, 1.0);\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx #fc0107;\n\t}\r\n\r\n\t.forced-two-line {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.end-btn {\r\n\t\tbackground: rgba(128, 0, 2, 1.0);\r\n\t\tbox-shadow: 0rpx 4rpx 9rpx 0rpx #fc0107;\r\n\t}\r\n\r\n\t.room-action {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 25rpx;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n\r\n\t.room-action image {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t\tmargin-bottom: 4rpx;\r\n\t}\r\n\r\n\t.leave-room {\r\n\t\twidth: 160rpx;\r\n\t\theight: 160rpx;\r\n\t\tbackground: url('https://dnf.hanyunkeji.cn/static/room/12.png');\r\n\t\tbackground-size: 100% 100%;\r\n\t}\r\n\r\n\r\n\t.room-cards {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(3, 1fr);\r\n\t\tgap: 24rpx;\r\n\t\tpadding: 24rpx;\r\n\t}\r\n\r\n\t.role-avatar {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 5rpx;\r\n\t}\r\n\r\n\t.role-info {}\r\n\r\n\t.role-meta {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t/* gap: 10rpx; */\r\n\t\tcolor: #333;\r\n\t\tmargin: 5rpx 0rpx;\r\n\t}\r\n\r\n\t.role-level {\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.chat-role.dps {\r\n\t\tbackground: #ff4d4f;\r\n\t}\r\n\r\n\t.chat-role.leader {\r\n\t\tbackground: #1677ff;\r\n\t}\r\n\r\n\t.chat-role.support {\r\n\t\tbackground: #00c292;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.chat-role.baoche {\r\n\t\tbackground: #5b2ae5;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.chat-role.team {\r\n\t\tbackground: #fbbd12;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.chat-role.deck {\r\n\t\tbackground: #0198cc;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\r\n\r\n\t.lock {\r\n\t\tcolor: #000;\r\n\t}\r\n\r\n\t.role-tag {\r\n\t\tfont-size: 20rpx;\r\n\t\tpadding: 4rpx 10rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.red {\r\n\t\tbackground: #ff4d4f;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.blue {\r\n\t\tbackground: #1677ff;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.green {\r\n\t\tbackground: #00c292;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\r\n\t.role-tag.baoche {\r\n\t\tbackground: #5b2ae5;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.team {\r\n\t\tbackground: #fbbd12;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.baoche {\r\n\t\tcolor: #5b2ae5;\r\n\t}\r\n\r\n\t.team {\r\n\t\tcolor: #fbbd12;\r\n\t}\r\n\r\n\t.deck {\r\n\t\tcolor: #0198cc;\r\n\t}\r\n\r\n\t.chat-role.seller {\r\n\t\tbackground: #EF6A22;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.deck {\r\n\t\tbackground: #0198cc;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.role-tag.seller {\r\n\t\tbackground: #EF6A22;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.seller {\r\n\t\tcolor: #EF6A22;\r\n\t}\r\n\r\n\t.role-tag.lock {\r\n\t\tbackground: #000;\r\n\t}\r\n\r\n\r\n\t.role-desc {\r\n\t\tfont-size: 22rpx;\r\n\t\tcolor: #888;\r\n\t\ttext-align: center;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\r\n\r\n\t.role-card.dps {\r\n\t\tborder: 1rpx solid #ff4d4f !important;\r\n\t}\r\n\r\n\t.role-card.leader {\r\n\t\tborder: 1rpx solid #1677ff !important;\r\n\t}\r\n\r\n\t.role-card.support {\r\n\t\tborder: 1rpx solid #00c292 !important;\r\n\t}\r\n\r\n\t.role-card.baoche {\r\n\t\tborder: 1rpx solid #5b2ae5 !important;\r\n\t}\r\n\r\n\t.role-card.team {\r\n\t\tborder: 1rpx solid #fbbd12 !important;\r\n\t}\r\n\r\n\t.role-card.deck {\r\n\t\tborder: 1rpx solid #0198cc !important;\r\n\t}\r\n\r\n\t.role-card.lock {\r\n\t\tborder: 1rpx solid #000 !important;\r\n\t}\r\n\r\n\t.role-card.seller {\r\n\t\tborder: 1rpx solid #EF6A22 !important;\r\n\t}\r\n\r\n\r\n\r\n\t.role-card {\r\n\t\t/* background: #f8f9fa; */\r\n\t\tborder-radius: 10rpx;\r\n\t\theight: 110rpx;\r\n\t\t/* padding: 16rpx; */\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-right: 10rpx;\r\n\t\tjustify-content: center;\r\n\t\t/* gap: 12rpx; */\r\n\t\tposition: relative;\r\n\t\tborder: 1rpx #ccc solid;\r\n\t}\r\n\r\n\t.role-tag-box {\r\n\t\tposition: absolute;\r\n\t\ttop: -20rpx;\r\n\t\tright: -10rpx;\r\n\t\tz-index: 1;\r\n\t}\r\n\r\n\t.phrase-popup {\r\n\t\tposition: relative;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\t/* padding: 0rpx 40rpx; */\r\n\t}\r\n\r\n\r\n\t.phras-header {\r\n\t\ttext-align: left;\r\n\t\tfont-size: 30rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tcolor: #000;\r\n\t\tborder-bottom: 1rpx solid #eee;\r\n\t}\r\n\r\n\t.complete-popup {\r\n\t\tposition: relative;\r\n\t\tbackground-color: #fff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 70vh;\r\n\t\t/* padding: 0rpx 40rpx; */\r\n\t}\r\n\r\n\t.phras-list {}\r\n\r\n\t.phras-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 30rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-size: 26rpx;\r\n\t\t// border-bottom: 1rpx solid #ccc;\r\n\t}\r\n\r\n\t.phras-send {\r\n\t\tcolor: #3366ff;\r\n\t\tborder-radius: 26rpx;\r\n\t\tpadding: 5rpx 15rpx;\r\n\t\tborder: 1rpx solid #3366ff;\r\n\t}\r\n\r\n\r\n\t/* 弹窗头 */\r\n\t.popup-header {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tcolor: #007aff;\r\n\t\tborder-bottom: 1rpx solid #eee;\r\n\t}\r\n\r\n\t.fui-icon__close {\r\n\t\tposition: absolute;\r\n\t\ttop: 24rpx;\r\n\t\tright: 54rpx;\r\n\r\n\t}\r\n\r\n\t.popup-alert {\r\n\t\tbackground-color: #fff0f0;\r\n\t\tcolor: #f53f3f;\r\n\t\tfont-size: 28rpx;\r\n\t\tpadding: 25rpx;\r\n\t\t/* border-radius: 12rpx; */\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 10rpx;\r\n\t}\r\n\r\n\r\n\r\n\t// .label {\r\n\t// \tfont-size: 28rpx;\r\n\t// \tcolor: #333;\r\n\t// \tmargin-bottom: 20rpx;\r\n\t// \tdisplay: block;\r\n\t// }\r\n\r\n\t.label.required::before {\r\n\t\tcontent: '*';\r\n\t\tcolor: red;\r\n\t\tmargin-right: 6rpx;\r\n\t}\r\n\r\n\t.label {\r\n\t\twidth: 300rpx;\r\n\t\tfont-weight: bold;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.form-group {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 10rpx 0;\r\n\t\tcolor: #333;\r\n\t\tmargin: 20rpx 30rpx;\r\n\t}\r\n\r\n\t.radio-box,\r\n\t.input-box {\r\n\t\tflex: 1;\r\n\t\ttext-align: right;\r\n\t\tcolor: #333;\r\n\t\tfont-size: 30rpx !important;\r\n\t}\r\n\r\n\t.input-with-unit {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: 10rpx;\r\n\t}\r\n\r\n\t.unit {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #888;\r\n\t}\r\n\r\n\t.circle-radio-group {\r\n\t\tdisplay: flex;\r\n\t\tgap: 40rpx;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.circle-radio-item {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t/* 外圈默认灰色 */\r\n\t.circle-outer {\r\n\t\twidth: 32rpx;\r\n\t\theight: 32rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tborder: 2rpx solid #999;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-right: 10rpx;\r\n\t\t// background: red;\r\n\t}\r\n\r\n\t/* 内部圆点 */\r\n\t.circle-inner {\r\n\t\twidth: 14rpx;\r\n\t\theight: 14rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: #007aff;\r\n\t}\r\n\r\n\t/* ✅ 选中状态时 外圈变蓝 */\r\n\t.circle-radio-item.selected .circle-outer {\r\n\t\tborder-color: #007aff;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t/* .upload-box {\r\n\t  width: 200rpx;\r\n\t  height: 200rpx;\r\n\t  background-color: #f8f8f8;\r\n\t  border-radius: 16rpx;\r\n\t  display: flex;\r\n\t  flex-direction: column;\r\n\t  justify-content: center;\r\n\t  align-items: center;\r\n\t  border: 2rpx dashed #ccc;\r\n\t} */\r\n\r\n\r\n\r\n\t.upload-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.popup-footer {\r\n\t\t// margin: 30rpx;\r\n\t\twidth: 100%;\r\n\t\tpadding: 30rpx;\r\n\t\tposition: absolute;\r\n\t\tbottom: 20rpx;\r\n\t}\r\n\r\n\t.submit-btn {\r\n\t\tbackground-color: #007aff;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: 30rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 24rpx 0;\r\n\t\twidth: 100%;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\r\n\t.room-summary {\r\n\t\tdisplay: flex;\r\n\t\theight: 300rpx;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground: #fff;\r\n\t\tborder-top: 1rpx solid #eee;\r\n\t\tposition: relative;\r\n\t}\n\t\n\t\r\n\r\n\t.summary-left {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.summary-item {\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n\r\n\t.summary-label {\r\n\t\t// font-weight: bold;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #888;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\r\n\t.value {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #888;\r\n\t}\r\n\r\n\t.images {\r\n\t\tdisplay: flex;\r\n\t\tgap: 10rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\r\n\t.settle-img {\r\n\t\twidth: 160rpx;\r\n\t\theight: 100rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\tobject-fit: cover;\r\n\t}\r\n\r\n\t.summary-right {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: flex-end;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.stamp {\r\n\t\twidth: 150rpx;\r\n\t\theight: 150rpx;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\t// flex-direction: column;\r\n\t\tgap: 10rpx;\r\n\t}\r\n\r\n\t.btn-outline {\r\n\t\tbackground: #fff;\r\n\t\tcolor: #ff4d4f;\r\n\t\tborder: 1rpx solid #ff4d4f;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.btn-primary {\r\n\t\tbackground: #007aff;\r\n\t\tcolor: #fff;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tfont-size: 26rpx;\r\n\t}\r\n\r\n\t.btn-default {\r\n\t\tbox-sizing: border-box;\r\n\t\theight: 60rpx !important;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.bottom-status {\r\n\t\tposition: absolute;\r\n\t\tright: 50rpx;\r\n\t\tbottom: 200rpx;\r\n\t}\r\n\r\n\t.bottom-status-img {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\t.fui-face__hidden {\r\n\t\ttransform: translate3d(0, 520rpx, 0);\r\n\t}\r\n\r\n\r\n\t.fui-face__show {\r\n\t\ttransform: translate3d(0, 0, 0);\r\n\r\n\t\ttransform: translateY(0);\r\n\t}\r\n\r\n\r\n\t.fui-scroll__box {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.fui-face__box {\r\n\t\twidth: 100%;\r\n\t\t// width: 750rpx;\r\n\t\theight: 520rpx;\r\n\t\tbackground-color: #f8f8f8;\r\n\t}\r\n\r\n\t.fui-face__inner {\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tbox-sizing: border-box;\r\n\t\tflex-direction: row;\r\n\t\tflex-wrap: wrap;\r\n\t\tpadding: 32rpx 2rpx;\r\n\t}\r\n\r\n\t.fui-face__text {\r\n\t\tdisplay: flex;\r\n\t\twidth: 106rpx;\r\n\t\tfont-size: 60rpx;\r\n\t\tpadding: 16rpx 0;\r\n\t\ttext-align: center;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\t/* #ifdef H5 */\r\n\t\tcursor: pointer;\r\n\t\t/* #endif */\r\n\t}\r\n\r\n\t.fui-del__box {\r\n\t\tposition: absolute;\r\n\t\tright: 32rpx;\r\n\t\tbottom: 32rpx;\r\n\t\twidth: 120rpx;\r\n\t\theight: 72rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.fui-del__box:active {\r\n\t\tbackground-color: #ddd;\r\n\t}\r\n\r\n\t.game-link-popup-header {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tcolor: #000;\r\n\t\tfont-weight: 500;\r\n\t\tborder-bottom: 1rpx solid #eee;\r\n\t}\r\n\r\n\t.fui-icon__close {\r\n\t\tposition: absolute;\r\n\t\ttop: 24rpx;\r\n\t\tright: 54rpx;\r\n\r\n\t}\r\n\r\n\t.game-link-card-box {\r\n\t\tposition: relative;\r\n\t\t// padding: 20rpx;\r\n\t}\r\n\r\n\t.game-link-content {\r\n\t\tpadding: 0rpx 20rpx;\r\n\t\theight: 230rpx;\r\n\t}\r\n\r\n\t.link-input-box {\r\n\t\tmargin: 30rpx 0rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.paste-btm {\r\n\t\tmargin: 0rpx 20rpx;\r\n\t\tbackground-color: #3366ff;\r\n\t\tcolor: #fff;\r\n\t\tpadding: 15rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.game-link-input {\r\n\t\tcolor: #333;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.link-desc {\r\n\t\tmargin-top: 40rpx;\r\n\t\tcolor: darkred;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t.link-btn-layout {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-around;\r\n\t\theight: 100rpx;\r\n\t\tborder-top: 1rpx solid #eee;\r\n\t}\r\n\r\n\t.link-btn-close {\r\n\t\twidth: 50%;\r\n\t\t// background-color: #3366ff;\r\n\t\tcolor: #000;\r\n\t\tpadding: 20rpx 0;\r\n\t\tfont-size: 28rpx;\r\n\r\n\t\tborder-radius: 10rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.link-btn {\r\n\t\twidth: 50%;\r\n\t\t// background-color: #3366ff;\r\n\t\tcolor: #3366ff;\r\n\t\tpadding: 20rpx 0;\r\n\t\tfont-size: 28rpx;\r\n\t\tborder-radius: 10rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.line {\r\n\t\twidth: 1rpx;\r\n\t\theight: 100%;\r\n\t\tbackground: #eee;\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/zhizhi/Documents/HBuilderProjects/dnf/pages/room/room.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","baseUrl","reactive","computed","wx","uni","onShow","onLoad","onUnmounted","ws","nextTick","uniCopy","onMounted"],"mappings":"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"}