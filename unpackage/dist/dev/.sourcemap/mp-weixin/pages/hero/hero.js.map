{"version":3,"file":"hero.js","sources":["pages/hero/hero.vue","pages/hero/hero.vue?type=page"],"sourcesContent":["<template>\r\n\t<!-- 标题 -->\r\n\t<view class=\"wrap\">\r\n\t\t<view class=\"popup-header\">点击角色卡片 即可修改角色信息</view>\r\n\t\t<view style=\"height: 100vh;\">\r\n\t\t\t<scroll-view scroll-y=\"true\" style=\"height: 100%;\">\r\n\t\t\t\t<view class=\"role-list\">\r\n\t\t\t\t\t<view v-for=\"(role,index) in userHeroList\" :key=\"index\" class=\"role-card\"\r\n\t\t\t\t\t\t:class=\"{ 'card-active': activeRoleId === role.id }\" @click=\"selectRole(role)\">\r\n\t\t\t\t\t\t<tn-avatar :url=\"role.hero_avatar\" size=\"80rpx\" />\r\n\t\t\t\t\t\t<view class=\"role-info\">\r\n\t\t\t\t\t\t\t<view class=\"role-value\">{{ role.resist_power }} {{ role.hero_name }}</view>\r\n\t\t\t\t\t\t\t<view class=\"role-subtitle\">{{role.nickname}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<fui-safe-area></fui-safe-area>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t<!-- 底部自定义按钮组 -->\r\n\t\t<view class=\"popup-footer\">\r\n\t\t\t<view class=\"fui-tabbar__content\">\r\n\t\t\t\t<view class=\"btn btn-primary\" @click=\"linkTo('/pages/hero/edit')\">新建角色</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<fui-safe-area></fui-safe-area>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tdefineProps,\r\n\t\tdefineEmits,\r\n\t\tonMounted\r\n\t} from 'vue';\n\timport { onShow } from '@dcloudio/uni-app';\r\n\timport TnIcon from '@/uni_modules/tuniaoui-vue3/components/icon/src/icon.vue'\r\n\timport TnButton from '@/uni_modules/tuniaoui-vue3/components/button/src/button.vue'\r\n\timport TnAvatar from '@/uni_modules/tuniaoui-vue3/components/avatar/src/avatar.vue'\r\n\timport TnPopup from '@/uni_modules/tuniaoui-vue3/components/popup/src/popup.vue'\r\n\timport fuiSafeArea from \"@/components/fui-safe-area.vue\"\r\n\timport {\r\n\t\tuseUserStore\r\n\t} from '@/stores/user'\r\n\tconst userStore = useUserStore()\r\n\tconst linkTo = (path) => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: path\r\n\t\t})\r\n\t}\r\n\r\n\tconst userHeroList = ref([])\r\n\r\n\tconst activeRoleId = ref(null)\r\n\tconst showRoleSelect = ref(true)\r\n\tconst isEdit = ref(false)\r\n\r\n\tconst selectRole = (item) => {\r\n\t\tlinkTo(`/pages/hero/edit?id=${item.id}`)\r\n\t}\r\n\r\n\tconst getUserHeroList = async () => {\r\n\r\n\t\tconst res = await uni.$http.get('/dungeon/getUserHeroList')\r\n\r\n\t\tif (res.code === 1) {\r\n\t\t\tuserHeroList.value = res.data;\r\n\t\t} else {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: res.msg,\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tonMounted(() => {\r\n\t\tgetUserHeroList()\n\t\tif (userStore.userInfo?.default_user_hero_id) {\n\t\t\tactiveRoleId.value = userStore.userInfo.default_user_hero_id\n\t\t}\r\n\t})\n\t\n\tonShow(() => {\n\t\tgetUserHeroList()\n\t})\r\n</script>\r\n\r\n<style scoped>\r\n\t/* page{\r\n\t\theight: 100vh;\r\n\t} */\r\n\t.wrap {\r\n\t\tpadding: 0;\r\n\t\tbackground: #fff;\r\n\t\t/* background: #f0f2f5; */\r\n\t\tmin-height: 100vh;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\r\n\r\n\r\n\t.role-group-scroll {\r\n\t\t/* flex: 1 1 auto;\r\n\t  height: 100%;\r\n\t  overflow: auto;\r\n\t  flex: 1; */\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\r\n\t.btn {\r\n\t\tflex: 1;\r\n\t\tmargin: 0 10rpx;\r\n\t\tpadding: 20rpx 0;\r\n\t\ttext-align: center;\r\n\t\tborder-radius: 10rpx;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t/* 默认按钮 */\r\n\t.btn-default {\r\n\t\tbackground-color: #fff;\r\n\t\tcolor: #3366ff;\r\n\t\tborder: 1rpx solid #3366ff;\r\n\t}\r\n\r\n\t/* 主要按钮 */\r\n\t.btn-primary {\r\n\t\tbackground-color: #3366ff;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t/* 弹窗头 */\r\n\t.popup-header {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tpadding: 24rpx;\r\n\t\tcolor: #888;\r\n\t\tborder-bottom: 1rpx solid #eee;\r\n\t}\r\n\r\n\t/* 原生 CSS Grid 两列布局 */\r\n\t.role-list {\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(2, 1fr);\r\n\t\tgrid-gap: 30rpx;\r\n\t\tpadding: 10rpx 40rpx;\r\n\t}\r\n\r\n\t/* 单个角色卡片 */\r\n\t.role-card {\r\n\t\tposition: relative;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tbox-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t/* 三角形背景——尖朝左下，位于右上角 */\r\n\t.card-active::before {\r\n\t\tcontent: \"\";\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\twidth: 90rpx;\r\n\t\t/* 三角边长 */\r\n\t\theight: 60rpx;\r\n\t\tbackground-color: #409eff;\r\n\t\tclip-path: polygon(100% 0%,\r\n\t\t\t\t/* 顶点：右上 */\r\n\t\t\t\t100% 100%,\r\n\t\t\t\t/* 底点：右下 */\r\n\t\t\t\t0% 0%\r\n\t\t\t\t/* 左顶点：左上 */\r\n\t\t\t);\r\n\t}\r\n\r\n\t/* 对勾 */\r\n\t.card-active::after {\r\n\t\tcontent: \"当前\";\r\n\t\tposition: absolute;\r\n\t\ttop: 4rpx;\r\n\t\tright: 4rpx;\r\n\t\tfont-size: 20rpx;\r\n\t\t/* line-height: 50rpx; */\r\n\t\tcolor: #fff;\r\n\t\t/* line-height: 2; */\r\n\t}\r\n\r\n\t/* 文字区域 */\r\n\t.role-info {\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n\r\n\t.role-value {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\r\n\t.role-subtitle {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #888;\r\n\t\tmargin-top: 8rpx;\r\n\t}\r\n\r\n\t/* 底部按钮区 */\r\n\t.popup-footer {\r\n\t\twidth: 100%;\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tz-index: 10;\r\n\t}\r\n\r\n\t.fui-icon__close {\r\n\t\tposition: absolute;\r\n\t\ttop: 24rpx;\r\n\t\tright: 54rpx;\r\n\r\n\t}\r\n\r\n\t/* .role-list > .role-card:nth-child(-n+2) {\r\n\t  margin-top: 20rpx;\r\n\t}\r\n\t.role-list>.role-card:last-child {\r\n\t\tmargin-bottom: 150rpx;\r\n\t} */\r\n\r\n\r\n\t/* 新加 */\r\n\t.popup-container {\r\n\t\tpadding: 30rpx;\r\n\t}\r\n\r\n\t.form-item {\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\r\n\t.label {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 12rpx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.input,\r\n\t.input-select {\r\n\t\tbackground: #f7f8fa;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.input-select {\r\n\t\tborder: 1px solid #ddd;\r\n\t}\r\n\r\n\t.button-group {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tmargin-top: 40rpx;\r\n\t}\r\n\r\n\t.save-btn,\r\n\t.delete-btn {\r\n\t\tflex: 1;\r\n\t\tpadding: 20rpx 0;\r\n\t\tfont-size: 28rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\ttext-align: center;\r\n\t\tcolor: #fff;\r\n\t}\r\n\r\n\t.save-btn {\r\n\t\tbackground-color: #1677ff;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.delete-btn {\r\n\t\tbackground-color: #ff4d4f;\r\n\t}\r\n\r\n\t.role-list-popup {\r\n\t\tmax-height: 400rpx;\r\n\t\tpadding: 20rpx;\r\n\t}\r\n\r\n\t.role-option {\r\n\t\tpadding: 24rpx;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t.fui-tabbar__content {\r\n\t\t/* border: 1rpx solid #fff; */\r\n\t\twidth: 100%;\r\n\t\theight: 100rpx;\r\n\t\t/* background: #fff; */\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 0 32rpx;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n</style>","import MiniProgramPage from '/Users/zhizhi/Documents/HBuilderProjects/dnf/pages/hero/hero.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","uni","ref","onMounted","onShow"],"mappings":";;;;;;AAyCC,MAAM,WAAW,MAAW;AAE5B,MAAM,cAAc,MAAW;;;;AAI/B,UAAM,YAAYA,YAAAA,aAAc;AAChC,UAAM,SAAS,CAAC,SAAS;AACxBC,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MACR,CAAG;AAAA,IACD;AAED,UAAM,eAAeC,cAAG,IAAC,EAAE;AAE3B,UAAM,eAAeA,cAAG,IAAC,IAAI;AACNA,kBAAAA,IAAI,IAAI;AAChBA,kBAAAA,IAAI,KAAK;AAExB,UAAM,aAAa,CAAC,SAAS;AAC5B,aAAO,uBAAuB,KAAK,EAAE,EAAE;AAAA,IACvC;AAED,UAAM,kBAAkB,YAAY;AAEnC,YAAM,MAAM,MAAMD,cAAAA,MAAI,MAAM,IAAI,0BAA0B;AAE1D,UAAI,IAAI,SAAS,GAAG;AACnB,qBAAa,QAAQ,IAAI;AAAA,MAC5B,OAAS;AACNA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,IAAI;AAAA,UACX,MAAM;AAAA,QACV,CAAI;AAAA,MACD;AAAA,IACD;AAGDE,kBAAAA,UAAU,MAAM;;AACf,sBAAiB;AACjB,WAAI,eAAU,aAAV,mBAAoB,sBAAsB;AAC7C,qBAAa,QAAQ,UAAU,SAAS;AAAA,MACxC;AAAA,IACH,CAAE;AAEDC,kBAAAA,OAAO,MAAM;AACZ,sBAAiB;AAAA,IACnB,CAAE;;;;;;;;;;;;;;;;;;;;;;;;ACvFF,GAAG,WAAW,eAAe;"}