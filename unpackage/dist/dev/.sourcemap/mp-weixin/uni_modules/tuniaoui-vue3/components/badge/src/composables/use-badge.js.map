{"version":3,"file":"use-badge.js","sources":["uni_modules/tuniaoui-vue3/components/badge/src/composables/use-badge.ts"],"sourcesContent":["import { computed } from 'vue'\nimport { isNumber, isString } from '../../../../utils'\n\nimport type { SetupContext } from 'vue'\nimport type { BadgeEmits, BadgeProps } from '../badge'\n\nexport const badgeContentTypes = ['number', 'string', 'icon'] as const\nexport type BadgeContentType = (typeof badgeContentTypes)[number]\n\nexport const useBadge = (\n  props: BadgeProps,\n  emits?: SetupContext<BadgeEmits>['emit']\n) => {\n  // 判断是否需要显示角标\n  const showBadge = computed<boolean>(() => {\n    return !!props.dot || (props.value !== '' && props.value !== undefined)\n  })\n  // 显示的内容类型\n  const contentType = computed<BadgeContentType>(() => {\n    let type: BadgeContentType = 'string'\n    if (isNumber(props.value)) type = 'number'\n    if (isString(props.value) && props.value.startsWith('icon-')) type = 'icon'\n\n    return type\n  })\n\n  // 显示的内容\n  const content = computed<string>(() => {\n    if (props.dot) return ''\n    if (contentType.value === 'number' && props.max) {\n      const value = Number(props.value || 0)\n      const max = Number(props.max || 0)\n      return value > max ? `${max}+` : `${value}`\n    }\n    if (contentType.value === 'icon')\n      return (props.value as string).replace('icon-', '')\n\n    return props.value as string\n  })\n\n  // 角标点击事件\n  const badgeClick = () => {\n    if (emits) emits('click', props.index)\n  }\n\n  return {\n    showBadge,\n    contentType,\n    content,\n    badgeClick,\n  }\n}\n"],"names":["computed","isNumber","isString"],"mappings":";;;;AASa,MAAA,WAAW,CACtB,OACA,UACG;AAEG,QAAA,YAAYA,cAAAA,SAAkB,MAAM;AACjC,WAAA,CAAC,CAAC,MAAM,OAAQ,MAAM,UAAU,MAAM,MAAM,UAAU;AAAA,EAAA,CAC9D;AAEK,QAAA,cAAcA,cAAAA,SAA2B,MAAM;AACnD,QAAI,OAAyB;AACzB,QAAAC,8CAAA,SAAS,MAAM,KAAK;AAAU,aAAA;AAClC,QAAIC,cAAAA,SAAS,MAAM,KAAK,KAAK,MAAM,MAAM,WAAW,OAAO;AAAU,aAAA;AAE9D,WAAA;AAAA,EAAA,CACR;AAGK,QAAA,UAAUF,cAAAA,SAAiB,MAAM;AACrC,QAAI,MAAM;AAAY,aAAA;AACtB,QAAI,YAAY,UAAU,YAAY,MAAM,KAAK;AAC/C,YAAM,QAAQ,OAAO,MAAM,SAAS,CAAC;AACrC,YAAM,MAAM,OAAO,MAAM,OAAO,CAAC;AACjC,aAAO,QAAQ,MAAM,GAAG,GAAG,MAAM,GAAG,KAAK;AAAA,IAC3C;AACA,QAAI,YAAY,UAAU;AACxB,aAAQ,MAAM,MAAiB,QAAQ,SAAS,EAAE;AAEpD,WAAO,MAAM;AAAA,EAAA,CACd;AAGD,QAAM,aAAa,MAAM;AACnB,QAAA;AAAa,YAAA,SAAS,MAAM,KAAK;AAAA,EAAA;AAGhC,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;;"}