{"version":3,"file":"avatar-custom.js","sources":["uni_modules/tuniaoui-vue3/components/avatar/src/composables/avatar-custom.ts"],"sourcesContent":["import { computed } from 'vue'\nimport {\n  useComponentColor,\n  useComponentSize,\n  useNamespace,\n} from '../../../../hooks'\nimport { formatDomSizeValue } from '../../../../utils'\nimport { useAvatarProps } from './use-avatar-props'\n\nimport type { CSSProperties, Ref } from 'vue'\nimport type { AvatarProps } from '../avatar'\n\nexport const useAvatarCustomStyle = (\n  props: AvatarProps,\n  groupIndex: Ref<number>,\n  avatarWidth: Ref<number>\n) => {\n  const ns = useNamespace('avatar')\n\n  const {\n    type,\n    size,\n    shape,\n    bgColor,\n    border,\n    borderColor,\n    shadow,\n    shadowColor,\n    avatarGap,\n  } = useAvatarProps(props)\n\n  // 解析背景颜色\n  const [bgColorClass, bgColorStyle] = useComponentColor(bgColor, 'bg')\n\n  // 解析边框颜色\n  const [borderColorClass, borderColorStyle] = useComponentColor(\n    borderColor,\n    'border'\n  )\n\n  // 解析阴影颜色\n  const [shadowColorClass] = useComponentColor(shadowColor, 'shadow')\n\n  // 解析头像尺寸\n  const { sizeType } = useComponentSize(size.value)\n\n  // 头像动态类\n  const avatarClass = computed<string>(() => {\n    const cls: string[] = []\n    cls.push(ns.b())\n\n    // 设置头像颜色类型\n    if (type.value) cls.push(`tn-type-${type.value}_bg`)\n\n    // 设置背景颜色\n    if (!type.value && bgColorClass.value) cls.push(bgColorClass.value)\n\n    // 设置头像尺寸\n    if (sizeType.value === 'inner') cls.push(ns.m(size.value as string))\n\n    // 设置头像形状\n    if (shape.value) cls.push(ns.m(shape.value))\n\n    // 设置边框\n    if (border.value) {\n      cls.push('tn-border')\n      // 设置边框颜色\n      if (borderColorClass.value) cls.push(borderColorClass.value)\n    }\n\n    // 设置阴影\n    if (shadow.value) {\n      cls.push('tn-shadow')\n      // 设置阴影颜色\n      if (shadowColorClass.value) cls.push(shadowColorClass.value)\n    }\n\n    return cls.join(' ')\n  })\n\n  // 头像动态样式\n  const avatarStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n\n    // 设置头像尺寸\n    if (sizeType.value === 'custom') {\n      style.width = formatDomSizeValue(size.value)\n      style.height = style.width\n    }\n\n    // 设置背景颜色\n    if (bgColorStyle.value) style.backgroundColor = bgColorStyle.value\n\n    // 设置边框颜色\n    if (border.value && borderColorStyle.value)\n      style.borderColor = borderColorStyle.value\n\n    // 如果是头像组，设置头像间距\n    if (groupIndex.value != -1) {\n      style.zIndex = groupIndex.value + 1\n      // style.transform = `translateX(calc(${\n      //   (groupAvatarCount.value - groupIndex.value - 1) * 100\n      // }% * ${avatarGap.value}))`\n      if (groupIndex.value > 0) {\n        style.marginLeft = `calc(-${avatarWidth.value * avatarGap.value}px)`\n      } else {\n        style.marginLeft = '0px'\n      }\n    }\n\n    return style\n  })\n\n  return {\n    ns,\n    avatarClass,\n    avatarStyle,\n  }\n}\n"],"names":["useNamespace","useAvatarProps","useComponentColor","useComponentSize","computed","formatDomSizeValue"],"mappings":";;;;;;;;;AAYO,MAAM,uBAAuB,CAClC,OACA,YACA,gBACG;AACG,QAAA,KAAKA,+DAAa,QAAQ;AAE1B,QAAA;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,IACEC,0EAAAA,eAAe,KAAK;AAGxB,QAAM,CAAC,cAAc,YAAY,IAAIC,uDAAAA,kBAAkB,SAAS,IAAI;AAG9D,QAAA,CAAC,kBAAkB,gBAAgB,IAAIA,uDAAA;AAAA,IAC3C;AAAA,IACA;AAAA,EAAA;AAIF,QAAM,CAAC,gBAAgB,IAAIA,uDAAA,kBAAkB,aAAa,QAAQ;AAGlE,QAAM,EAAE,SAAa,IAAAC,sDAAA,iBAAiB,KAAK,KAAK;AAG1C,QAAA,cAAcC,cAAAA,SAAiB,MAAM;AACzC,UAAM,MAAgB,CAAA;AAClB,QAAA,KAAK,GAAG,EAAG,CAAA;AAGf,QAAI,KAAK;AAAO,UAAI,KAAK,WAAW,KAAK,KAAK,KAAK;AAG/C,QAAA,CAAC,KAAK,SAAS,aAAa;AAAW,UAAA,KAAK,aAAa,KAAK;AAGlE,QAAI,SAAS,UAAU;AAAS,UAAI,KAAK,GAAG,EAAE,KAAK,KAAe,CAAC;AAGnE,QAAI,MAAM;AAAO,UAAI,KAAK,GAAG,EAAE,MAAM,KAAK,CAAC;AAG3C,QAAI,OAAO,OAAO;AAChB,UAAI,KAAK,WAAW;AAEpB,UAAI,iBAAiB;AAAW,YAAA,KAAK,iBAAiB,KAAK;AAAA,IAC7D;AAGA,QAAI,OAAO,OAAO;AAChB,UAAI,KAAK,WAAW;AAEpB,UAAI,iBAAiB;AAAW,YAAA,KAAK,iBAAiB,KAAK;AAAA,IAC7D;AAEO,WAAA,IAAI,KAAK,GAAG;AAAA,EAAA,CACpB;AAGK,QAAA,cAAcA,cAAAA,SAAwB,MAAM;AAChD,UAAM,QAAuB,CAAA;AAGzB,QAAA,SAAS,UAAU,UAAU;AACzB,YAAA,QAAQC,wCAAAA,mBAAmB,KAAK,KAAK;AAC3C,YAAM,SAAS,MAAM;AAAA,IACvB;AAGA,QAAI,aAAa;AAAO,YAAM,kBAAkB,aAAa;AAGzD,QAAA,OAAO,SAAS,iBAAiB;AACnC,YAAM,cAAc,iBAAiB;AAGnC,QAAA,WAAW,SAAS,IAAI;AACpB,YAAA,SAAS,WAAW,QAAQ;AAI9B,UAAA,WAAW,QAAQ,GAAG;AACxB,cAAM,aAAa,SAAS,YAAY,QAAQ,UAAU,KAAK;AAAA,MAAA,OAC1D;AACL,cAAM,aAAa;AAAA,MACrB;AAAA,IACF;AAEO,WAAA;AAAA,EAAA,CACR;AAEM,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;;"}