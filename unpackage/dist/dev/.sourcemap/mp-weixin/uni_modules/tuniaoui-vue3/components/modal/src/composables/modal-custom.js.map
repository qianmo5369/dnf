{"version":3,"file":"modal-custom.js","sources":["uni_modules/tuniaoui-vue3/components/modal/src/composables/modal-custom.ts"],"sourcesContent":["import { computed, toRef, watch } from 'vue'\nimport { useComponentColor, useNamespace } from '../../../../hooks'\n\nimport type { CSSProperties, Ref } from 'vue'\nimport type { ModalBtnStyle } from '../modal'\n\ntype OperationBtnComputedClass = (type: 'cancel' | 'confirm') => string\ntype OperationBtnComputedStyle = (type: 'cancel' | 'confirm') => CSSProperties\n\nexport const useModalCustomStyle = (\n  cancelBtnStyle: Ref<ModalBtnStyle>,\n  confirmBtnStyle: Ref<ModalBtnStyle>\n) => {\n  const ns = useNamespace('modal')\n\n  // 解析按钮的颜色\n  const [cancelBtnBgClass, cancelBtnBgStyle, updateCancelBtnBg] =\n    useComponentColor(toRef(cancelBtnStyle.value, 'bgColor'), 'bg')\n  const [cancelBtnColorClass, cancelBtnColorStyle, updateCancelBtnColor] =\n    useComponentColor(toRef(cancelBtnStyle.value, 'color'), 'text')\n  const [confirmBtnBgClass, confirmBtnBgStyle, updateConfirmBtnBg] =\n    useComponentColor(toRef(confirmBtnStyle.value, 'bgColor'), 'bg')\n  const [confirmBtnColorClass, confirmBtnColorStyle, updateConfirmBtnColor] =\n    useComponentColor(toRef(confirmBtnStyle.value, 'color'), 'text')\n\n  watch(\n    () => confirmBtnStyle,\n    (value) => {\n      updateConfirmBtnBg(value.value.bgColor)\n      updateConfirmBtnColor(value.value.color)\n    },\n    {\n      deep: true,\n    }\n  )\n  watch(\n    () => cancelBtnStyle,\n    (value) => {\n      updateCancelBtnBg(value.value.bgColor)\n      updateCancelBtnColor(value.value.color)\n    },\n    {\n      deep: true,\n    }\n  )\n\n  // 操作按钮所属类\n  const operationBtnClass = computed<OperationBtnComputedClass>(() => {\n    return (type: 'cancel' | 'confirm') => {\n      const cls: string[] = [\n        ns.e('operation-btn'),\n        ns.em('operation-btn', type),\n      ]\n\n      if (type === 'cancel') {\n        if (cancelBtnBgClass.value) cls.push(cancelBtnBgClass.value)\n        if (cancelBtnColorClass.value) cls.push(cancelBtnColorClass.value)\n      }\n      if (type === 'confirm') {\n        if (confirmBtnBgClass.value) cls.push(confirmBtnBgClass.value)\n        if (confirmBtnColorClass.value) cls.push(confirmBtnColorClass.value)\n      }\n\n      return cls.join(' ')\n    }\n  })\n\n  // 操作按钮的样式\n  const operationBtnStyle = computed<OperationBtnComputedStyle>(() => {\n    return (type: 'cancel' | 'confirm') => {\n      const style: CSSProperties = {}\n\n      if (type === 'cancel') {\n        if (cancelBtnBgStyle.value)\n          style.backgroundColor = cancelBtnBgStyle.value\n        if (cancelBtnColorStyle.value) {\n          style.color = cancelBtnColorStyle.value\n        } else if (!cancelBtnBgClass.value && !cancelBtnColorClass.value) {\n          style.color = 'var(--tn-color-danger)'\n        }\n      }\n      if (type === 'confirm') {\n        if (confirmBtnBgStyle.value)\n          style.backgroundColor = confirmBtnBgStyle.value\n        if (confirmBtnColorStyle.value) {\n          style.color = confirmBtnColorStyle.value\n        } else if (!confirmBtnBgClass.value && !confirmBtnColorClass.value) {\n          style.color = 'var(--tn-color-primary)'\n        }\n      }\n\n      return style\n    }\n  })\n\n  return {\n    ns,\n    operationBtnClass,\n    operationBtnStyle,\n  }\n}\n"],"names":["useNamespace","useComponentColor","toRef","watch","computed"],"mappings":";;;;;;AASa,MAAA,sBAAsB,CACjC,gBACA,oBACG;AACG,QAAA,KAAKA,+DAAa,OAAO;AAGzB,QAAA,CAAC,kBAAkB,kBAAkB,iBAAiB,IAC1DC,uDAAkB,kBAAAC,oBAAM,eAAe,OAAO,SAAS,GAAG,IAAI;AAC1D,QAAA,CAAC,qBAAqB,qBAAqB,oBAAoB,IACnED,uDAAkB,kBAAAC,oBAAM,eAAe,OAAO,OAAO,GAAG,MAAM;AAC1D,QAAA,CAAC,mBAAmB,mBAAmB,kBAAkB,IAC7DD,uDAAkB,kBAAAC,oBAAM,gBAAgB,OAAO,SAAS,GAAG,IAAI;AAC3D,QAAA,CAAC,sBAAsB,sBAAsB,qBAAqB,IACtED,uDAAkB,kBAAAC,oBAAM,gBAAgB,OAAO,OAAO,GAAG,MAAM;AAEjEC,gBAAA;AAAA,IACE,MAAM;AAAA,IACN,CAAC,UAAU;AACU,yBAAA,MAAM,MAAM,OAAO;AAChB,4BAAA,MAAM,MAAM,KAAK;AAAA,IACzC;AAAA,IACA;AAAA,MACE,MAAM;AAAA,IACR;AAAA,EAAA;AAEFA,gBAAA;AAAA,IACE,MAAM;AAAA,IACN,CAAC,UAAU;AACS,wBAAA,MAAM,MAAM,OAAO;AAChB,2BAAA,MAAM,MAAM,KAAK;AAAA,IACxC;AAAA,IACA;AAAA,MACE,MAAM;AAAA,IACR;AAAA,EAAA;AAII,QAAA,oBAAoBC,cAAAA,SAAoC,MAAM;AAClE,WAAO,CAAC,SAA+B;AACrC,YAAM,MAAgB;AAAA,QACpB,GAAG,EAAE,eAAe;AAAA,QACpB,GAAG,GAAG,iBAAiB,IAAI;AAAA,MAAA;AAG7B,UAAI,SAAS,UAAU;AACrB,YAAI,iBAAiB;AAAW,cAAA,KAAK,iBAAiB,KAAK;AAC3D,YAAI,oBAAoB;AAAW,cAAA,KAAK,oBAAoB,KAAK;AAAA,MACnE;AACA,UAAI,SAAS,WAAW;AACtB,YAAI,kBAAkB;AAAW,cAAA,KAAK,kBAAkB,KAAK;AAC7D,YAAI,qBAAqB;AAAW,cAAA,KAAK,qBAAqB,KAAK;AAAA,MACrE;AAEO,aAAA,IAAI,KAAK,GAAG;AAAA,IAAA;AAAA,EACrB,CACD;AAGK,QAAA,oBAAoBA,cAAAA,SAAoC,MAAM;AAClE,WAAO,CAAC,SAA+B;AACrC,YAAM,QAAuB,CAAA;AAE7B,UAAI,SAAS,UAAU;AACrB,YAAI,iBAAiB;AACnB,gBAAM,kBAAkB,iBAAiB;AAC3C,YAAI,oBAAoB,OAAO;AAC7B,gBAAM,QAAQ,oBAAoB;AAAA,mBACzB,CAAC,iBAAiB,SAAS,CAAC,oBAAoB,OAAO;AAChE,gBAAM,QAAQ;AAAA,QAChB;AAAA,MACF;AACA,UAAI,SAAS,WAAW;AACtB,YAAI,kBAAkB;AACpB,gBAAM,kBAAkB,kBAAkB;AAC5C,YAAI,qBAAqB,OAAO;AAC9B,gBAAM,QAAQ,qBAAqB;AAAA,mBAC1B,CAAC,kBAAkB,SAAS,CAAC,qBAAqB,OAAO;AAClE,gBAAM,QAAQ;AAAA,QAChB;AAAA,MACF;AAEO,aAAA;AAAA,IAAA;AAAA,EACT,CACD;AAEM,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;;"}