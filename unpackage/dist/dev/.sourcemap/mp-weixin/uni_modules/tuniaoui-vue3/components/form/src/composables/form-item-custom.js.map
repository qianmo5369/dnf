{"version":3,"file":"form-item-custom.js","sources":["uni_modules/tuniaoui-vue3/components/form/src/composables/form-item-custom.ts"],"sourcesContent":["import { computed, inject, ref } from 'vue'\nimport { formContextKey } from '../../../../tokens'\nimport { formatDomSizeValue, generateId } from '../../../../utils'\nimport { useNamespace, useSelectorQuery } from '../../../../hooks'\nimport { useFormSize } from './use-form-common-props'\n\nimport type { CSSProperties, Ref } from 'vue'\nimport type { FormItemProps } from '../form-item'\n\nexport const useFormItemCustomStyle = (\n  props: FormItemProps,\n  hasLabel: Ref<boolean>,\n  isRequired: Ref<boolean>\n) => {\n  const form = inject(formContextKey, undefined)\n\n  const ns = useNamespace('form-item')\n\n  const size = useFormSize(undefined, { formItem: false })\n\n  const { getSelectorNodeInfo } = useSelectorQuery()\n\n  // 标签的宽度\n  const labelWidth = computed(() =>\n    formatDomSizeValue(props.labelWidth || form?.labelWidth || '')\n  )\n\n  // 标签的位置\n  const labelPosition = computed(\n    () => props.labelPosition || form?.labelPosition || 'right'\n  )\n\n  // 是否隐藏必填星号\n  const hideRequiredAsterisk = computed(\n    () => form?.hideRequiredAsterisk || false\n  )\n\n  // 必填星号的位置\n  const requireAsteriskPosition = computed(\n    () => form?.requireAsteriskPosition || 'left'\n  )\n\n  // label标签容器宽度\n  const labelContainerWidth = ref(0)\n  const labelId = `label-${generateId()}`\n\n  // 获取label标签的宽度\n  const initLabelContainerWidth = () => {\n    if (!hasLabel.value) return\n    getSelectorNodeInfo(`#${labelId}`).then((res) => {\n      labelContainerWidth.value = res?.width || 0\n    })\n  }\n\n  // formItem所属类\n  const formItemClass = computed<string>(() => {\n    const cls: string[] = [ns.b()]\n\n    if (size.value) cls.push(ns.m(size.value))\n\n    if (labelPosition.value) cls.push(ns.m(`label-${labelPosition.value}`))\n\n    return cls.join(' ')\n  })\n\n  // formItemLabel所属类\n  const formItemLabelClass = computed<string>(() => {\n    const cls: string[] = [ns.e('label')]\n    if (!hideRequiredAsterisk.value && isRequired.value) {\n      cls.push(\n        ns.em('label', 'required'),\n        ns.em('label', `asterisk-${requireAsteriskPosition.value}`)\n      )\n    }\n    return cls.join(' ')\n  })\n\n  // formItemLabel所属样式\n  const formItemLabelStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n    if (labelPosition.value !== 'top' && labelWidth.value)\n      style.width = labelWidth.value\n    return style\n  })\n\n  // formItemErrorMessage所属样式\n  const formItemErrorMessageStyle = computed<CSSProperties>(() => {\n    const style: CSSProperties = {}\n    if (labelPosition.value !== 'top' && hasLabel.value) {\n      style.paddingLeft = `${labelContainerWidth.value}px`\n    }\n    return style\n  })\n\n  return {\n    ns,\n    labelId,\n    formItemClass,\n    formItemLabelClass,\n    formItemLabelStyle,\n    formItemErrorMessageStyle,\n    initLabelContainerWidth,\n  }\n}\n"],"names":["inject","formContextKey","useNamespace","useFormSize","useSelectorQuery","computed","formatDomSizeValue","ref","generateId"],"mappings":";;;;;;;;;;AASO,MAAM,yBAAyB,CACpC,OACA,UACA,eACG;AACG,QAAA,OAAOA,cAAO,OAAAC,qDAAgB,MAAS;AAEvC,QAAA,KAAKC,+DAAa,WAAW;AAEnC,QAAM,OAAOC,4EAAAA,YAAY,QAAW,EAAE,UAAU,OAAO;AAEjD,QAAA,EAAE,wBAAwBC,sDAAAA;AAGhC,QAAM,aAAaC,cAAA;AAAA,IAAS,MAC1BC,wCAAAA,mBAAmB,MAAM,eAAc,6BAAM,eAAc,EAAE;AAAA,EAAA;AAI/D,QAAM,gBAAgBD,cAAA;AAAA,IACpB,MAAM,MAAM,kBAAiB,6BAAM,kBAAiB;AAAA,EAAA;AAItD,QAAM,uBAAuBA,cAAA;AAAA,IAC3B,OAAM,6BAAM,yBAAwB;AAAA,EAAA;AAItC,QAAM,0BAA0BA,cAAA;AAAA,IAC9B,OAAM,6BAAM,4BAA2B;AAAA,EAAA;AAInC,QAAA,sBAAsBE,kBAAI,CAAC;AAC3B,QAAA,UAAU,SAASC,oCAAA,WAAA,CAAY;AAGrC,QAAM,0BAA0B,MAAM;AACpC,QAAI,CAAC,SAAS;AAAO;AACrB,wBAAoB,IAAI,OAAO,EAAE,EAAE,KAAK,CAAC,QAAQ;AAC3B,0BAAA,SAAQ,2BAAK,UAAS;AAAA,IAAA,CAC3C;AAAA,EAAA;AAIG,QAAA,gBAAgBH,cAAAA,SAAiB,MAAM;AAC3C,UAAM,MAAgB,CAAC,GAAG,EAAG,CAAA;AAE7B,QAAI,KAAK;AAAO,UAAI,KAAK,GAAG,EAAE,KAAK,KAAK,CAAC;AAEzC,QAAI,cAAc;AAAO,UAAI,KAAK,GAAG,EAAE,SAAS,cAAc,KAAK,EAAE,CAAC;AAE/D,WAAA,IAAI,KAAK,GAAG;AAAA,EAAA,CACpB;AAGK,QAAA,qBAAqBA,cAAAA,SAAiB,MAAM;AAChD,UAAM,MAAgB,CAAC,GAAG,EAAE,OAAO,CAAC;AACpC,QAAI,CAAC,qBAAqB,SAAS,WAAW,OAAO;AAC/C,UAAA;AAAA,QACF,GAAG,GAAG,SAAS,UAAU;AAAA,QACzB,GAAG,GAAG,SAAS,YAAY,wBAAwB,KAAK,EAAE;AAAA,MAAA;AAAA,IAE9D;AACO,WAAA,IAAI,KAAK,GAAG;AAAA,EAAA,CACpB;AAGK,QAAA,qBAAqBA,cAAAA,SAAwB,MAAM;AACvD,UAAM,QAAuB,CAAA;AACzB,QAAA,cAAc,UAAU,SAAS,WAAW;AAC9C,YAAM,QAAQ,WAAW;AACpB,WAAA;AAAA,EAAA,CACR;AAGK,QAAA,4BAA4BA,cAAAA,SAAwB,MAAM;AAC9D,UAAM,QAAuB,CAAA;AAC7B,QAAI,cAAc,UAAU,SAAS,SAAS,OAAO;AAC7C,YAAA,cAAc,GAAG,oBAAoB,KAAK;AAAA,IAClD;AACO,WAAA;AAAA,EAAA,CACR;AAEM,SAAA;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA;AAEJ;;"}