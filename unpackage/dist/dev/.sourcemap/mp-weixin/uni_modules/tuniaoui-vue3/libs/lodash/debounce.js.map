{"version":3,"file":"debounce.js","sources":["uni_modules/tuniaoui-vue3/libs/lodash/debounce.ts"],"sourcesContent":["import { isObject } from '@vue/shared'\nimport { toNumber } from './_toNumber'\n\nimport type { DebounceSettings, DebouncedFunc } from './_common'\n\nconst FUNC_ERROR_TEXT = 'Expected a function'\n\nexport function debounce<T extends (...args: any) => any>(\n  func: T,\n  wait?: number,\n  options?: DebounceSettings\n): DebouncedFunc<T> {\n  let lastArgs: any\n  let lastThis: any\n  let maxWait: any\n  let result: any\n  let timerId: any\n  let lastCallTime: any\n  let lastInvokeTime = 0\n  let leading = false\n  let maxing = false\n  let trailing = true\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT)\n  }\n  wait = toNumber(wait) || 0\n  if (isObject(options)) {\n    leading = !!options.leading\n    maxing = 'maxWait' in options\n    maxWait = maxing\n      ? Math.max(toNumber(options.maxWait) || 0, wait as number)\n      : maxWait\n    trailing = 'trailing' in options ? !!options.trailing : trailing\n  }\n\n  function invokeFunc(time: number) {\n    const args = lastArgs,\n      thisArg = lastThis\n\n    lastArgs = lastThis = undefined\n    lastInvokeTime = time\n    result = func.apply(thisArg, args)\n    return result\n  }\n\n  function leadingEdge(time: number) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait)\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result\n  }\n\n  function remainingWait(time: number) {\n    const timeSinceLastCall = time - lastCallTime,\n      timeSinceLastInvoke = time - lastInvokeTime,\n      result = (wait as number) - timeSinceLastCall\n\n    return maxing ? Math.max(result, maxWait - timeSinceLastInvoke) : result\n  }\n\n  function shouldInvoke(time: number) {\n    const timeSinceLastCall = time - lastCallTime,\n      timeSinceLastInvoke = time - lastInvokeTime\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (\n      lastCallTime === undefined ||\n      timeSinceLastCall >= (wait as number) ||\n      timeSinceLastCall < 0 ||\n      (maxing && timeSinceLastInvoke >= maxWait)\n    )\n  }\n\n  function timerExpired() {\n    const time = Date.now()\n    if (shouldInvoke(time)) {\n      return trailingEdge(time)\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time))\n  }\n\n  function trailingEdge(time: number) {\n    timerId = undefined\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time)\n    }\n    lastArgs = lastThis = undefined\n    return result\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId)\n    }\n    lastInvokeTime = 0\n    lastArgs = lastCallTime = lastThis = timerId = undefined\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(Date.now())\n  }\n\n  function debounced(this: any) {\n    const time = Date.now(),\n      isInvoking = shouldInvoke(time)\n\n    // eslint-disable-next-line prefer-rest-params\n    lastArgs = arguments\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    lastThis = this\n    lastCallTime = time\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime)\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait)\n        return invokeFunc(lastCallTime)\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait)\n    }\n    return result\n  }\n\n  debounced.cancel = cancel\n  debounced.flush = flush\n  return debounced\n}\n"],"names":["toNumber","isObject","result"],"mappings":";;;AAKA,MAAM,kBAAkB;AAER,SAAA,SACd,MACA,MACA,SACkB;AACd,MAAA;AACA,MAAA;AACA,MAAA;AACA,MAAA;AACA,MAAA;AACA,MAAA;AACJ,MAAI,iBAAiB;AACrB,MAAI,UAAU;AACd,MAAI,SAAS;AACb,MAAI,WAAW;AAEX,MAAA,OAAO,QAAQ,YAAY;AACvB,UAAA,IAAI,UAAU,eAAe;AAAA,EACrC;AACO,SAAAA,+CAAA,SAAS,IAAI,KAAK;AACrB,MAAAC,cAAAA,SAAS,OAAO,GAAG;AACX,cAAA,CAAC,CAAC,QAAQ;AACpB,aAAS,aAAa;AACZ,cAAA,SACN,KAAK,IAAID,+CAAA,SAAS,QAAQ,OAAO,KAAK,GAAG,IAAc,IACvD;AACJ,eAAW,cAAc,UAAU,CAAC,CAAC,QAAQ,WAAW;AAAA,EAC1D;AAEA,WAAS,WAAW,MAAc;AAC1B,UAAA,OAAO,UACX,UAAU;AAEZ,eAAW,WAAW;AACL,qBAAA;AACR,aAAA,KAAK,MAAM,SAAS,IAAI;AAC1B,WAAA;AAAA,EACT;AAEA,WAAS,YAAY,MAAc;AAEhB,qBAAA;AAEP,cAAA,WAAW,cAAc,IAAI;AAEhC,WAAA,UAAU,WAAW,IAAI,IAAI;AAAA,EACtC;AAEA,WAAS,cAAc,MAAc;AACnC,UAAM,oBAAoB,OAAO,cAC/B,sBAAsB,OAAO,gBAC7BE,UAAU,OAAkB;AAE9B,WAAO,SAAS,KAAK,IAAIA,SAAQ,UAAU,mBAAmB,IAAIA;AAAAA,EACpE;AAEA,WAAS,aAAa,MAAc;AAClC,UAAM,oBAAoB,OAAO,cAC/B,sBAAsB,OAAO;AAK/B,WACE,iBAAiB,UACjB,qBAAsB,QACtB,oBAAoB,KACnB,UAAU,uBAAuB;AAAA,EAEtC;AAEA,WAAS,eAAe;AAChB,UAAA,OAAO,KAAK;AACd,QAAA,aAAa,IAAI,GAAG;AACtB,aAAO,aAAa,IAAI;AAAA,IAC1B;AAEA,cAAU,WAAW,cAAc,cAAc,IAAI,CAAC;AAAA,EACxD;AAEA,WAAS,aAAa,MAAc;AACxB,cAAA;AAIV,QAAI,YAAY,UAAU;AACxB,aAAO,WAAW,IAAI;AAAA,IACxB;AACA,eAAW,WAAW;AACf,WAAA;AAAA,EACT;AAEA,WAAS,SAAS;AAChB,QAAI,YAAY,QAAW;AACzB,mBAAa,OAAO;AAAA,IACtB;AACiB,qBAAA;AACN,eAAA,eAAe,WAAW,UAAU;AAAA,EACjD;AAEA,WAAS,QAAQ;AACf,WAAO,YAAY,SAAY,SAAS,aAAa,KAAK,KAAK;AAAA,EACjE;AAEA,WAAS,YAAqB;AAC5B,UAAM,OAAO,KAAK,IAAA,GAChB,aAAa,aAAa,IAAI;AAGrB,eAAA;AAEA,eAAA;AACI,mBAAA;AAEf,QAAI,YAAY;AACd,UAAI,YAAY,QAAW;AACzB,eAAO,YAAY,YAAY;AAAA,MACjC;AACA,UAAI,QAAQ;AAEA,kBAAA,WAAW,cAAc,IAAI;AACvC,eAAO,WAAW,YAAY;AAAA,MAChC;AAAA,IACF;AACA,QAAI,YAAY,QAAW;AACf,gBAAA,WAAW,cAAc,IAAI;AAAA,IACzC;AACO,WAAA;AAAA,EACT;AAEA,YAAU,SAAS;AACnB,YAAU,QAAQ;AACX,SAAA;AACT;;"}